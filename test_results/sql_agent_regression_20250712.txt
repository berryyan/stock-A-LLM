2025-07-12 21:59:19 - mysql_connector - INFO - MySQL连接成功: 10.0.0.77:3306/Tushare
2025-07-12 21:59:19 - mysql_connector - INFO - MySQL连接器初始化完成
2025-07-12 21:59:19 - date_intelligence - INFO - 已清理所有日期智能解析缓存
2025-07-12 21:59:19 - mysql_connector - INFO - MySQL连接成功: 10.0.0.77:3306/Tushare
2025-07-12 21:59:19 - mysql_connector - INFO - MySQL连接器初始化完成
2025-07-12 21:59:19 - schema_knowledge_base - INFO - 开始构建Schema知识库...
2025-07-12 21:59:19 - schema_knowledge_base - INFO - Schema知识库构建完成，耗时: 0.18秒
2025-07-12 21:59:19 - mysql_connector - INFO - MySQL连接成功: 10.0.0.77:3306/Tushare
2025-07-12 21:59:19 - mysql_connector - INFO - MySQL连接器初始化完成
2025-07-12 21:59:20 - sql_agent_modular - INFO - 初始化SQL Agent V2，准备加载Schema信息...
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用Schema知识库获取表结构信息...
2025-07-12 21:59:20 - sql_agent_modular - INFO - Schema信息加载完成，共15个表
2025-07-12 21:59:20 - sql_agent_modular - INFO - SQL Agent V2初始化完成
================================================================================
SQL Agent 模块化版本综合测试
基于 test-guide-comprehensive.md v5.3
开始时间: 2025-07-12 21:59:20
================================================================================

============================================================
测试类别: 1.1 股价查询
测试名称: 基础查询-最新
查询: 贵州茅台最新股价
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台最新股价
2025-07-12 21:59:20 - date_intelligence - INFO - 数据驱动查询最新交易日，查询范围：最近10天内
2025-07-12 21:59:20 - date_intelligence - INFO - 更新今日交易日缓存: 2025-07-11
2025-07-12 21:59:20 - date_intelligence - INFO - 获取最近交易日成功: 2025-07-11
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '贵州茅台最新股价' -> '贵州茅台2025-07-11股价'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'最新'解析为当前时间点: 2025-07-11
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台2025-07-11股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台2025-07-11股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 股价查询
2025-07-12 21:59:20 - mysql_connector - INFO - MySQL连接成功: 10.0.0.77:3306/Tushare
2025-07-12 21:59:20 - mysql_connector - INFO - MySQL连接器初始化完成
2025-07-12 21:59:20 - stock_code_mapper - INFO - 开始刷新股票代码缓存
2025-07-12 21:59:20 - stock_code_mapper - INFO - 股票代码缓存刷新完成，共缓存21695个映射
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-11
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台2025-07-11股价
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.1 股价查询
测试名称: 指定日期
查询: 贵州茅台20250627的股价
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台20250627的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台20250627的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台20250627的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 股价查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-06-27
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到报告期: 20250627
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台20250627的股价
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.1 股价查询
测试名称: 相对日期-昨天
查询: 平安银行昨天的股价
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 平安银行昨天的股价
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '平安银行昨天的股价' -> '平安银行2025-07-10的股价'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'昨天'解析为相对时间点: 2025-07-10
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 平安银行2025-07-10的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 平安银行2025-07-10的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 股价查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票名称 '平安银行'，转换为: 000001.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 000001.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 000001.SZ, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 000001.SZ -> 000001.SZ (平安银行)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-10
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 平安银行2025-07-10的股价
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.1 股价查询
测试名称: 股票代码查询
查询: 600519.SH最新股价
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 600519.SH最新股价
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '600519.SH最新股价' -> '600519.SH 2025-07-11股价'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'最新'解析为当前时间点: 2025-07-11
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 600519.SH 2025-07-11股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 600519.SH 2025-07-11股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 股价查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 2025-07-11
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-11
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 600519.SH 2025-07-11股价
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.1 股价查询
测试名称: 日期格式变体
查询: 贵州茅台2025-06-27的股价
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台2025-06-27的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台2025-06-27的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台2025-06-27的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 股价查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-06-27
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台2025-06-27的股价
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.1 股价查询
测试名称: 深市股票代码
查询: 000001.SZ的股价
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 000001.SZ的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 000001.SZ的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 000001.SZ的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 股价查询
2025-07-12 21:59:20 - stock_code_mapper - WARNING - 无法转换实体到ts_code: SZ的股价
2025-07-12 21:59:20 - stock_code_mapper - WARNING - 无法转换实体到ts_code: SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 000001.SZ, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 000001.SZ -> 000001.SZ (平安银行)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:20 - sql_agent_modular - INFO - 查询 '股价查询' 未指定日期，使用最新交易日
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 000001.SZ的股价
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.1 股价查询-边界测试
测试名称: 中文日期格式
查询: 贵州茅台2025年06月27日的股价
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台2025年06月27日的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台2025年06月27日的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台2025年06月27日的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 股价查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 日的
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-06-27
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台2025年06月27日的股价
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.1 股价查询-边界测试
测试名称: 无后缀股票代码
查询: 600519最新股价
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 600519最新股价
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '600519最新股价' -> '600519 2025-07-11股价'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'最新'解析为当前时间点: 2025-07-11
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 600519 2025-07-11股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 600519 2025-07-11股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 股价查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票代码 600519，转换为: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-11
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 600519 2025-07-11股价
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.1 股价查询-边界测试
测试名称: 相对日期-前天
查询: 贵州茅台前天的股价
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台前天的股价
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '贵州茅台前天的股价' -> '贵州茅台2025-07-09的股价'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'前天'解析为相对时间点: 2025-07-09
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台2025-07-09的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台2025-07-09的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 股价查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-09
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台2025-07-09的股价
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.1 股价查询-边界测试
测试名称: 相对日期-上个交易日
查询: 贵州茅台上个交易日的股价
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台上个交易日的股价
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '贵州茅台上个交易日的股价' -> '贵州茅台2025-07-10的股价'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'上个交易日'解析为相对时间点: 2025-07-10
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台2025-07-10的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台2025-07-10的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 股价查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-10
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台2025-07-10的股价
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.1 股价查询-错误用例
测试名称: 股票简称错误
查询: 茅台最新股价
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 茅台最新股价
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '茅台最新股价' -> '茅台2025-07-11股价'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'最新'解析为当前时间点: 2025-07-11
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 茅台2025-07-11股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 茅台2025-07-11股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 股价查询
2025-07-12 21:59:20 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 茅台
2025-07-12 21:59:20 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 茅台2025-07-11
2025-07-12 21:59:20 - parameter_extractor - WARNING - 股票验证失败: 无法识别输入内容。请输入：1) 6位股票代码（如002047）2) 证券代码（如600519.SH）3) 股票名称（如贵州茅台）
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-11
2025-07-12 21:59:20 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:20 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.1 股价查询-错误用例
测试名称: 歧义股票名称
查询: 平安最新股价
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 平安最新股价
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '平安最新股价' -> '平安2025-07-11股价'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'最新'解析为当前时间点: 2025-07-11
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 平安2025-07-11股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 平安2025-07-11股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 股价查询
2025-07-12 21:59:20 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 平安
2025-07-12 21:59:20 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 平安2025-07-11
2025-07-12 21:59:20 - parameter_extractor - WARNING - 股票验证失败: 无法识别输入内容。请输入：1) 6位股票代码（如002047）2) 证券代码（如600519.SH）3) 股票名称（如贵州茅台）
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-11
2025-07-12 21:59:20 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:20 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.1 股价查询-错误用例
测试名称: 不存在的股票代码
查询: 123456最新股价
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 123456最新股价
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '123456最新股价' -> '123456 2025-07-11股价'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'最新'解析为当前时间点: 2025-07-11
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 123456 2025-07-11股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 123456 2025-07-11股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 股价查询
2025-07-12 21:59:20 - mysql_connector - ERROR - 查询执行失败: List argument must consist only of tuples or dictionaries
2025-07-12 21:59:20 - mysql_connector - ERROR - 查询语句: 
            SELECT ts_code 
            FROM tu_stock_basic 
            WHERE symbol = %s AND list_status = 'L'
            LIMIT 1
            
2025-07-12 21:59:20 - stock_code_mapper - ERROR - 查询symbol失败: List argument must consist only of tuples or dictionaries
2025-07-12 21:59:20 - parameter_extractor - WARNING - 股票验证失败: 无法识别输入内容。请输入：1) 6位股票代码（如002047）2) 证券代码（如600519.SH）3) 股票名称（如贵州茅台）
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-11
2025-07-12 21:59:20 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:20 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.1 股价查询-错误用例
测试名称: 无效日期
查询: 贵州茅台2025-06-31的股价
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台2025-06-31的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台2025-06-31的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台2025-06-31的股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 股价查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-06-31
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台2025-06-31的股价
2025-07-12 21:59:20 - query_validator - INFO - 基础验证失败: INVALID_DATE_FORMAT
2025-07-12 21:59:20 - error_handler - INFO - [INVALID_DATE_FORMAT] 日期格式错误
2025-07-12 21:59:20 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.1 股价查询-错误用例
测试名称: 小写后缀错误
查询: 600519.sh最新股价
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 600519.sh最新股价
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '600519.sh最新股价' -> '600519.sh 2025-07-11股价'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'最新'解析为当前时间点: 2025-07-11
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 600519.sh 2025-07-11股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 600519.sh 2025-07-11股价
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 股价查询
2025-07-12 21:59:20 - unified_stock_validator - WARNING - 证券代码后缀大小写错误: sh
2025-07-12 21:59:20 - unified_stock_validator - WARNING - 证券代码后缀大小写错误: sh
2025-07-12 21:59:20 - parameter_extractor - WARNING - 股票验证失败: 证券代码后缀大小写错误，应为.SH
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-11
2025-07-12 21:59:20 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:20 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.1 股价查询-错误用例
测试名称: 空字符串查询
查询: 
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:20 - error_handler - INFO - [EMPTY_QUERY] 查询内容为空
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.2 成交量查询
测试名称: 成交量-昨天
查询: 平安银行昨天的成交量
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 平安银行昨天的成交量
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '平安银行昨天的成交量' -> '平安银行2025-07-10的成交量'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'昨天'解析为相对时间点: 2025-07-10
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 平安银行2025-07-10的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 平安银行2025-07-10的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票名称 '平安银行'，转换为: 000001.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 000001.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 000001.SZ, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 成交量
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 000001.SZ -> 000001.SZ (平安银行)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-10
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 平安银行2025-07-10的成交量
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.2 成交量查询
测试名称: 成交量-最新
查询: 贵州茅台最新成交量
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台最新成交量
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '贵州茅台最新成交量' -> '贵州茅台2025-07-11成交量'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'最新'解析为当前时间点: 2025-07-11
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台2025-07-11成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台2025-07-11成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-11
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台2025-07-11成交量
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.2 成交量查询
测试名称: 成交量-默认
查询: 万科A的成交量
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 万科A的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 万科A的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 万科A的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票名称 '万科A'，转换为: 000002.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 000002.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 000002.SZ, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 000002.SZ -> 000002.SZ (万科A)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:20 - sql_agent_modular - INFO - 查询 '成交量查询' 未指定日期，使用最新交易日
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 万科A的成交量
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.2 成交量查询
测试名称: 成交量-今天
查询: 600519.SH今天的成交量
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 600519.SH今天的成交量
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '600519.SH今天的成交量' -> '600519.SH2025-07-11的成交量'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'今天'解析为当前时间点: 2025-07-11
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 600519.SH2025-07-11的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 600519.SH2025-07-11的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-11
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 600519.SH2025-07-11的成交量
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.2 成交量查询
测试名称: 成交额-默认
查询: 中国平安的成交额
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 中国平安的成交额
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 中国平安的成交额
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 中国平安的成交额
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量查询
2025-07-12 21:59:20 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 中国平安的
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '中国平安' 转换为: 601318.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 601318.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 601318.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 成交额
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 601318.SH -> 601318.SH (中国平安)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:20 - sql_agent_modular - INFO - 查询 '成交量查询' 未指定日期，使用最新交易日
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 中国平安的成交额
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.2 成交量查询
测试名称: 成交额-昨天
查询: 宁德时代昨天的成交额
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 宁德时代昨天的成交额
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '宁德时代昨天的成交额' -> '宁德时代2025-07-10的成交额'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'昨天'解析为相对时间点: 2025-07-10
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 宁德时代2025-07-10的成交额
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 宁德时代2025-07-10的成交额
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '宁德时代' 转换为: 300750.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 300750.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 300750.SZ, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 300750.SZ -> 300750.SZ (宁德时代)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['300750.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['300750.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-10
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 宁德时代2025-07-10的成交额
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.2 成交量查询
测试名称: 成交额-最新
查询: 比亚迪最新成交额
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 比亚迪最新成交额
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '比亚迪最新成交额' -> '比亚迪2025-07-11成交额'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'最新'解析为当前时间点: 2025-07-11
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 比亚迪2025-07-11成交额
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 比亚迪2025-07-11成交额
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '比亚迪' 转换为: 002594.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 002594.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 002594.SZ, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 002594.SZ -> 002594.SZ (比亚迪)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['002594.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['002594.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-11
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 比亚迪2025-07-11成交额
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.2 成交量查询
测试名称: 成交额-股票代码
查询: 000001.SZ的成交额
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 000001.SZ的成交额
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 000001.SZ的成交额
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 000001.SZ的成交额
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量查询
2025-07-12 21:59:20 - stock_code_mapper - WARNING - 无法转换实体到ts_code: SZ的成交额
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 000001.SZ, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 000001.SZ -> 000001.SZ (平安银行)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:20 - sql_agent_modular - INFO - 查询 '成交量查询' 未指定日期，使用最新交易日
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 000001.SZ的成交额
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.2 成交量查询-边界测试
测试名称: 股票名称清理测试
查询: 万科A前天的成交量
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 万科A前天的成交量
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '万科A前天的成交量' -> '万科A2025-07-09的成交量'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'前天'解析为相对时间点: 2025-07-09
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 万科A2025-07-09的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 万科A2025-07-09的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票名称 '万科A'，转换为: 000002.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 000002.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 000002.SZ, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 000002.SZ -> 000002.SZ (万科A)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-09
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 万科A2025-07-09的成交量
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.2 成交量查询-边界测试
测试名称: 日期替换不影响股票提取
查询: 中国平安昨天的成交额
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 中国平安昨天的成交额
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '中国平安昨天的成交额' -> '中国平安2025-07-10的成交额'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'昨天'解析为相对时间点: 2025-07-10
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 中国平安2025-07-10的成交额
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 中国平安2025-07-10的成交额
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票名称 '中国平安'，转换为: 601318.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 601318.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 601318.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 601318.SH -> 601318.SH (中国平安)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-10
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 中国平安2025-07-10的成交额
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.2 成交量查询-边界测试
测试名称: 日期替换后的股票提取
查询: 贵州茅台最近5天的成交量
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台最近5天的成交量
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '贵州茅台最近5天的成交量' -> '贵州茅台2025-07-07至2025-07-11的成交量'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'最近5天'解析为时间段: 2025-07-07至2025-07-11
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台2025-07-07至2025-07-11的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台2025-07-07至2025-07-11的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-07
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台2025-07-07至2025-07-11的成交量
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.2 成交量查询-边界测试
测试名称: 今天替换测试
查询: 宁德时代今天的成交额
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 宁德时代今天的成交额
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '宁德时代今天的成交额' -> '宁德时代2025-07-11的成交额'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'今天'解析为当前时间点: 2025-07-11
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 宁德时代2025-07-11的成交额
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 宁德时代2025-07-11的成交额
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '宁德时代' 转换为: 300750.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 300750.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 300750.SZ, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 300750.SZ -> 300750.SZ (宁德时代)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['300750.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['300750.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-11
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 宁德时代2025-07-11的成交额
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.2 成交量查询-边界测试
测试名称: 上个交易日
查询: 比亚迪上个交易日的成交量
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 比亚迪上个交易日的成交量
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '比亚迪上个交易日的成交量' -> '比亚迪2025-07-10的成交量'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'上个交易日'解析为相对时间点: 2025-07-10
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 比亚迪2025-07-10的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 比亚迪2025-07-10的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '比亚迪' 转换为: 002594.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 002594.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 002594.SZ, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 002594.SZ -> 002594.SZ (比亚迪)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['002594.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['002594.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2025-07-10
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 比亚迪2025-07-10的成交量
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.2 成交量查询-错误用例
测试名称: 股票简称错误
查询: 茅台的成交量
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 茅台的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 茅台的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 茅台的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量查询
2025-07-12 21:59:20 - parameter_extractor - WARNING - 股票验证失败: 无法识别输入内容。请输入：1) 6位股票代码（如002047）2) 证券代码（如600519.SH）3) 股票名称（如贵州茅台）
2025-07-12 21:59:20 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:20 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.2 成交量查询-错误用例
测试名称: 不存在的股票
查询: 不存在股票的成交量
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 不存在股票的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 不存在股票的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 不存在股票的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量查询
2025-07-12 21:59:20 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 不存在股票
2025-07-12 21:59:20 - parameter_extractor - WARNING - 股票验证失败: 无法识别输入内容。请输入：1) 6位股票代码（如002047）2) 证券代码（如600519.SH）3) 股票名称（如贵州茅台）
2025-07-12 21:59:20 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:20 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.2 成交量查询-错误用例
测试名称: 未来日期
查询: 贵州茅台2099年的成交量
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台2099年的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台2099年的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台2099年的成交量
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期: 2099-12-31
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台2099年的成交量
2025-07-12 21:59:20 - query_validator - INFO - 基础验证失败: FUTURE_DATE
2025-07-12 21:59:20 - error_handler - ERROR - [FUTURE_DATE] 日期2099-12-31是未来日期，股票数据不存在
2025-07-12 21:59:20 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.3 估值指标查询
测试名称: 市盈率查询
查询: 中国平安的市盈率
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 中国平安的市盈率
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 中国平安的市盈率
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 中国平安的市盈率
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 估值指标查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票名称 '中国平安'，转换为: 601318.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 601318.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 601318.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 市盈率
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 601318.SH -> 601318.SH (中国平安)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:20 - sql_agent_modular - INFO - 查询 '估值指标查询' 未指定日期，使用最新交易日
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 中国平安的市盈率
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.3 估值指标查询
测试名称: PE查询
查询: 贵州茅台的PE
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台的PE
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台的PE
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台的PE
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 估值指标查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - sql_agent_modular - INFO - 查询 '估值指标查询' 未指定日期，使用最新交易日
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台的PE
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.3 估值指标查询
测试名称: 市净率查询
查询: 平安银行的市净率
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 平安银行的市净率
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 平安银行的市净率
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 平安银行的市净率
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 估值指标查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票名称 '平安银行'，转换为: 000001.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 000001.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 000001.SZ, 查询意图: comprehensive
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票名称 '平安银行'，转换为: 000001.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 000001.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 000001.SZ, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 市净率
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 000001.SZ -> 000001.SZ (平安银行)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:20 - sql_agent_modular - INFO - 查询 '估值指标查询' 未指定日期，使用最新交易日
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 平安银行的市净率
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.3 估值指标查询
测试名称: PB查询
查询: 比亚迪的PB
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 比亚迪的PB
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 比亚迪的PB
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 比亚迪的PB
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: 估值指标查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '比亚迪' 转换为: 002594.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 002594.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 002594.SZ, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 002594.SZ -> 002594.SZ (比亚迪)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['002594.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['002594.SZ']
2025-07-12 21:59:20 - sql_agent_modular - INFO - 查询 '估值指标查询' 未指定日期，使用最新交易日
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 比亚迪的PB
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询
测试名称: 最近N天
查询: 中国平安最近10天的K线
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 中国平安最近10天的K线
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '中国平安最近10天的K线' -> '中国平安2025-06-30至2025-07-11的K线'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'最近10天'解析为时间段: 2025-06-30至2025-07-11
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 中国平安2025-06-30至2025-07-11的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 中国平安2025-06-30至2025-07-11的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票名称 '中国平安'，转换为: 601318.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 601318.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 601318.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 601318.SH -> 601318.SH (中国平安)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期范围: 2025-06-30 至 2025-07-11
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 中国平安2025-06-30至2025-07-11的K线
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询
测试名称: 日期范围
查询: 宁德时代从2025/06/01到2025/06/30的K线
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 宁德时代从2025/06/01到2025/06/30的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 宁德时代从2025/06/01到2025/06/30的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 宁德时代从2025/06/01到2025/06/30的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:20 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 宁德时代从
2025-07-12 21:59:20 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 宁德时代从2025/06/01到2025/06/30
2025-07-12 21:59:20 - stock_code_mapper - WARNING - 无法转换实体到ts_code: K线
2025-07-12 21:59:20 - parameter_extractor - WARNING - 股票验证失败: 无法识别输入内容。请输入：1) 6位股票代码（如002047）2) 证券代码（如600519.SH）3) 股票名称（如贵州茅台）
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期范围: 2025-06-01 至 2025-06-30
2025-07-12 21:59:20 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:20 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询
测试名称: 中文日期
查询: 宁德时代从6月1日到6月30日的K线
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 宁德时代从6月1日到6月30日的K线
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '宁德时代从6月1日到6月30日的K线' -> '宁德时代2025-06-01至2025-06-30的K线'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'从6月1日到6月30日'解析为时间段: 2025-06-01至2025-06-30
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 宁德时代2025-06-01至2025-06-30的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 宁德时代2025-06-01至2025-06-30的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '宁德时代' 转换为: 300750.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 300750.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 300750.SZ, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 300750.SZ -> 300750.SZ (宁德时代)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['300750.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['300750.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期范围: 2025-06-01 至 2025-06-30
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 宁德时代2025-06-01至2025-06-30的K线
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询
测试名称: 走势查询
查询: 贵州茅台最近30天的走势
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台最近30天的走势
2025-07-12 21:59:20 - date_intelligence - INFO - 日期智能解析: '贵州茅台最近30天的走势' -> '贵州茅台2025-05-30至2025-07-11的走势'
2025-07-12 21:59:20 - date_intelligence - INFO - 解析详情: 将'最近30天'解析为时间段: 2025-05-30至2025-07-11
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台2025-05-30至2025-07-11的走势
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台2025-05-30至2025-07-11的走势
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 走势
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期范围: 2025-05-30 至 2025-07-11
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台2025-05-30至2025-07-11的走势
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询
测试名称: 无时间范围-默认90天
查询: 贵州茅台的K线
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台的K线
2025-07-12 21:59:20 - query_validator - INFO - K线查询未指定日期范围，将使用默认90天
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询-边界测试
测试名称: 至连接符
查询: 贵州茅台2025-06-01至2025-06-30的K线
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台2025-06-01至2025-06-30的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台2025-06-01至2025-06-30的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台2025-06-01至2025-06-30的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期范围: 2025-06-01 至 2025-06-30
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台2025-06-01至2025-06-30的K线
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询-边界测试
测试名称: 到连接符
查询: 万科A2025-06-01到2025-06-30的K线
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 万科A2025-06-01到2025-06-30的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 万科A2025-06-01到2025-06-30的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 万科A2025-06-01到2025-06-30的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票名称 '万科A'，转换为: 000002.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 000002.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 000002.SZ, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 000002.SZ -> 000002.SZ (万科A)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期范围: 2025-06-01 至 2025-06-30
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 万科A2025-06-01到2025-06-30的K线
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询-边界测试
测试名称: -连接符
查询: 中国平安2025-06-01-2025-06-30的K线
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 中国平安2025-06-01-2025-06-30的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 中国平安2025-06-01-2025-06-30的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 中国平安2025-06-01-2025-06-30的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票名称 '中国平安'，转换为: 601318.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 601318.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 601318.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 601318.SH -> 601318.SH (中国平安)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期范围: 2025-06-01 至 2025-06-30
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 中国平安2025-06-01-2025-06-30的K线
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询-边界测试
测试名称: ~连接符
查询: 比亚迪2025/6/1~2025/6/30的K线
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 比亚迪2025/6/1~2025/6/30的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 比亚迪2025/6/1~2025/6/30的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 比亚迪2025/6/1~2025/6/30的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询词 '比亚迪' 转换为: 002594.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 002594.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 002594.SZ, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 002594.SZ -> 002594.SZ (比亚迪)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['002594.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['002594.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到日期范围: 2025-06-01 至 2025-06-30
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 比亚迪2025/6/1~2025/6/30的K线
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询-边界测试
测试名称: 月份转换
查询: 万科A6月的K线
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 万科A6月的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 万科A6月的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 万科A6月的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票名称 '万科A'，转换为: 000002.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 000002.SZ
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 000002.SZ, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 000002.SZ -> 000002.SZ (万科A)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到月份范围（默认2025年）: 2025-06-01 至 2025-06-30
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 万科A6月的K线
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:20 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询-边界测试
测试名称: 年份转换
查询: 中国平安2024年的K线
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:20 - sql_agent_modular - INFO - 收到查询请求: 中国平安2024年的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 日期智能处理后的查询: 中国平安2024年的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 中文数字规范化后: 中国平安2024年的K线
2025-07-12 21:59:20 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票名称 '中国平安'，转换为: 601318.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 从查询中提取到股票: 601318.SH
2025-07-12 21:59:20 - unified_stock_validator - INFO - 成功提取股票代码: 601318.SH, 查询意图: comprehensive
2025-07-12 21:59:20 - stock_validation_helper - INFO - 股票验证成功: 601318.SH -> 601318.SH (中国平安)
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:20 - parameter_extractor - INFO - 提取到年份范围: 2024-01-01 至 2024-12-31
2025-07-12 21:59:20 - query_validator - INFO - 执行增强验证 - 查询: 中国平安2024年的K线
2025-07-12 21:59:20 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询-边界测试
测试名称: 季度转换
查询: 宁德时代2025年第二季度的走势
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 宁德时代2025年第二季度的走势
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 宁德时代2025年第二季度的走势
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 宁德时代2025年第2季度的走势
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:21 - unified_stock_validator - INFO - 从查询词 '宁德时代' 转换为: 300750.SZ
2025-07-12 21:59:21 - unified_stock_validator - INFO - 从查询中提取到股票: 300750.SZ
2025-07-12 21:59:21 - unified_stock_validator - INFO - 成功提取股票代码: 300750.SZ, 查询意图: comprehensive
2025-07-12 21:59:21 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 年第
2025-07-12 21:59:21 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 季度
2025-07-12 21:59:21 - stock_validation_helper - INFO - 股票验证成功: 300750.SZ -> 300750.SZ (宁德时代)
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到股票: ['300750.SZ']
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到股票: ['300750.SZ']
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 宁德时代2025年第2季度的走势
2025-07-12 21:59:21 - query_validator - INFO - K线查询未指定日期范围，将使用默认90天
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询-边界测试
测试名称: 相对月份
查询: 贵州茅台本月的K线
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台本月的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台本月的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台本月的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:21 - unified_stock_validator - INFO - 从查询中提取到股票名称 '贵州茅台'，转换为: 600519.SH
2025-07-12 21:59:21 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:21 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:21 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到相对日期范围: 2025-07-01 至 2025-07-31
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台本月的K线
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询-边界测试
测试名称: 上个月
查询: 平安银行上个月的K线
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 平安银行上个月的K线
2025-07-12 21:59:21 - date_intelligence - INFO - 日期智能解析: '平安银行上个月的K线' -> '平安银行2025-06-12的K线'
2025-07-12 21:59:21 - date_intelligence - INFO - 解析详情: 将'上个月'解析为相对时间点: 2025-06-12
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 平安银行2025-06-12的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 平安银行2025-06-12的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:21 - unified_stock_validator - INFO - 从查询中提取到股票名称 '平安银行'，转换为: 000001.SZ
2025-07-12 21:59:21 - unified_stock_validator - INFO - 从查询中提取到股票: 000001.SZ
2025-07-12 21:59:21 - unified_stock_validator - INFO - 成功提取股票代码: 000001.SZ, 查询意图: comprehensive
2025-07-12 21:59:21 - stock_validation_helper - INFO - 股票验证成功: 000001.SZ -> 000001.SZ (平安银行)
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 平安银行2025-06-12的K线
2025-07-12 21:59:21 - query_validator - INFO - K线查询未指定日期范围，将使用默认90天
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询-边界测试
测试名称: 去年
查询: 比亚迪去年的K线
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 比亚迪去年的K线
2025-07-12 21:59:21 - date_intelligence - INFO - 日期智能解析: '比亚迪去年的K线' -> '比亚迪2024-07-11的K线'
2025-07-12 21:59:21 - date_intelligence - INFO - 解析详情: 将'去年'解析为年份相对: 2024-07-11
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 比亚迪2024-07-11的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 比亚迪2024-07-11的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:21 - unified_stock_validator - INFO - 从查询词 '比亚迪' 转换为: 002594.SZ
2025-07-12 21:59:21 - unified_stock_validator - INFO - 从查询中提取到股票: 002594.SZ
2025-07-12 21:59:21 - unified_stock_validator - INFO - 成功提取股票代码: 002594.SZ, 查询意图: comprehensive
2025-07-12 21:59:21 - stock_validation_helper - INFO - 股票验证成功: 002594.SZ -> 002594.SZ (比亚迪)
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到股票: ['002594.SZ']
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到股票: ['002594.SZ']
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 比亚迪2024-07-11的K线
2025-07-12 21:59:21 - query_validator - INFO - K线查询未指定日期范围，将使用默认90天
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询-边界测试
测试名称: 中文数字-二十
查询: 贵州茅台最近二十天的K线
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台最近二十天的K线
2025-07-12 21:59:21 - date_intelligence - INFO - 日期智能解析: '贵州茅台最近二十天的K线' -> '贵州茅台2025-06-16至2025-07-11的K线'
2025-07-12 21:59:21 - date_intelligence - INFO - 解析详情: 将'最近二十天'解析为时间段: 2025-06-16至2025-07-11
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台2025-06-16至2025-07-11的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台2025-06-16至2025-07-11的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:21 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:21 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:21 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:21 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到日期范围: 2025-06-16 至 2025-07-11
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台2025-06-16至2025-07-11的K线
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询-边界测试
测试名称: 中文数字-十
查询: 中国平安前十天的走势
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 中国平安前十天的走势
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 中国平安前十天的走势
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 中国平安前10天的走势
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:21 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 中国平安前
2025-07-12 21:59:21 - unified_stock_validator - INFO - 从查询中提取到股票名称 '中国平安'，转换为: 601318.SH
2025-07-12 21:59:21 - unified_stock_validator - INFO - 从查询中提取到股票: 601318.SH
2025-07-12 21:59:21 - unified_stock_validator - INFO - 成功提取股票代码: 601318.SH, 查询意图: comprehensive
2025-07-12 21:59:21 - stock_validation_helper - INFO - 股票验证成功: 601318.SH -> 601318.SH (中国平安)
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:21 - date_intelligence - INFO - 日期智能解析: '中国平安前10天的走势' -> '中国平安2025-06-30至2025-07-11的走势'
2025-07-12 21:59:21 - date_intelligence - INFO - 解析详情: 将'前10天'解析为时间段: 2025-06-30至2025-07-11
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到日期范围: 2025-06-30 至 2025-07-11
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 中国平安前10天的走势
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询-边界测试
测试名称: 中文数字-一百
查询: 万科A最近一百天的K线
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 万科A最近一百天的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 万科A最近一百天的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 万科A最近一百天的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:21 - unified_stock_validator - INFO - 从查询中提取到股票名称 '万科A'，转换为: 000002.SZ
2025-07-12 21:59:21 - unified_stock_validator - INFO - 从查询中提取到股票: 000002.SZ
2025-07-12 21:59:21 - unified_stock_validator - INFO - 成功提取股票代码: 000002.SZ, 查询意图: comprehensive
2025-07-12 21:59:21 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 最近一百天
2025-07-12 21:59:21 - stock_validation_helper - INFO - 股票验证成功: 000002.SZ -> 000002.SZ (万科A)
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到日期范围（一百=100天）: 2025-02-14 至 2025-07-11
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 万科A最近一百天的K线
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询-错误用例
测试名称: 无股票名称
查询: K线
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:21 - parameter_extractor - WARNING - 股票验证失败: 无法识别输入内容。请输入：1) 6位股票代码（如002047）2) 证券代码（如600519.SH）3) 股票名称（如贵州茅台）
2025-07-12 21:59:21 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:21 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询-错误用例
测试名称: 股票简称
查询: 茅台的K线
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 茅台的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 茅台的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 茅台的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:21 - parameter_extractor - WARNING - 股票验证失败: 无法识别输入内容。请输入：1) 6位股票代码（如002047）2) 证券代码（如600519.SH）3) 股票名称（如贵州茅台）
2025-07-12 21:59:21 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:21 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询-错误用例
测试名称: 不存在的股票
查询: 不存在股票的K线
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 不存在股票的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 不存在股票的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 不存在股票的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:21 - parameter_extractor - WARNING - 股票验证失败: 无法识别输入内容。请输入：1) 6位股票代码（如002047）2) 证券代码（如600519.SH）3) 股票名称（如贵州茅台）
2025-07-12 21:59:21 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:21 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询-错误用例
测试名称: 无效月份
查询: 贵州茅台13月的K线
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台13月的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台13月的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台13月的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:21 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:21 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:21 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:21 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:21 - parameter_extractor - WARNING - 无效月份: 13
2025-07-12 21:59:21 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:21 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.4 K线查询-错误用例
测试名称: 无效季度
查询: 中国平安2025年第五季度的K线
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 中国平安2025年第五季度的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 中国平安2025年第五季度的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 中国平安2025年第5季度的K线
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: K线查询
2025-07-12 21:59:21 - unified_stock_validator - INFO - 从查询中提取到股票名称 '中国平安'，转换为: 601318.SH
2025-07-12 21:59:21 - unified_stock_validator - INFO - 从查询中提取到股票: 601318.SH
2025-07-12 21:59:21 - unified_stock_validator - INFO - 成功提取股票代码: 601318.SH, 查询意图: comprehensive
2025-07-12 21:59:21 - stock_validation_helper - INFO - 股票验证成功: 601318.SH -> 601318.SH (中国平安)
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:21 - parameter_extractor - WARNING - 无效季度: 第5季度
2025-07-12 21:59:21 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:21 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.5 涨跌幅排名
测试名称: 涨幅前10
查询: 今天涨幅最大的前10只股票
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 今天涨幅最大的前10只股票
2025-07-12 21:59:21 - date_intelligence - INFO - 日期智能解析: '今天涨幅最大的前10只股票' -> '2025-07-11涨幅最大的前10只股票'
2025-07-12 21:59:21 - date_intelligence - INFO - 解析详情: 将'今天'解析为当前时间点: 2025-07-11
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 2025-07-11涨幅最大的前10只股票
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 2025-07-11涨幅最大的前10只股票
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: 涨跌幅排名
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到日期: 2025-07-11
2025-07-12 21:59:21 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 2025-07-11涨幅最大的前10只股票
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.5 涨跌幅排名
测试名称: 跌幅前10
查询: 今日跌幅最大的前10只股票
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 今日跌幅最大的前10只股票
2025-07-12 21:59:21 - date_intelligence - INFO - 日期智能解析: '今日跌幅最大的前10只股票' -> '2025-07-11跌幅最大的前10只股票'
2025-07-12 21:59:21 - date_intelligence - INFO - 解析详情: 将'今日'解析为当前时间点: 2025-07-11
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 2025-07-11跌幅最大的前10只股票
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 2025-07-11跌幅最大的前10只股票
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: 涨跌幅排名
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到日期: 2025-07-11
2025-07-12 21:59:21 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 2025-07-11跌幅最大的前10只股票
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.5 涨跌幅排名
测试名称: 指定日期涨幅
查询: 20250627涨幅前10
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 20250627涨幅前10
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 20250627涨幅前10
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 20250627涨幅前10
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: 涨跌幅排名
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到日期: 2025-06-27
2025-07-12 21:59:21 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到报告期: 20250627
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 20250627涨幅前10
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.5 涨跌幅排名
测试名称: 默认涨幅排名
查询: 涨幅排名
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 涨幅排名
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 涨幅排名
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 涨幅排名
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: 涨跌幅排名
2025-07-12 21:59:21 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:21 - sql_agent_modular - INFO - 查询 '涨跌幅排名' 未指定日期，使用最新交易日
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 涨幅排名
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.5 涨跌幅排名
测试名称: 跌幅最大
查询: 跌幅最大的股票
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 跌幅最大的股票
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 跌幅最大的股票
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 跌幅最大的股票
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: 涨跌幅排名
2025-07-12 21:59:21 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:21 - sql_agent_modular - INFO - 查询 '涨跌幅排名' 未指定日期，使用最新交易日
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 跌幅最大的股票
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.5 涨跌幅排名-边界测试
测试名称: 中文数字-二十
查询: 涨幅前二十
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 涨幅前二十
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 涨幅前二十
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 涨幅前20
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: 涨跌幅排名
2025-07-12 21:59:21 - parameter_extractor - INFO - 数量限制: 20
2025-07-12 21:59:21 - sql_agent_modular - INFO - 查询 '涨跌幅排名' 未指定日期，使用最新交易日
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 涨幅前20
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.5 涨跌幅排名-边界测试
测试名称: 中文数字-五
查询: 跌幅最大的前五只股票
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 跌幅最大的前五只股票
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 跌幅最大的前五只股票
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 跌幅最大的前5只股票
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: 涨跌幅排名
2025-07-12 21:59:21 - parameter_extractor - INFO - 数量限制: 5
2025-07-12 21:59:21 - sql_agent_modular - INFO - 查询 '涨跌幅排名' 未指定日期，使用最新交易日
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 跌幅最大的前5只股票
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.5 涨跌幅排名-边界测试
测试名称: 中文数字-一百
查询: 涨幅前一百名
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 涨幅前一百名
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 涨幅前一百名
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 涨幅前100名
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: 涨跌幅排名
2025-07-12 21:59:21 - parameter_extractor - INFO - 数量限制: 100
2025-07-12 21:59:21 - sql_agent_modular - INFO - 查询 '涨跌幅排名' 未指定日期，使用最新交易日
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 涨幅前100名
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.5 涨跌幅排名-边界测试
测试名称: 昨天涨幅
查询: 昨天涨幅排名
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 昨天涨幅排名
2025-07-12 21:59:21 - date_intelligence - INFO - 日期智能解析: '昨天涨幅排名' -> '2025-07-10涨幅排名'
2025-07-12 21:59:21 - date_intelligence - INFO - 解析详情: 将'昨天'解析为相对时间点: 2025-07-10
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 2025-07-10涨幅排名
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 2025-07-10涨幅排名
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: 涨跌幅排名
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到日期: 2025-07-10
2025-07-12 21:59:21 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 2025-07-10涨幅排名
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.5 涨跌幅排名-边界测试
测试名称: 指定日期跌幅
查询: 2025-06-27跌幅排名
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 2025-06-27跌幅排名
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 2025-06-27跌幅排名
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 2025-06-27跌幅排名
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: 涨跌幅排名
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到日期: 2025-06-27
2025-07-12 21:59:21 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 2025-06-27跌幅排名
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.5 涨跌幅排名-边界测试
测试名称: 上个交易日
查询: 上个交易日涨幅前10
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 上个交易日涨幅前10
2025-07-12 21:59:21 - date_intelligence - INFO - 日期智能解析: '上个交易日涨幅前10' -> '2025-07-10涨幅前10'
2025-07-12 21:59:21 - date_intelligence - INFO - 解析详情: 将'上个交易日'解析为相对时间点: 2025-07-10
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 2025-07-10涨幅前10
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 2025-07-10涨幅前10
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: 涨跌幅排名
2025-07-12 21:59:21 - parameter_extractor - INFO - 提取到日期: 2025-07-10
2025-07-12 21:59:21 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 2025-07-10涨幅前10
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.5 涨跌幅排名-错误用例
测试名称: 个股涨幅排名
查询: 贵州茅台涨幅排名
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台涨幅排名
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台涨幅排名
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台涨幅排名
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: 涨跌幅排名
2025-07-12 21:59:21 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:21 - sql_agent_modular - INFO - 查询 '涨跌幅排名' 未指定日期，使用最新交易日
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台涨幅排名
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:21 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.5 涨跌幅排名-错误用例
测试名称: 无效数量-0
查询: 涨幅前0只股票
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 涨幅前0只股票
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 涨幅前0只股票
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 涨幅前0只股票
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: 涨跌幅排名
2025-07-12 21:59:21 - parameter_extractor - INFO - 数量限制: 0
2025-07-12 21:59:21 - sql_agent_modular - INFO - 查询 '涨跌幅排名' 未指定日期，使用最新交易日
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 涨幅前0只股票
2025-07-12 21:59:21 - query_validator - INFO - 基础验证失败: LIMIT_TOO_SMALL
2025-07-12 21:59:21 - error_handler - ERROR - [LIMIT_TOO_SMALL] 数量限制不能小于1
2025-07-12 21:59:21 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.5 涨跌幅排名-错误用例
测试名称: 数量过大
查询: 涨幅前1000只股票
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 涨幅前1000只股票
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 涨幅前1000只股票
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 涨幅前1000只股票
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: 涨跌幅排名
2025-07-12 21:59:21 - parameter_extractor - INFO - 数量限制: 1000
2025-07-12 21:59:21 - sql_agent_modular - INFO - 查询 '涨跌幅排名' 未指定日期，使用最新交易日
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 涨幅前1000只股票
2025-07-12 21:59:21 - query_validator - INFO - 基础验证失败: LIMIT_TOO_LARGE
2025-07-12 21:59:21 - error_handler - INFO - [LIMIT_TOO_LARGE] 查询数量过多
2025-07-12 21:59:21 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.6 市值排名
测试名称: 总市值前20
查询: 总市值最大的前20只股票
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:21 - sql_agent_modular - INFO - 收到查询请求: 总市值最大的前20只股票
2025-07-12 21:59:21 - sql_agent_modular - INFO - 日期智能处理后的查询: 总市值最大的前20只股票
2025-07-12 21:59:21 - sql_agent_modular - INFO - 中文数字规范化后: 总市值最大的前20只股票
2025-07-12 21:59:21 - sql_agent_modular - INFO - 匹配到快速查询模板: 总市值排名
2025-07-12 21:59:21 - parameter_extractor - INFO - 数量限制: 20
2025-07-12 21:59:21 - query_validator - INFO - 执行增强验证 - 查询: 总市值最大的前20只股票
2025-07-12 21:59:21 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:22 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的市值数据
2025-07-12 21:59:22 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.6 市值排名
测试名称: 流通市值前10
查询: 流通市值最大的前10只股票
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:22 - sql_agent_modular - INFO - 收到查询请求: 流通市值最大的前10只股票
2025-07-12 21:59:22 - sql_agent_modular - INFO - 日期智能处理后的查询: 流通市值最大的前10只股票
2025-07-12 21:59:22 - sql_agent_modular - INFO - 中文数字规范化后: 流通市值最大的前10只股票
2025-07-12 21:59:22 - sql_agent_modular - INFO - 匹配到快速查询模板: 流通市值排名
2025-07-12 21:59:22 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:22 - query_validator - INFO - 执行增强验证 - 查询: 流通市值最大的前10只股票
2025-07-12 21:59:22 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:24 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的流通市值数据
2025-07-12 21:59:24 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.6 市值排名
测试名称: 市值前50
查询: 市值排名前50
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:24 - sql_agent_modular - INFO - 收到查询请求: 市值排名前50
2025-07-12 21:59:24 - sql_agent_modular - INFO - 日期智能处理后的查询: 市值排名前50
2025-07-12 21:59:24 - sql_agent_modular - INFO - 中文数字规范化后: 市值排名前50
2025-07-12 21:59:24 - sql_agent_modular - INFO - 匹配到快速查询模板: 总市值排名
2025-07-12 21:59:24 - parameter_extractor - INFO - 数量限制: 50
2025-07-12 21:59:24 - query_validator - INFO - 执行增强验证 - 查询: 市值排名前50
2025-07-12 21:59:24 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:25 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的市值数据
2025-07-12 21:59:25 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.6 市值排名
测试名称: 市值前20名
查询: 市值前20名
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:25 - sql_agent_modular - INFO - 收到查询请求: 市值前20名
2025-07-12 21:59:25 - sql_agent_modular - INFO - 日期智能处理后的查询: 市值前20名
2025-07-12 21:59:25 - sql_agent_modular - INFO - 中文数字规范化后: 市值前20名
2025-07-12 21:59:25 - sql_agent_modular - INFO - 匹配到快速查询模板: 总市值排名
2025-07-12 21:59:25 - parameter_extractor - INFO - 数量限制: 20
2025-07-12 21:59:25 - query_validator - INFO - 执行增强验证 - 查询: 市值前20名
2025-07-12 21:59:25 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:27 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的市值数据
2025-07-12 21:59:27 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.6 市值排名-默认前10
测试名称: 总市值默认
查询: 总市值排名
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:27 - sql_agent_modular - INFO - 收到查询请求: 总市值排名
2025-07-12 21:59:27 - sql_agent_modular - INFO - 日期智能处理后的查询: 总市值排名
2025-07-12 21:59:27 - sql_agent_modular - INFO - 中文数字规范化后: 总市值排名
2025-07-12 21:59:27 - sql_agent_modular - INFO - 匹配到快速查询模板: 总市值排名
2025-07-12 21:59:27 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:27 - query_validator - INFO - 执行增强验证 - 查询: 总市值排名
2025-07-12 21:59:27 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:28 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的市值数据
2025-07-12 21:59:28 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.6 市值排名-默认前10
测试名称: 市值默认
查询: 市值排名
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:28 - sql_agent_modular - INFO - 收到查询请求: 市值排名
2025-07-12 21:59:28 - sql_agent_modular - INFO - 日期智能处理后的查询: 市值排名
2025-07-12 21:59:28 - sql_agent_modular - INFO - 中文数字规范化后: 市值排名
2025-07-12 21:59:28 - sql_agent_modular - INFO - 匹配到快速查询模板: 总市值排名
2025-07-12 21:59:28 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:28 - query_validator - INFO - 执行增强验证 - 查询: 市值排名
2025-07-12 21:59:28 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:30 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的市值数据
2025-07-12 21:59:30 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.6 市值排名-默认前10
测试名称: 流通市值默认
查询: 流通市值排名
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:30 - sql_agent_modular - INFO - 收到查询请求: 流通市值排名
2025-07-12 21:59:30 - sql_agent_modular - INFO - 日期智能处理后的查询: 流通市值排名
2025-07-12 21:59:30 - sql_agent_modular - INFO - 中文数字规范化后: 流通市值排名
2025-07-12 21:59:30 - sql_agent_modular - INFO - 匹配到快速查询模板: 流通市值排名
2025-07-12 21:59:30 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:30 - query_validator - INFO - 执行增强验证 - 查询: 流通市值排名
2025-07-12 21:59:30 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:31 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的流通市值数据
2025-07-12 21:59:31 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.6 市值排名-默认前10
测试名称: 市值排行默认
查询: 市值排行
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:31 - sql_agent_modular - INFO - 收到查询请求: 市值排行
2025-07-12 21:59:31 - sql_agent_modular - INFO - 日期智能处理后的查询: 市值排行
2025-07-12 21:59:31 - sql_agent_modular - INFO - 中文数字规范化后: 市值排行
2025-07-12 21:59:31 - sql_agent_modular - INFO - 匹配到快速查询模板: 总市值排名
2025-07-12 21:59:31 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:31 - query_validator - INFO - 执行增强验证 - 查询: 市值排行
2025-07-12 21:59:31 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:33 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的市值数据
2025-07-12 21:59:33 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.6 市值排名-TOP格式
测试名称: TOP10格式
查询: 市值TOP10
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:33 - sql_agent_modular - INFO - 收到查询请求: 市值TOP10
2025-07-12 21:59:33 - sql_agent_modular - INFO - 日期智能处理后的查询: 市值TOP10
2025-07-12 21:59:33 - sql_agent_modular - INFO - 中文数字规范化后: 市值TOP10
2025-07-12 21:59:33 - sql_agent_modular - INFO - 匹配到快速查询模板: 总市值排名
2025-07-12 21:59:33 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:33 - query_validator - INFO - 执行增强验证 - 查询: 市值TOP10
2025-07-12 21:59:33 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:34 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的市值数据
2025-07-12 21:59:34 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.6 市值排名-TOP格式
测试名称: 总市值TOP20
查询: 总市值TOP20
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:34 - sql_agent_modular - INFO - 收到查询请求: 总市值TOP20
2025-07-12 21:59:34 - sql_agent_modular - INFO - 日期智能处理后的查询: 总市值TOP20
2025-07-12 21:59:34 - sql_agent_modular - INFO - 中文数字规范化后: 总市值TOP20
2025-07-12 21:59:34 - sql_agent_modular - INFO - 匹配到快速查询模板: 总市值排名
2025-07-12 21:59:34 - parameter_extractor - INFO - 数量限制: 20
2025-07-12 21:59:34 - query_validator - INFO - 执行增强验证 - 查询: 总市值TOP20
2025-07-12 21:59:34 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:36 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的市值数据
2025-07-12 21:59:36 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.6 市值排名-TOP格式
测试名称: 流通市值TOP5
查询: 流通市值TOP5
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:36 - sql_agent_modular - INFO - 收到查询请求: 流通市值TOP5
2025-07-12 21:59:36 - sql_agent_modular - INFO - 日期智能处理后的查询: 流通市值TOP5
2025-07-12 21:59:36 - sql_agent_modular - INFO - 中文数字规范化后: 流通市值TOP5
2025-07-12 21:59:36 - sql_agent_modular - INFO - 匹配到快速查询模板: 流通市值排名
2025-07-12 21:59:36 - parameter_extractor - INFO - 数量限制: 5
2025-07-12 21:59:36 - query_validator - INFO - 执行增强验证 - 查询: 流通市值TOP5
2025-07-12 21:59:36 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:37 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的流通市值数据
2025-07-12 21:59:37 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.6 市值排名-TOP格式
测试名称: A股市值TOP15
查询: A股市值TOP15
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:37 - sql_agent_modular - INFO - 收到查询请求: A股市值TOP15
2025-07-12 21:59:37 - sql_agent_modular - INFO - 日期智能处理后的查询: A股市值TOP15
2025-07-12 21:59:37 - sql_agent_modular - INFO - 中文数字规范化后: A股市值TOP15
2025-07-12 21:59:37 - sql_agent_modular - INFO - 匹配到快速查询模板: 总市值排名
2025-07-12 21:59:37 - parameter_extractor - INFO - 数量限制: 15
2025-07-12 21:59:37 - query_validator - INFO - 执行增强验证 - 查询: A股市值TOP15
2025-07-12 21:59:37 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:39 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的市值数据
2025-07-12 21:59:39 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.6 市值排名-时间指定
测试名称: 今天市值
查询: 今天的市值排名
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:39 - sql_agent_modular - INFO - 收到查询请求: 今天的市值排名
2025-07-12 21:59:39 - date_intelligence - INFO - 日期智能解析: '今天的市值排名' -> '2025-07-11的市值排名'
2025-07-12 21:59:39 - date_intelligence - INFO - 解析详情: 将'今天'解析为当前时间点: 2025-07-11
2025-07-12 21:59:39 - sql_agent_modular - INFO - 日期智能处理后的查询: 2025-07-11的市值排名
2025-07-12 21:59:39 - sql_agent_modular - INFO - 中文数字规范化后: 2025-07-11的市值排名
2025-07-12 21:59:39 - sql_agent_modular - INFO - 匹配到快速查询模板: 总市值排名
2025-07-12 21:59:39 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:39 - query_validator - INFO - 执行增强验证 - 查询: 2025-07-11的市值排名
2025-07-12 21:59:39 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:40 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的市值数据
2025-07-12 21:59:40 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.6 市值排名-时间指定
测试名称: 最新市值
查询: 最新市值排名
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:40 - sql_agent_modular - INFO - 收到查询请求: 最新市值排名
2025-07-12 21:59:40 - date_intelligence - INFO - 日期智能解析: '最新市值排名' -> '2025-07-11市值排名'
2025-07-12 21:59:40 - date_intelligence - INFO - 解析详情: 将'最新'解析为当前时间点: 2025-07-11
2025-07-12 21:59:40 - sql_agent_modular - INFO - 日期智能处理后的查询: 2025-07-11市值排名
2025-07-12 21:59:40 - sql_agent_modular - INFO - 中文数字规范化后: 2025-07-11市值排名
2025-07-12 21:59:40 - sql_agent_modular - INFO - 匹配到快速查询模板: 总市值排名
2025-07-12 21:59:40 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:40 - query_validator - INFO - 执行增强验证 - 查询: 2025-07-11市值排名
2025-07-12 21:59:40 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:42 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的市值数据
2025-07-12 21:59:42 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.6 市值排名-时间指定
测试名称: 昨天流通市值
查询: 昨天流通市值排名
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:42 - sql_agent_modular - INFO - 收到查询请求: 昨天流通市值排名
2025-07-12 21:59:42 - date_intelligence - INFO - 日期智能解析: '昨天流通市值排名' -> '2025-07-10流通市值排名'
2025-07-12 21:59:42 - date_intelligence - INFO - 解析详情: 将'昨天'解析为相对时间点: 2025-07-10
2025-07-12 21:59:42 - sql_agent_modular - INFO - 日期智能处理后的查询: 2025-07-10流通市值排名
2025-07-12 21:59:42 - sql_agent_modular - INFO - 中文数字规范化后: 2025-07-10流通市值排名
2025-07-12 21:59:42 - sql_agent_modular - INFO - 匹配到快速查询模板: 流通市值排名
2025-07-12 21:59:42 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:42 - query_validator - INFO - 执行增强验证 - 查询: 2025-07-10流通市值排名
2025-07-12 21:59:42 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:43 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的流通市值数据
2025-07-12 21:59:43 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.6 市值排名-时间指定
测试名称: 指定日期市值
查询: 2025-07-01市值排名
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:43 - sql_agent_modular - INFO - 收到查询请求: 2025-07-01市值排名
2025-07-12 21:59:43 - sql_agent_modular - INFO - 日期智能处理后的查询: 2025-07-01市值排名
2025-07-12 21:59:43 - sql_agent_modular - INFO - 中文数字规范化后: 2025-07-01市值排名
2025-07-12 21:59:43 - sql_agent_modular - INFO - 匹配到快速查询模板: 总市值排名
2025-07-12 21:59:43 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:43 - query_validator - INFO - 执行增强验证 - 查询: 2025-07-01市值排名
2025-07-12 21:59:43 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的市值数据
2025-07-12 21:59:45 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.7 成交额排名
测试名称: 成交额前10
查询: 成交额最大的前10只股票
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 成交额最大的前10只股票
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 成交额最大的前10只股票
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 成交额最大的前10只股票
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交额排名
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 成交额最大的前10只股票
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.7 成交额排名
测试名称: 成交额前20
查询: 成交额排名前20
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 成交额排名前20
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 成交额排名前20
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 成交额排名前20
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交额排名
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 成交额排名前20
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.7 成交额排名
测试名称: 成交额前15
查询: 成交额前15
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 成交额前15
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 成交额前15
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 成交额前15
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交额排名
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 成交额前15
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.7 成交额排名
测试名称: 昨天成交额前15
查询: 昨天成交额最大的前15只股票
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 昨天成交额最大的前15只股票
2025-07-12 21:59:45 - date_intelligence - INFO - 日期智能解析: '昨天成交额最大的前15只股票' -> '2025-07-10成交额最大的前15只股票'
2025-07-12 21:59:45 - date_intelligence - INFO - 解析详情: 将'昨天'解析为相对时间点: 2025-07-10
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 2025-07-10成交额最大的前15只股票
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 2025-07-10成交额最大的前15只股票
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交额排名
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 2025-07-10成交额最大的前15只股票
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.7 成交额排名-默认前10
测试名称: 成交额默认
查询: 成交额排名
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 成交额排名
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 成交额排名
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 成交额排名
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交额排名
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 成交额排名
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.7 成交额排名-默认前10
测试名称: 成交额排行默认
查询: 成交额排行
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 成交额排行
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 成交额排行
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 成交额排行
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交额排名
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 成交额排行
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.7 成交额排名-默认前10
测试名称: A股成交额默认
查询: A股成交额排名
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: A股成交额排名
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: A股成交额排名
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: A股成交额排名
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交额排名
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: A股成交额排名
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.7 成交额排名-TOP格式
测试名称: 成交额TOP10
查询: 成交额TOP10
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 成交额TOP10
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 成交额TOP10
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 成交额TOP10
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交额排名
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 成交额TOP10
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.7 成交额排名-TOP格式
测试名称: 成交额TOP20
查询: 成交额TOP20
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 成交额TOP20
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 成交额TOP20
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 成交额TOP20
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交额排名
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 成交额TOP20
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.7 成交额排名-TOP格式
测试名称: 成交额TOP5
查询: 成交额TOP5
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 成交额TOP5
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 成交额TOP5
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 成交额TOP5
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交额排名
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 成交额TOP5
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.8 成交量排名
测试名称: 成交量前10
查询: 成交量最大的前10只股票
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 成交量最大的前10只股票
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 成交量最大的前10只股票
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 成交量最大的前10只股票
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量排名
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 成交量最大的前10只股票
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.8 成交量排名
测试名称: 成交量前20
查询: 成交量排名前20
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 成交量排名前20
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 成交量排名前20
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 成交量排名前20
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量排名
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 成交量排名前20
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.8 成交量排名
测试名称: 成交量前15
查询: 成交量前15
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 成交量前15
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 成交量前15
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 成交量前15
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量排名
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 成交量前15
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.8 成交量排名
测试名称: 昨天成交量前15
查询: 昨天成交量最大的前15只股票
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 昨天成交量最大的前15只股票
2025-07-12 21:59:45 - date_intelligence - INFO - 日期智能解析: '昨天成交量最大的前15只股票' -> '2025-07-10成交量最大的前15只股票'
2025-07-12 21:59:45 - date_intelligence - INFO - 解析详情: 将'昨天'解析为相对时间点: 2025-07-10
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 2025-07-10成交量最大的前15只股票
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 2025-07-10成交量最大的前15只股票
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量排名
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 2025-07-10成交量最大的前15只股票
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.8 成交量排名-区分测试
测试名称: 个股成交量查询
查询: 贵州茅台的成交量
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台的成交量
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台的成交量
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台的成交量
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量查询
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:45 - sql_agent_modular - INFO - 查询 '成交量查询' 未指定日期，使用最新交易日
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台的成交量
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.8 成交量排名-区分测试
测试名称: 成交量排名查询
查询: 成交量排名
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 成交量排名
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 成交量排名
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 成交量排名
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量排名
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 成交量排名
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.8 成交量排名-区分测试
测试名称: 个股成交量
查询: 平安银行成交量
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 平安银行成交量
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 平安银行成交量
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 平安银行成交量
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量查询
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票名称 '平安银行'，转换为: 000001.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 000001.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 000001.SZ, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 000001.SZ -> 000001.SZ (平安银行)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:45 - sql_agent_modular - INFO - 查询 '成交量查询' 未指定日期，使用最新交易日
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 平安银行成交量
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.8 成交量排名-区分测试
测试名称: 成交量TOP排名
查询: 成交量TOP10
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 成交量TOP10
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 成交量TOP10
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 成交量TOP10
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 成交量排名
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 成交量TOP10
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.9 主力资金排名
测试名称: 主力流入前10
查询: 主力净流入最多的前10只股票
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 主力净流入最多的前10只股票
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 主力净流入最多的前10只股票
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 主力净流入最多的前10只股票
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 主力净流入排行
2025-07-12 21:59:45 - mysql_connector - INFO - MySQL连接成功: 10.0.0.77:3306/Tushare
2025-07-12 21:59:45 - mysql_connector - INFO - MySQL连接器初始化完成
2025-07-12 21:59:45 - sector_code_mapper - INFO - 开始刷新板块代码缓存
2025-07-12 21:59:45 - sector_code_mapper - INFO - 板块代码缓存刷新完成，共缓存586个板块映射
2025-07-12 21:59:45 - sector_code_mapper - INFO - 板块类型分布: {'行业': 86, '概念': 469, '地域': 31}
2025-07-12 21:59:45 - mysql_connector - INFO - MySQL连接成功: 10.0.0.77:3306/Tushare
2025-07-12 21:59:45 - mysql_connector - INFO - MySQL连接器初始化完成
2025-07-12 21:59:45 - sector_code_mapper - INFO - 开始刷新板块代码缓存
2025-07-12 21:59:45 - sector_code_mapper - INFO - 板块代码缓存刷新完成，共缓存586个板块映射
2025-07-12 21:59:45 - sector_code_mapper - INFO - 板块类型分布: {'行业': 86, '概念': 469, '地域': 31}
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 力净流入最多
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 只股票
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 主力净流入最多
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 前10只股票
2025-07-12 21:59:45 - parameter_extractor - INFO - 模板 '主力净流入排行' 不需要股票，不设置错误
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 主力净流入最多的前10只股票
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.9 主力资金排名
测试名称: 主力流出前10
查询: 主力净流出最多的前10只股票
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 主力净流出最多的前10只股票
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 主力净流出最多的前10只股票
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 主力净流出最多的前10只股票
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 主力净流出排行
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 力净流出最多
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 主力净流出最多
2025-07-12 21:59:45 - parameter_extractor - INFO - 模板 '主力净流出排行' 不需要股票，不设置错误
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 主力净流出最多的前10只股票
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.9 主力资金排名
测试名称: 主力流入前20
查询: 主力净流入排名前20
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 主力净流入排名前20
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 主力净流入排名前20
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 主力净流入排名前20
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 主力净流入排行
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 主力净流入
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 排名前
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 主力净流入排名前20
2025-07-12 21:59:45 - parameter_extractor - INFO - 模板 '主力净流入排行' 不需要股票，不设置错误
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 主力净流入排名前20
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.9 主力资金排名
测试名称: 主力流出前15
查询: 主力净流出排名前15
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 主力净流出排名前15
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 主力净流出排名前15
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 主力净流出排名前15
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 主力净流出排行
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 主力净流出
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 主力净流出排名前15
2025-07-12 21:59:45 - parameter_extractor - INFO - 模板 '主力净流出排行' 不需要股票，不设置错误
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 主力净流出排名前15
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.9 主力资金排名-默认前10
测试名称: 主力流入默认
查询: 主力净流入排名
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 主力净流入排名
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 主力净流入排名
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 主力净流入排名
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 主力净流入排行
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 排名
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 主力净流入排名
2025-07-12 21:59:45 - parameter_extractor - INFO - 模板 '主力净流入排行' 不需要股票，不设置错误
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 主力净流入排名
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.9 主力资金排名-默认前10
测试名称: 主力流入排行默认
查询: 主力净流入排行
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 主力净流入排行
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 主力净流入排行
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 主力净流入排行
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 主力净流入排行
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 排行
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 主力净流入排行
2025-07-12 21:59:45 - parameter_extractor - INFO - 模板 '主力净流入排行' 不需要股票，不设置错误
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 主力净流入排行
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.9 主力资金排名-默认前10
测试名称: 主力流出默认
查询: 主力净流出排名
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 主力净流出排名
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 主力净流出排名
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 主力净流出排名
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 主力净流出排行
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 主力净流出排名
2025-07-12 21:59:45 - parameter_extractor - INFO - 模板 '主力净流出排行' 不需要股票，不设置错误
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 主力净流出排名
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.9 主力资金排名-默认前10
测试名称: 主力流出排行默认
查询: 主力净流出排行
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 主力净流出排行
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 主力净流出排行
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 主力净流出排行
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 主力净流出排行
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 主力净流出排行
2025-07-12 21:59:45 - parameter_extractor - INFO - 模板 '主力净流出排行' 不需要股票，不设置错误
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 主力净流出排行
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.9 主力资金排名-错误用例
测试名称: 非标准术语-机构
查询: 机构资金流入排名
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 机构资金流入排名
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 机构资金流入排名
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 机构资金流入排名
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 主力净流入排行
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 机构
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 机构资金流入
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 机构资金流入排名
2025-07-12 21:59:45 - parameter_extractor - INFO - 模板 '主力净流入排行' 不需要股票，不设置错误
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 机构资金流入排名
2025-07-12 21:59:45 - query_validator - INFO - 拒绝查询 - 非标准术语: 机构资金
2025-07-12 21:59:45 - error_handler - ERROR - [NON_STANDARD_TERM] 请使用标准术语"主力资金"替代"机构资金"
2025-07-12 21:59:45 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.9 主力资金排名-错误用例
测试名称: 非标准术语-大资金
查询: 大资金流入排行
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 大资金流入排行
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 大资金流入排行
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 大资金流入排行
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 主力净流入排行
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 大资金流入
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 大资金流入排行
2025-07-12 21:59:45 - parameter_extractor - INFO - 模板 '主力净流入排行' 不需要股票，不设置错误
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 大资金流入排行
2025-07-12 21:59:45 - query_validator - INFO - 拒绝查询 - 非标准术语: 大资金
2025-07-12 21:59:45 - error_handler - ERROR - [NON_STANDARD_TERM] 请使用标准术语"主力资金"替代"大资金"
2025-07-12 21:59:45 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.10 个股主力资金
测试名称: 贵州茅台主力
查询: 贵州茅台的主力资金
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 个股主力资金
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 的主力
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 主力资金
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:45 - sql_agent_modular - INFO - 查询 '个股主力资金' 未指定日期，使用最新交易日
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台的主力资金
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.10 个股主力资金
测试名称: 平安银行主力
查询: 平安银行的主力资金
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 平安银行的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 平安银行的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 平安银行的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 个股主力资金
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票名称 '平安银行'，转换为: 000001.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 000001.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 000001.SZ, 查询意图: comprehensive
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票名称 '平安银行'，转换为: 000001.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 000001.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 000001.SZ, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 000001.SZ -> 000001.SZ (平安银行)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:45 - sql_agent_modular - INFO - 查询 '个股主力资金' 未指定日期，使用最新交易日
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 平安银行的主力资金
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.10 个股主力资金
测试名称: 股票代码主力
查询: 600519.SH的主力资金
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 600519.SH的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 600519.SH的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 600519.SH的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 个股主力资金
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: money_flow
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:45 - sql_agent_modular - INFO - 查询 '个股主力资金' 未指定日期，使用最新交易日
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 600519.SH的主力资金
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.10 个股主力资金
测试名称: 比亚迪主力
查询: 比亚迪的主力资金
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 比亚迪的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 比亚迪的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 比亚迪的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 个股主力资金
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 比亚迪的
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询词 '比亚迪' 转换为: 002594.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 002594.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 002594.SZ, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 资金
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 002594.SZ -> 002594.SZ (比亚迪)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['002594.SZ']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['002594.SZ']
2025-07-12 21:59:45 - sql_agent_modular - INFO - 查询 '个股主力资金' 未指定日期，使用最新交易日
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 比亚迪的主力资金
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.10 个股主力资金
测试名称: 万科A主力
查询: 万科A的主力资金
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 万科A的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 万科A的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 万科A的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 个股主力资金
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票名称 '万科A'，转换为: 000002.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 000002.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 000002.SZ, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 000002.SZ -> 000002.SZ (万科A)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:45 - sql_agent_modular - INFO - 查询 '个股主力资金' 未指定日期，使用最新交易日
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 万科A的主力资金
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.10 个股主力资金-时间指定
测试名称: 昨天主力
查询: 贵州茅台昨天的主力资金
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台昨天的主力资金
2025-07-12 21:59:45 - date_intelligence - INFO - 日期智能解析: '贵州茅台昨天的主力资金' -> '贵州茅台2025-07-10的主力资金'
2025-07-12 21:59:45 - date_intelligence - INFO - 解析详情: 将'昨天'解析为相对时间点: 2025-07-10
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台2025-07-10的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台2025-07-10的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 个股主力资金
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到日期: 2025-07-10
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台2025-07-10的主力资金
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.10 个股主力资金-时间指定
测试名称: 指定日期主力
查询: 平安银行2025-07-01的主力资金
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 平安银行2025-07-01的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 平安银行2025-07-01的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 平安银行2025-07-01的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 个股主力资金
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票名称 '平安银行'，转换为: 000001.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 000001.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 000001.SZ, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 000001.SZ -> 000001.SZ (平安银行)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到日期: 2025-07-01
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 平安银行2025-07-01的主力资金
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.10 个股主力资金-时间指定
测试名称: 今天主力
查询: 万科A今天的主力资金
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 万科A今天的主力资金
2025-07-12 21:59:45 - date_intelligence - INFO - 日期智能解析: '万科A今天的主力资金' -> '万科A2025-07-11的主力资金'
2025-07-12 21:59:45 - date_intelligence - INFO - 解析详情: 将'今天'解析为当前时间点: 2025-07-11
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 万科A2025-07-11的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 万科A2025-07-11的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 个股主力资金
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票名称 '万科A'，转换为: 000002.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 000002.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 000002.SZ, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 000002.SZ -> 000002.SZ (万科A)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到日期: 2025-07-11
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 万科A2025-07-11的主力资金
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.10 个股主力资金-错误用例
测试名称: 非标准术语-机构
查询: 贵州茅台的机构资金
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台的机构资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台的机构资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台的机构资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 个股主力资金
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 的机构
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 机构资金
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:45 - sql_agent_modular - INFO - 查询 '个股主力资金' 未指定日期，使用最新交易日
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台的机构资金
2025-07-12 21:59:45 - query_validator - INFO - 拒绝查询 - 非标准术语: 机构资金
2025-07-12 21:59:45 - error_handler - ERROR - [NON_STANDARD_TERM] 请使用标准术语"主力资金"替代"机构资金"
2025-07-12 21:59:45 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.10 个股主力资金-错误用例
测试名称: 非标准术语-大资金
查询: 平安银行的大资金流入
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 平安银行的大资金流入
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 平安银行的大资金流入
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 平安银行的大资金流入
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 个股主力资金
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票名称 '平安银行'，转换为: 000001.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 000001.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 000001.SZ, 查询意图: comprehensive
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票名称 '平安银行'，转换为: 000001.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 000001.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 000001.SZ, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 资金流入
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 000001.SZ -> 000001.SZ (平安银行)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:45 - sql_agent_modular - INFO - 查询 '个股主力资金' 未指定日期，使用最新交易日
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 平安银行的大资金流入
2025-07-12 21:59:45 - query_validator - INFO - 拒绝查询 - 非标准术语: 大资金
2025-07-12 21:59:45 - error_handler - ERROR - [NON_STANDARD_TERM] 请使用标准术语"主力资金"替代"大资金"
2025-07-12 21:59:45 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.10 个股主力资金-错误用例
测试名称: 不支持的资金类型
查询: 万科A的游资
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 万科A的游资
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 万科A的游资
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 万科A的游资
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用传统LLM查询路径
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票名称 '万科A'，转换为: 000002.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 000002.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 000002.SZ, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 游资
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 000002.SZ -> 000002.SZ (万科A)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:45 - parameter_extractor - INFO - 数量限制: 10
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 万科A的游资
2025-07-12 21:59:45 - query_validator - INFO - 拒绝查询 - 非标准术语: 游资
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.10 个股主力资金-错误用例
测试名称: 股票简称错误
查询: 茅台的主力资金
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 茅台的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 茅台的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 茅台的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 个股主力资金
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 茅台的
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 主力
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 茅台的主力
2025-07-12 21:59:45 - parameter_extractor - WARNING - 股票验证失败: 无法识别输入内容。请输入：1) 6位股票代码（如002047）2) 证券代码（如600519.SH）3) 股票名称（如贵州茅台）
2025-07-12 21:59:45 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:45 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.10 个股主力资金-错误用例
测试名称: 歧义股票名称
查询: 平安的主力资金
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 平安的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 平安的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 平安的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 个股主力资金
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 平安的
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 平安的主力
2025-07-12 21:59:45 - parameter_extractor - WARNING - 股票验证失败: 无法识别输入内容。请输入：1) 6位股票代码（如002047）2) 证券代码（如600519.SH）3) 股票名称（如贵州茅台）
2025-07-12 21:59:45 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:45 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.11 板块主力资金
测试名称: 银行板块
查询: 银行板块的主力资金
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 银行板块的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 银行板块的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 银行板块的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 板块主力资金
2025-07-12 21:59:45 - unified_sector_validator - INFO - 提取到板块: 银行板块 (得分: 10)
2025-07-12 21:59:45 - unified_sector_validator - INFO - 板块代码映射: 银行 -> BK0475.DC
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到板块: 银行板块 (BK0475.DC)
2025-07-12 21:59:45 - sql_agent_modular - INFO - 查询 '板块主力资金' 未指定日期，使用最新交易日
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 银行板块的主力资金
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 通过板块代码 BK0475.DC 获取板块名称: 银行
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.11 板块主力资金
测试名称: 新能源板块
查询: 新能源板块的主力资金
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 新能源板块的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 新能源板块的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 新能源板块的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 板块主力资金
2025-07-12 21:59:45 - unified_sector_validator - INFO - 提取到板块: 新能源板块 (得分: 10)
2025-07-12 21:59:45 - unified_sector_validator - INFO - 板块代码映射: 新能源 -> BK0493.DC
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到板块: 新能源板块 (BK0493.DC)
2025-07-12 21:59:45 - sql_agent_modular - INFO - 查询 '板块主力资金' 未指定日期，使用最新交易日
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 新能源板块的主力资金
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 通过板块代码 BK0493.DC 获取板块名称: 新能源
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.11 板块主力资金
测试名称: 白酒板块
查询: 白酒板块的主力资金
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 白酒板块的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 白酒板块的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 白酒板块的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 板块主力资金
2025-07-12 21:59:45 - unified_sector_validator - INFO - 提取到板块: 白酒板块 (得分: 10)
2025-07-12 21:59:45 - unified_sector_validator - INFO - 板块代码映射: 白酒 -> BK0896.DC
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到板块: 白酒板块 (BK0896.DC)
2025-07-12 21:59:45 - sql_agent_modular - INFO - 查询 '板块主力资金' 未指定日期，使用最新交易日
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 白酒板块的主力资金
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 通过板块代码 BK0896.DC 获取板块名称: 白酒
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.11 板块主力资金
测试名称: 房地产板块
查询: 房地产板块的主力资金
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 房地产板块的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 房地产板块的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 房地产板块的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 板块主力资金
2025-07-12 21:59:45 - unified_sector_validator - INFO - 提取到板块: 房地产板块 (得分: 10)
2025-07-12 21:59:45 - unified_sector_validator - WARNING - 未找到板块代码: 房地产
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到板块: 房地产板块 (None)
2025-07-12 21:59:45 - sql_agent_modular - INFO - 查询 '板块主力资金' 未指定日期，使用最新交易日
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 房地产板块的主力资金
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 板块名称映射: 房地产板块 -> 房地产
2025-07-12 21:59:45 - error_handler - ERROR - [QUERY_ERROR] 未找到房地产在20250711的主力资金数据
2025-07-12 21:59:45 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.11 板块主力资金
测试名称: 证券板块
查询: 证券板块的主力资金
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 证券板块的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 证券板块的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 证券板块的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 板块主力资金
2025-07-12 21:59:45 - unified_sector_validator - INFO - 提取到板块: 证券板块 (得分: 10)
2025-07-12 21:59:45 - unified_sector_validator - INFO - 板块代码映射: 证券 -> BK0473.DC
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到板块: 证券板块 (BK0473.DC)
2025-07-12 21:59:45 - sql_agent_modular - INFO - 查询 '板块主力资金' 未指定日期，使用最新交易日
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 证券板块的主力资金
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 通过板块代码 BK0473.DC 获取板块名称: 证券
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.11 板块主力资金-时间指定
测试名称: 银行板块昨天
查询: 银行板块昨天的主力资金
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 银行板块昨天的主力资金
2025-07-12 21:59:45 - date_intelligence - INFO - 日期智能解析: '银行板块昨天的主力资金' -> '银行板块2025-07-10的主力资金'
2025-07-12 21:59:45 - date_intelligence - INFO - 解析详情: 将'昨天'解析为相对时间点: 2025-07-10
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 银行板块2025-07-10的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 银行板块2025-07-10的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 板块主力资金
2025-07-12 21:59:45 - unified_sector_validator - INFO - 提取到板块: 银行板块 (得分: 10)
2025-07-12 21:59:45 - unified_sector_validator - INFO - 板块代码映射: 银行 -> BK0475.DC
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到板块: 银行板块 (BK0475.DC)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到日期: 2025-07-10
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 银行板块2025-07-10的主力资金
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 通过板块代码 BK0475.DC 获取板块名称: 银行
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.11 板块主力资金-时间指定
测试名称: 新能源板块指定日期
查询: 新能源板块2025-07-01的主力资金
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 新能源板块2025-07-01的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 新能源板块2025-07-01的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 新能源板块2025-07-01的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 板块主力资金
2025-07-12 21:59:45 - unified_sector_validator - INFO - 提取到板块: 新能源板块 (得分: 10)
2025-07-12 21:59:45 - unified_sector_validator - INFO - 板块代码映射: 新能源 -> BK0493.DC
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到板块: 新能源板块 (BK0493.DC)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到日期: 2025-07-01
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 新能源板块2025-07-01的主力资金
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 通过板块代码 BK0493.DC 获取板块名称: 新能源
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.11 板块主力资金-时间指定
测试名称: 白酒板块今天
查询: 白酒板块今天的主力资金
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 白酒板块今天的主力资金
2025-07-12 21:59:45 - date_intelligence - INFO - 日期智能解析: '白酒板块今天的主力资金' -> '白酒板块2025-07-11的主力资金'
2025-07-12 21:59:45 - date_intelligence - INFO - 解析详情: 将'今天'解析为当前时间点: 2025-07-11
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 白酒板块2025-07-11的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 白酒板块2025-07-11的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 板块主力资金
2025-07-12 21:59:45 - unified_sector_validator - INFO - 提取到板块: 白酒板块 (得分: 10)
2025-07-12 21:59:45 - unified_sector_validator - INFO - 板块代码映射: 白酒 -> BK0896.DC
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到板块: 白酒板块 (BK0896.DC)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到日期: 2025-07-11
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 白酒板块2025-07-11的主力资金
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 通过板块代码 BK0896.DC 获取板块名称: 白酒
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.11 板块主力资金-错误用例
测试名称: 缺少板块后缀
查询: 银行的主力资金
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 银行的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 银行的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 银行的主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 个股主力资金
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 银行的
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 银行
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 银行的主力
2025-07-12 21:59:45 - parameter_extractor - WARNING - 股票验证失败: 无法识别输入内容。请输入：1) 6位股票代码（如002047）2) 证券代码（如600519.SH）3) 股票名称（如贵州茅台）
2025-07-12 21:59:45 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:45 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.11 板块主力资金-错误用例
测试名称: 缺少板块后缀
查询: 新能源主力资金
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 新能源主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 新能源主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 新能源主力资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 个股主力资金
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 新能源
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 新能源主力
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 新能源主力资金
2025-07-12 21:59:45 - parameter_extractor - WARNING - 股票验证失败: 无法识别输入内容。请输入：1) 6位股票代码（如002047）2) 证券代码（如600519.SH）3) 股票名称（如贵州茅台）
2025-07-12 21:59:45 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:45 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.11 板块主力资金-错误用例
测试名称: 缺少板块后缀
查询: 白酒主力净流入
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 白酒主力净流入
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 白酒主力净流入
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 白酒主力净流入
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 个股主力资金
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 酒主力净流入
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 白酒
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 白酒主力净流入
2025-07-12 21:59:45 - parameter_extractor - WARNING - 股票验证失败: 无法识别输入内容。请输入：1) 6位股票代码（如002047）2) 证券代码（如600519.SH）3) 股票名称（如贵州茅台）
2025-07-12 21:59:45 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:45 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.11 板块主力资金-错误用例
测试名称: 非标准术语
查询: 银行板块的机构资金
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 银行板块的机构资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 银行板块的机构资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 银行板块的机构资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 板块主力资金
2025-07-12 21:59:45 - unified_sector_validator - INFO - 提取到板块: 银行板块 (得分: 10)
2025-07-12 21:59:45 - unified_sector_validator - INFO - 板块代码映射: 银行 -> BK0475.DC
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到板块: 银行板块 (BK0475.DC)
2025-07-12 21:59:45 - sql_agent_modular - INFO - 查询 '板块主力资金' 未指定日期，使用最新交易日
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 银行板块的机构资金
2025-07-12 21:59:45 - query_validator - INFO - 拒绝查询 - 非标准术语: 机构资金
2025-07-12 21:59:45 - error_handler - ERROR - [NON_STANDARD_TERM] 请使用标准术语"主力资金"替代"机构资金"
2025-07-12 21:59:45 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.11 板块主力资金-错误用例
测试名称: 非标准术语
查询: 新能源板块的大资金
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 新能源板块的大资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 新能源板块的大资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 新能源板块的大资金
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 板块主力资金
2025-07-12 21:59:45 - unified_sector_validator - INFO - 提取到板块: 新能源板块 (得分: 10)
2025-07-12 21:59:45 - unified_sector_validator - INFO - 板块代码映射: 新能源 -> BK0493.DC
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到板块: 新能源板块 (BK0493.DC)
2025-07-12 21:59:45 - sql_agent_modular - INFO - 查询 '板块主力资金' 未指定日期，使用最新交易日
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 新能源板块的大资金
2025-07-12 21:59:45 - query_validator - INFO - 拒绝查询 - 非标准术语: 大资金
2025-07-12 21:59:45 - error_handler - ERROR - [NON_STANDARD_TERM] 请使用标准术语"主力资金"替代"大资金"
2025-07-12 21:59:45 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.12 利润查询
测试名称: 贵州茅台利润
查询: 贵州茅台的利润
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台的利润
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台的利润
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台的利润
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 利润查询
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 利润
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台的利润
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.12 利润查询
测试名称: 贵州茅台净利润
查询: 贵州茅台的净利润
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台的净利润
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台的净利润
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台的净利润
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 利润查询
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台的净利润
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.12 利润查询
测试名称: 万科A营收
查询: 万科A的营收
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 万科A的营收
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 万科A的营收
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 万科A的营收
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 利润查询
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票名称 '万科A'，转换为: 000002.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 000002.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 000002.SZ, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 营收
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 000002.SZ -> 000002.SZ (万科A)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 万科A的营收
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.12 利润查询
测试名称: 中国平安营业收入
查询: 中国平安的营业收入
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 中国平安的营业收入
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 中国平安的营业收入
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 中国平安的营业收入
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 利润查询
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票名称 '中国平安'，转换为: 601318.SH
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 601318.SH
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 601318.SH, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 营业收入
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 601318.SH -> 601318.SH (中国平安)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 中国平安的营业收入
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.12 利润查询
测试名称: 宁德时代净利润
查询: 宁德时代的净利润
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 宁德时代的净利润
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 宁德时代的净利润
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 宁德时代的净利润
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 利润查询
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询词 '宁德时代' 转换为: 300750.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 300750.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 300750.SZ, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 300750.SZ -> 300750.SZ (宁德时代)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['300750.SZ']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['300750.SZ']
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 宁德时代的净利润
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.12 利润查询-时间指定
测试名称: 2024年净利润
查询: 贵州茅台2024年的净利润
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 贵州茅台2024年的净利润
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 贵州茅台2024年的净利润
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 贵州茅台2024年的净利润
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 利润查询
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询词 '贵州茅台' 转换为: 600519.SH
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 600519.SH
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 600519.SH, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 净利润
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 600519.SH -> 600519.SH (贵州茅台)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['600519.SH']
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 贵州茅台2024年的净利润
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.12 利润查询-时间指定
测试名称: 最新营收
查询: 万科A最新的营收
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 万科A最新的营收
2025-07-12 21:59:45 - date_intelligence - INFO - 日期智能解析: '万科A最新的营收' -> '万科A2025-07-11的营收'
2025-07-12 21:59:45 - date_intelligence - INFO - 解析详情: 将'最新'解析为当前时间点: 2025-07-11
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 万科A2025-07-11的营收
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 万科A2025-07-11的营收
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 利润查询
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票名称 '万科A'，转换为: 000002.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 000002.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 000002.SZ, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 000002.SZ -> 000002.SZ (万科A)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000002.SZ']
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 万科A2025-07-11的营收
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:45 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.12 利润查询-时间指定
测试名称: 2024Q3利润
查询: 平安银行2024Q3的利润
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:45 - sql_agent_modular - INFO - 收到查询请求: 平安银行2024Q3的利润
2025-07-12 21:59:45 - sql_agent_modular - INFO - 日期智能处理后的查询: 平安银行2024Q3的利润
2025-07-12 21:59:45 - sql_agent_modular - INFO - 中文数字规范化后: 平安银行2024Q3的利润
2025-07-12 21:59:45 - sql_agent_modular - INFO - 匹配到快速查询模板: 利润查询
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票名称 '平安银行'，转换为: 000001.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 从查询中提取到股票: 000001.SZ
2025-07-12 21:59:45 - unified_stock_validator - INFO - 成功提取股票代码: 000001.SZ, 查询意图: comprehensive
2025-07-12 21:59:45 - stock_validation_helper - INFO - 股票验证成功: 000001.SZ -> 000001.SZ (平安银行)
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到股票: ['000001.SZ']
2025-07-12 21:59:45 - parameter_extractor - INFO - 提取到报告期: 20240930
2025-07-12 21:59:45 - query_validator - INFO - 执行增强验证 - 查询: 平安银行2024Q3的利润
2025-07-12 21:59:45 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:46 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.12 利润查询-时间指定
测试名称: 2024第三季度营收
查询: 宁德时代2024年第三季度的营业收入
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:46 - sql_agent_modular - INFO - 收到查询请求: 宁德时代2024年第三季度的营业收入
2025-07-12 21:59:46 - sql_agent_modular - INFO - 日期智能处理后的查询: 宁德时代2024年第三季度的营业收入
2025-07-12 21:59:46 - sql_agent_modular - INFO - 中文数字规范化后: 宁德时代2024年第3季度的营业收入
2025-07-12 21:59:46 - sql_agent_modular - INFO - 匹配到快速查询模板: 利润查询
2025-07-12 21:59:46 - unified_stock_validator - INFO - 从查询词 '宁德时代' 转换为: 300750.SZ
2025-07-12 21:59:46 - unified_stock_validator - INFO - 从查询中提取到股票: 300750.SZ
2025-07-12 21:59:46 - unified_stock_validator - INFO - 成功提取股票代码: 300750.SZ, 查询意图: comprehensive
2025-07-12 21:59:46 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 营业
2025-07-12 21:59:46 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 收入
2025-07-12 21:59:46 - stock_validation_helper - INFO - 股票验证成功: 300750.SZ -> 300750.SZ (宁德时代)
2025-07-12 21:59:46 - parameter_extractor - INFO - 提取到股票: ['300750.SZ']
2025-07-12 21:59:46 - parameter_extractor - INFO - 提取到股票: ['300750.SZ']
2025-07-12 21:59:46 - query_validator - INFO - 执行增强验证 - 查询: 宁德时代2024年第3季度的营业收入
2025-07-12 21:59:46 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:46 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.12 利润查询-其他表达
测试名称: 赚钱表达-简称错误
查询: 茅台赚了多少钱
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:46 - sql_agent_modular - INFO - 收到查询请求: 茅台赚了多少钱
2025-07-12 21:59:46 - sql_agent_modular - INFO - 日期智能处理后的查询: 茅台赚了多少钱
2025-07-12 21:59:46 - sql_agent_modular - INFO - 中文数字规范化后: 茅台赚了多少钱
2025-07-12 21:59:46 - sql_agent_modular - INFO - 匹配到快速查询模板: 利润查询
2025-07-12 21:59:46 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 台赚了多少钱
2025-07-12 21:59:46 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 茅台赚了多少钱
2025-07-12 21:59:46 - parameter_extractor - WARNING - 股票验证失败: 无法识别输入内容。请输入：1) 6位股票代码（如002047）2) 证券代码（如600519.SH）3) 股票名称（如贵州茅台）
2025-07-12 21:59:46 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:46 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.12 利润查询-其他表达
测试名称: 盈利情况-简称错误
查询: 万科盈利情况
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:46 - sql_agent_modular - INFO - 收到查询请求: 万科盈利情况
2025-07-12 21:59:46 - sql_agent_modular - INFO - 日期智能处理后的查询: 万科盈利情况
2025-07-12 21:59:46 - sql_agent_modular - INFO - 中文数字规范化后: 万科盈利情况
2025-07-12 21:59:46 - sql_agent_modular - INFO - 匹配到快速查询模板: 利润查询
2025-07-12 21:59:46 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 万科盈利情况
2025-07-12 21:59:46 - parameter_extractor - WARNING - 股票验证失败: 无法识别输入内容。请输入：1) 6位股票代码（如002047）2) 证券代码（如600519.SH）3) 股票名称（如贵州茅台）
2025-07-12 21:59:46 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:46 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.12 利润查询-其他表达
测试名称: 收入表达-正常
查询: 中国平安收入是多少
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:46 - sql_agent_modular - INFO - 收到查询请求: 中国平安收入是多少
2025-07-12 21:59:46 - sql_agent_modular - INFO - 日期智能处理后的查询: 中国平安收入是多少
2025-07-12 21:59:46 - sql_agent_modular - INFO - 中文数字规范化后: 中国平安收入是多少
2025-07-12 21:59:46 - sql_agent_modular - INFO - 匹配到快速查询模板: 利润查询
2025-07-12 21:59:46 - unified_stock_validator - INFO - 从查询中提取到股票名称 '中国平安'，转换为: 601318.SH
2025-07-12 21:59:46 - unified_stock_validator - INFO - 从查询中提取到股票: 601318.SH
2025-07-12 21:59:46 - unified_stock_validator - INFO - 成功提取股票代码: 601318.SH, 查询意图: comprehensive
2025-07-12 21:59:46 - stock_code_mapper - WARNING - 无法转换实体到ts_code: 收入是多少
2025-07-12 21:59:46 - stock_validation_helper - INFO - 股票验证成功: 601318.SH -> 601318.SH (中国平安)
2025-07-12 21:59:46 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:46 - parameter_extractor - INFO - 提取到股票: ['601318.SH']
2025-07-12 21:59:46 - query_validator - INFO - 执行增强验证 - 查询: 中国平安收入是多少
2025-07-12 21:59:46 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:46 - sql_agent_modular - INFO - 使用快速查询路径成功
实际: 成功
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.12 利润查询-错误用例
测试名称: 股票简称错误
查询: 茅台的利润
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:46 - sql_agent_modular - INFO - 收到查询请求: 茅台的利润
2025-07-12 21:59:46 - sql_agent_modular - INFO - 日期智能处理后的查询: 茅台的利润
2025-07-12 21:59:46 - sql_agent_modular - INFO - 中文数字规范化后: 茅台的利润
2025-07-12 21:59:46 - sql_agent_modular - INFO - 匹配到快速查询模板: 利润查询
2025-07-12 21:59:46 - parameter_extractor - WARNING - 股票验证失败: 无法识别输入内容。请输入：1) 6位股票代码（如002047）2) 证券代码（如600519.SH）3) 股票名称（如贵州茅台）
2025-07-12 21:59:46 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:46 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.12 利润查询-错误用例
测试名称: 歧义股票名称
查询: 平安的营收
预期: 失败
------------------------------------------------------------
2025-07-12 21:59:46 - sql_agent_modular - INFO - 收到查询请求: 平安的营收
2025-07-12 21:59:46 - sql_agent_modular - INFO - 日期智能处理后的查询: 平安的营收
2025-07-12 21:59:46 - sql_agent_modular - INFO - 中文数字规范化后: 平安的营收
2025-07-12 21:59:46 - sql_agent_modular - INFO - 匹配到快速查询模板: 利润查询
2025-07-12 21:59:46 - parameter_extractor - WARNING - 股票验证失败: 无法识别输入内容。请输入：1) 6位股票代码（如002047）2) 证券代码（如600519.SH）3) 股票名称（如贵州茅台）
2025-07-12 21:59:46 - error_handler - INFO - [INVALID_STOCK] 无法识别输入内容
2025-07-12 21:59:46 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.13 PE排名
测试名称: PE最高前10
查询: PE最高的前10
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:46 - sql_agent_modular - INFO - 收到查询请求: PE最高的前10
2025-07-12 21:59:46 - sql_agent_modular - INFO - 日期智能处理后的查询: PE最高的前10
2025-07-12 21:59:46 - sql_agent_modular - INFO - 中文数字规范化后: PE最高的前10
2025-07-12 21:59:46 - sql_agent_modular - INFO - 匹配到快速查询模板: PE排名
2025-07-12 21:59:46 - query_validator - INFO - 执行增强验证 - 查询: PE最高的前10
2025-07-12 21:59:46 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:47 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的PE数据
2025-07-12 21:59:47 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.13 PE排名
测试名称: 市盈率前20
查询: 市盈率排名前20
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:47 - sql_agent_modular - INFO - 收到查询请求: 市盈率排名前20
2025-07-12 21:59:47 - sql_agent_modular - INFO - 日期智能处理后的查询: 市盈率排名前20
2025-07-12 21:59:47 - sql_agent_modular - INFO - 中文数字规范化后: 市盈率排名前20
2025-07-12 21:59:47 - sql_agent_modular - INFO - 匹配到快速查询模板: PE排名
2025-07-12 21:59:47 - query_validator - INFO - 执行增强验证 - 查询: 市盈率排名前20
2025-07-12 21:59:47 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:48 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的PE数据
2025-07-12 21:59:48 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.13 PE排名
测试名称: PE最低前10
查询: PE最低的前10
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:48 - sql_agent_modular - INFO - 收到查询请求: PE最低的前10
2025-07-12 21:59:48 - sql_agent_modular - INFO - 日期智能处理后的查询: PE最低的前10
2025-07-12 21:59:48 - sql_agent_modular - INFO - 中文数字规范化后: PE最低的前10
2025-07-12 21:59:48 - sql_agent_modular - INFO - 匹配到快速查询模板: PE排名
2025-07-12 21:59:48 - query_validator - INFO - 执行增强验证 - 查询: PE最低的前10
2025-07-12 21:59:48 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:50 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的PE数据
2025-07-12 21:59:50 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.13 PE排名
测试名称: 市盈率最高前5
查询: 市盈率最高的前5
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:50 - sql_agent_modular - INFO - 收到查询请求: 市盈率最高的前5
2025-07-12 21:59:50 - sql_agent_modular - INFO - 日期智能处理后的查询: 市盈率最高的前5
2025-07-12 21:59:50 - sql_agent_modular - INFO - 中文数字规范化后: 市盈率最高的前5
2025-07-12 21:59:50 - sql_agent_modular - INFO - 匹配到快速查询模板: PE排名
2025-07-12 21:59:50 - query_validator - INFO - 执行增强验证 - 查询: 市盈率最高的前5
2025-07-12 21:59:50 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:51 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的PE数据
2025-07-12 21:59:51 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.13 PE排名-默认前10
测试名称: PE默认排名
查询: PE排名
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:51 - sql_agent_modular - INFO - 收到查询请求: PE排名
2025-07-12 21:59:51 - sql_agent_modular - INFO - 日期智能处理后的查询: PE排名
2025-07-12 21:59:51 - sql_agent_modular - INFO - 中文数字规范化后: PE排名
2025-07-12 21:59:51 - sql_agent_modular - INFO - 匹配到快速查询模板: PE排名
2025-07-12 21:59:51 - query_validator - INFO - 执行增强验证 - 查询: PE排名
2025-07-12 21:59:51 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:53 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的PE数据
2025-07-12 21:59:53 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.13 PE排名-默认前10
测试名称: 市盈率默认排名
查询: 市盈率排名
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:53 - sql_agent_modular - INFO - 收到查询请求: 市盈率排名
2025-07-12 21:59:53 - sql_agent_modular - INFO - 日期智能处理后的查询: 市盈率排名
2025-07-12 21:59:53 - sql_agent_modular - INFO - 中文数字规范化后: 市盈率排名
2025-07-12 21:59:53 - sql_agent_modular - INFO - 匹配到快速查询模板: PE排名
2025-07-12 21:59:53 - query_validator - INFO - 执行增强验证 - 查询: 市盈率排名
2025-07-12 21:59:53 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:54 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的PE数据
2025-07-12 21:59:54 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

============================================================
测试类别: 1.13 PE排名-默认前10
测试名称: PE默认排行
查询: PE排行
预期: 成功
------------------------------------------------------------
2025-07-12 21:59:54 - sql_agent_modular - INFO - 收到查询请求: PE排行
2025-07-12 21:59:54 - sql_agent_modular - INFO - 日期智能处理后的查询: PE排行
2025-07-12 21:59:54 - sql_agent_modular - INFO - 中文数字规范化后: PE排行
2025-07-12 21:59:54 - sql_agent_modular - INFO - 匹配到快速查询模板: PE排名
2025-07-12 21:59:54 - query_validator - INFO - 执行增强验证 - 查询: PE排行
2025-07-12 21:59:54 - query_validator - INFO - 增强验证通过
2025-07-12 21:59:56 - error_handler - ERROR - [QUERY_ERROR] 未找到20250711的PE数据
2025-07-12 21:59:56 - sql_agent_modular - INFO - 快速查询路径返回错误，不降级到LLM
实际: 失败
异常: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

================================================================================
测试报告
================================================================================
总测试数: 328
通过: 138
失败: 190
通过率: 42.1%

================================================================================
失败测试详情
================================================================================

类别: 1.1 股价查询
测试: 基础查询-最新
查询: 贵州茅台最新股价
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.1 股价查询
测试: 指定日期
查询: 贵州茅台20250627的股价
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.1 股价查询
测试: 相对日期-昨天
查询: 平安银行昨天的股价
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.1 股价查询
测试: 股票代码查询
查询: 600519.SH最新股价
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.1 股价查询
测试: 日期格式变体
查询: 贵州茅台2025-06-27的股价
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.1 股价查询
测试: 深市股票代码
查询: 000001.SZ的股价
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.1 股价查询-边界测试
测试: 中文日期格式
查询: 贵州茅台2025年06月27日的股价
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.1 股价查询-边界测试
测试: 无后缀股票代码
查询: 600519最新股价
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.1 股价查询-边界测试
测试: 相对日期-前天
查询: 贵州茅台前天的股价
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.1 股价查询-边界测试
测试: 相对日期-上个交易日
查询: 贵州茅台上个交易日的股价
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.1 股价查询-错误用例
测试: 股票简称错误
查询: 茅台最新股价
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.1 股价查询-错误用例
测试: 歧义股票名称
查询: 平安最新股价
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.1 股价查询-错误用例
测试: 不存在的股票代码
查询: 123456最新股价
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.1 股价查询-错误用例
测试: 无效日期
查询: 贵州茅台2025-06-31的股价
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.1 股价查询-错误用例
测试: 小写后缀错误
查询: 600519.sh最新股价
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.1 股价查询-错误用例
测试: 空字符串查询
查询: 
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.2 成交量查询
测试: 成交量-昨天
查询: 平安银行昨天的成交量
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.2 成交量查询
测试: 成交量-最新
查询: 贵州茅台最新成交量
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.2 成交量查询
测试: 成交量-默认
查询: 万科A的成交量
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.2 成交量查询
测试: 成交量-今天
查询: 600519.SH今天的成交量
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.2 成交量查询
测试: 成交额-默认
查询: 中国平安的成交额
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.2 成交量查询
测试: 成交额-昨天
查询: 宁德时代昨天的成交额
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.2 成交量查询
测试: 成交额-最新
查询: 比亚迪最新成交额
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.2 成交量查询
测试: 成交额-股票代码
查询: 000001.SZ的成交额
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.2 成交量查询-边界测试
测试: 股票名称清理测试
查询: 万科A前天的成交量
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.2 成交量查询-边界测试
测试: 日期替换不影响股票提取
查询: 中国平安昨天的成交额
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.2 成交量查询-边界测试
测试: 日期替换后的股票提取
查询: 贵州茅台最近5天的成交量
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.2 成交量查询-边界测试
测试: 今天替换测试
查询: 宁德时代今天的成交额
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.2 成交量查询-边界测试
测试: 上个交易日
查询: 比亚迪上个交易日的成交量
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.2 成交量查询-错误用例
测试: 股票简称错误
查询: 茅台的成交量
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.2 成交量查询-错误用例
测试: 不存在的股票
查询: 不存在股票的成交量
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.2 成交量查询-错误用例
测试: 未来日期
查询: 贵州茅台2099年的成交量
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.3 估值指标查询
测试: 市盈率查询
查询: 中国平安的市盈率
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.3 估值指标查询
测试: PE查询
查询: 贵州茅台的PE
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.3 估值指标查询
测试: 市净率查询
查询: 平安银行的市净率
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.3 估值指标查询
测试: PB查询
查询: 比亚迪的PB
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询
测试: 最近N天
查询: 中国平安最近10天的K线
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询
测试: 日期范围
查询: 宁德时代从2025/06/01到2025/06/30的K线
错误: 无法识别输入内容。请输入：1) 6位股票代码（如002047）2) 证券代码（如600519.SH）3) 股票名称（如贵州茅台）

类别: 1.4 K线查询
测试: 日期范围
查询: 宁德时代从2025/06/01到2025/06/30的K线
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.4 K线查询
测试: 中文日期
查询: 宁德时代从6月1日到6月30日的K线
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询
测试: 走势查询
查询: 贵州茅台最近30天的走势
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询
测试: 无时间范围-默认90天
查询: 贵州茅台的K线
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询-边界测试
测试: 至连接符
查询: 贵州茅台2025-06-01至2025-06-30的K线
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询-边界测试
测试: 到连接符
查询: 万科A2025-06-01到2025-06-30的K线
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询-边界测试
测试: -连接符
查询: 中国平安2025-06-01-2025-06-30的K线
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询-边界测试
测试: ~连接符
查询: 比亚迪2025/6/1~2025/6/30的K线
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询-边界测试
测试: 月份转换
查询: 万科A6月的K线
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询-边界测试
测试: 年份转换
查询: 中国平安2024年的K线
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询-边界测试
测试: 季度转换
查询: 宁德时代2025年第二季度的走势
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询-边界测试
测试: 相对月份
查询: 贵州茅台本月的K线
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询-边界测试
测试: 上个月
查询: 平安银行上个月的K线
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询-边界测试
测试: 去年
查询: 比亚迪去年的K线
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询-边界测试
测试: 中文数字-二十
查询: 贵州茅台最近二十天的K线
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询-边界测试
测试: 中文数字-十
查询: 中国平安前十天的走势
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询-边界测试
测试: 中文数字-一百
查询: 万科A最近一百天的K线
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询-错误用例
测试: 无股票名称
查询: K线
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询-错误用例
测试: 股票简称
查询: 茅台的K线
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询-错误用例
测试: 不存在的股票
查询: 不存在股票的K线
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询-错误用例
测试: 无效月份
查询: 贵州茅台13月的K线
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.4 K线查询-错误用例
测试: 无效季度
查询: 中国平安2025年第五季度的K线
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.5 涨跌幅排名
测试: 涨幅前10
查询: 今天涨幅最大的前10只股票
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.5 涨跌幅排名
测试: 跌幅前10
查询: 今日跌幅最大的前10只股票
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.5 涨跌幅排名
测试: 指定日期涨幅
查询: 20250627涨幅前10
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.5 涨跌幅排名
测试: 默认涨幅排名
查询: 涨幅排名
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.5 涨跌幅排名
测试: 跌幅最大
查询: 跌幅最大的股票
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.5 涨跌幅排名-边界测试
测试: 中文数字-二十
查询: 涨幅前二十
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.5 涨跌幅排名-边界测试
测试: 中文数字-五
查询: 跌幅最大的前五只股票
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.5 涨跌幅排名-边界测试
测试: 中文数字-一百
查询: 涨幅前一百名
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.5 涨跌幅排名-边界测试
测试: 昨天涨幅
查询: 昨天涨幅排名
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.5 涨跌幅排名-边界测试
测试: 指定日期跌幅
查询: 2025-06-27跌幅排名
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.5 涨跌幅排名-边界测试
测试: 上个交易日
查询: 上个交易日涨幅前10
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.5 涨跌幅排名-错误用例
测试: 个股涨幅排名
查询: 贵州茅台涨幅排名
错误: None

类别: 1.5 涨跌幅排名-错误用例
测试: 个股涨幅排名
查询: 贵州茅台涨幅排名
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.5 涨跌幅排名-错误用例
测试: 无效数量-0
查询: 涨幅前0只股票
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.5 涨跌幅排名-错误用例
测试: 数量过大
查询: 涨幅前1000只股票
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.6 市值排名
测试: 总市值前20
查询: 总市值最大的前20只股票
错误: 未找到20250711的市值数据

类别: 1.6 市值排名
测试: 总市值前20
查询: 总市值最大的前20只股票
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.6 市值排名
测试: 流通市值前10
查询: 流通市值最大的前10只股票
错误: 未找到20250711的流通市值数据

类别: 1.6 市值排名
测试: 流通市值前10
查询: 流通市值最大的前10只股票
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.6 市值排名
测试: 市值前50
查询: 市值排名前50
错误: 未找到20250711的市值数据

类别: 1.6 市值排名
测试: 市值前50
查询: 市值排名前50
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.6 市值排名
测试: 市值前20名
查询: 市值前20名
错误: 未找到20250711的市值数据

类别: 1.6 市值排名
测试: 市值前20名
查询: 市值前20名
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.6 市值排名-默认前10
测试: 总市值默认
查询: 总市值排名
错误: 未找到20250711的市值数据

类别: 1.6 市值排名-默认前10
测试: 总市值默认
查询: 总市值排名
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.6 市值排名-默认前10
测试: 市值默认
查询: 市值排名
错误: 未找到20250711的市值数据

类别: 1.6 市值排名-默认前10
测试: 市值默认
查询: 市值排名
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.6 市值排名-默认前10
测试: 流通市值默认
查询: 流通市值排名
错误: 未找到20250711的流通市值数据

类别: 1.6 市值排名-默认前10
测试: 流通市值默认
查询: 流通市值排名
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.6 市值排名-默认前10
测试: 市值排行默认
查询: 市值排行
错误: 未找到20250711的市值数据

类别: 1.6 市值排名-默认前10
测试: 市值排行默认
查询: 市值排行
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.6 市值排名-TOP格式
测试: TOP10格式
查询: 市值TOP10
错误: 未找到20250711的市值数据

类别: 1.6 市值排名-TOP格式
测试: TOP10格式
查询: 市值TOP10
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.6 市值排名-TOP格式
测试: 总市值TOP20
查询: 总市值TOP20
错误: 未找到20250711的市值数据

类别: 1.6 市值排名-TOP格式
测试: 总市值TOP20
查询: 总市值TOP20
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.6 市值排名-TOP格式
测试: 流通市值TOP5
查询: 流通市值TOP5
错误: 未找到20250711的流通市值数据

类别: 1.6 市值排名-TOP格式
测试: 流通市值TOP5
查询: 流通市值TOP5
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.6 市值排名-TOP格式
测试: A股市值TOP15
查询: A股市值TOP15
错误: 未找到20250711的市值数据

类别: 1.6 市值排名-TOP格式
测试: A股市值TOP15
查询: A股市值TOP15
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.6 市值排名-时间指定
测试: 今天市值
查询: 今天的市值排名
错误: 未找到20250711的市值数据

类别: 1.6 市值排名-时间指定
测试: 今天市值
查询: 今天的市值排名
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.6 市值排名-时间指定
测试: 最新市值
查询: 最新市值排名
错误: 未找到20250711的市值数据

类别: 1.6 市值排名-时间指定
测试: 最新市值
查询: 最新市值排名
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.6 市值排名-时间指定
测试: 昨天流通市值
查询: 昨天流通市值排名
错误: 未找到20250711的流通市值数据

类别: 1.6 市值排名-时间指定
测试: 昨天流通市值
查询: 昨天流通市值排名
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.6 市值排名-时间指定
测试: 指定日期市值
查询: 2025-07-01市值排名
错误: 未找到20250711的市值数据

类别: 1.6 市值排名-时间指定
测试: 指定日期市值
查询: 2025-07-01市值排名
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.7 成交额排名
测试: 成交额前10
查询: 成交额最大的前10只股票
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.7 成交额排名
测试: 成交额前20
查询: 成交额排名前20
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.7 成交额排名
测试: 成交额前15
查询: 成交额前15
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.7 成交额排名
测试: 昨天成交额前15
查询: 昨天成交额最大的前15只股票
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.7 成交额排名-默认前10
测试: 成交额默认
查询: 成交额排名
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.7 成交额排名-默认前10
测试: 成交额排行默认
查询: 成交额排行
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.7 成交额排名-默认前10
测试: A股成交额默认
查询: A股成交额排名
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.7 成交额排名-TOP格式
测试: 成交额TOP10
查询: 成交额TOP10
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.7 成交额排名-TOP格式
测试: 成交额TOP20
查询: 成交额TOP20
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.7 成交额排名-TOP格式
测试: 成交额TOP5
查询: 成交额TOP5
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.8 成交量排名
测试: 成交量前10
查询: 成交量最大的前10只股票
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.8 成交量排名
测试: 成交量前20
查询: 成交量排名前20
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.8 成交量排名
测试: 成交量前15
查询: 成交量前15
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.8 成交量排名
测试: 昨天成交量前15
查询: 昨天成交量最大的前15只股票
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.8 成交量排名-区分测试
测试: 个股成交量查询
查询: 贵州茅台的成交量
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.8 成交量排名-区分测试
测试: 成交量排名查询
查询: 成交量排名
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.8 成交量排名-区分测试
测试: 个股成交量
查询: 平安银行成交量
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.8 成交量排名-区分测试
测试: 成交量TOP排名
查询: 成交量TOP10
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.9 主力资金排名
测试: 主力流入前10
查询: 主力净流入最多的前10只股票
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.9 主力资金排名
测试: 主力流出前10
查询: 主力净流出最多的前10只股票
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.9 主力资金排名
测试: 主力流入前20
查询: 主力净流入排名前20
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.9 主力资金排名
测试: 主力流出前15
查询: 主力净流出排名前15
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.9 主力资金排名-默认前10
测试: 主力流入默认
查询: 主力净流入排名
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.9 主力资金排名-默认前10
测试: 主力流入排行默认
查询: 主力净流入排行
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.9 主力资金排名-默认前10
测试: 主力流出默认
查询: 主力净流出排名
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.9 主力资金排名-默认前10
测试: 主力流出排行默认
查询: 主力净流出排行
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.9 主力资金排名-错误用例
测试: 非标准术语-机构
查询: 机构资金流入排名
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.9 主力资金排名-错误用例
测试: 非标准术语-大资金
查询: 大资金流入排行
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.10 个股主力资金
测试: 贵州茅台主力
查询: 贵州茅台的主力资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.10 个股主力资金
测试: 平安银行主力
查询: 平安银行的主力资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.10 个股主力资金
测试: 股票代码主力
查询: 600519.SH的主力资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.10 个股主力资金
测试: 比亚迪主力
查询: 比亚迪的主力资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.10 个股主力资金
测试: 万科A主力
查询: 万科A的主力资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.10 个股主力资金-时间指定
测试: 昨天主力
查询: 贵州茅台昨天的主力资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.10 个股主力资金-时间指定
测试: 指定日期主力
查询: 平安银行2025-07-01的主力资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.10 个股主力资金-时间指定
测试: 今天主力
查询: 万科A今天的主力资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.10 个股主力资金-错误用例
测试: 非标准术语-机构
查询: 贵州茅台的机构资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.10 个股主力资金-错误用例
测试: 非标准术语-大资金
查询: 平安银行的大资金流入
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.10 个股主力资金-错误用例
测试: 不支持的资金类型
查询: 万科A的游资
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.10 个股主力资金-错误用例
测试: 股票简称错误
查询: 茅台的主力资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.10 个股主力资金-错误用例
测试: 歧义股票名称
查询: 平安的主力资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.11 板块主力资金
测试: 银行板块
查询: 银行板块的主力资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.11 板块主力资金
测试: 新能源板块
查询: 新能源板块的主力资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.11 板块主力资金
测试: 白酒板块
查询: 白酒板块的主力资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.11 板块主力资金
测试: 房地产板块
查询: 房地产板块的主力资金
错误: 未找到房地产在20250711的主力资金数据

类别: 1.11 板块主力资金
测试: 房地产板块
查询: 房地产板块的主力资金
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.11 板块主力资金
测试: 证券板块
查询: 证券板块的主力资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.11 板块主力资金-时间指定
测试: 银行板块昨天
查询: 银行板块昨天的主力资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.11 板块主力资金-时间指定
测试: 新能源板块指定日期
查询: 新能源板块2025-07-01的主力资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.11 板块主力资金-时间指定
测试: 白酒板块今天
查询: 白酒板块今天的主力资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.11 板块主力资金-错误用例
测试: 缺少板块后缀
查询: 银行的主力资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.11 板块主力资金-错误用例
测试: 缺少板块后缀
查询: 新能源主力资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.11 板块主力资金-错误用例
测试: 缺少板块后缀
查询: 白酒主力净流入
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.11 板块主力资金-错误用例
测试: 非标准术语
查询: 银行板块的机构资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.11 板块主力资金-错误用例
测试: 非标准术语
查询: 新能源板块的大资金
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.12 利润查询
测试: 贵州茅台利润
查询: 贵州茅台的利润
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.12 利润查询
测试: 贵州茅台净利润
查询: 贵州茅台的净利润
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.12 利润查询
测试: 万科A营收
查询: 万科A的营收
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.12 利润查询
测试: 中国平安营业收入
查询: 中国平安的营业收入
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.12 利润查询
测试: 宁德时代净利润
查询: 宁德时代的净利润
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.12 利润查询-时间指定
测试: 2024年净利润
查询: 贵州茅台2024年的净利润
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.12 利润查询-时间指定
测试: 最新营收
查询: 万科A最新的营收
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.12 利润查询-时间指定
测试: 2024Q3利润
查询: 平安银行2024Q3的利润
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.12 利润查询-时间指定
测试: 2024第三季度营收
查询: 宁德时代2024年第三季度的营业收入
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.12 利润查询-其他表达
测试: 赚钱表达-简称错误
查询: 茅台赚了多少钱
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.12 利润查询-其他表达
测试: 盈利情况-简称错误
查询: 万科盈利情况
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.12 利润查询-其他表达
测试: 收入表达-正常
查询: 中国平安收入是多少
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.12 利润查询-错误用例
测试: 股票简称错误
查询: 茅台的利润
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.12 利润查询-错误用例
测试: 歧义股票名称
查询: 平安的营收
错误: Exception: 'gbk' codec can't encode character '\u2705' in position 4: illegal multibyte sequence

类别: 1.13 PE排名
测试: PE最高前10
查询: PE最高的前10
错误: 未找到20250711的PE数据

类别: 1.13 PE排名
测试: PE最高前10
查询: PE最高的前10
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.13 PE排名
测试: 市盈率前20
查询: 市盈率排名前20
错误: 未找到20250711的PE数据

类别: 1.13 PE排名
测试: 市盈率前20
查询: 市盈率排名前20
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.13 PE排名
测试: PE最低前10
查询: PE最低的前10
错误: 未找到20250711的PE数据

类别: 1.13 PE排名
测试: PE最低前10
查询: PE最低的前10
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.13 PE排名
测试: 市盈率最高前5
查询: 市盈率最高的前5
错误: 未找到20250711的PE数据

类别: 1.13 PE排名
测试: 市盈率最高前5
查询: 市盈率最高的前5
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.13 PE排名-默认前10
测试: PE默认排名
查询: PE排名
错误: 未找到20250711的PE数据

类别: 1.13 PE排名-默认前10
测试: PE默认排名
查询: PE排名
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.13 PE排名-默认前10
测试: 市盈率默认排名
查询: 市盈率排名
错误: 未找到20250711的PE数据

类别: 1.13 PE排名-默认前10
测试: 市盈率默认排名
查询: 市盈率排名
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

类别: 1.13 PE排名-默认前10
测试: PE默认排行
查询: PE排行
错误: 未找到20250711的PE数据

类别: 1.13 PE排名-默认前10
测试: PE默认排行
查询: PE排行
错误: Exception: 'gbk' codec can't encode character '\u274c' in position 4: illegal multibyte sequence

详细报告已保存至: test_report_20250712_215956.json

================================================================================
分类统计
================================================================================
1.1 股价查询: 6/12 (50.0%)
1.1 股价查询-边界测试: 4/8 (50.0%)
1.1 股价查询-错误用例: 6/12 (50.0%)
1.10 个股主力资金: 5/10 (50.0%)
1.10 个股主力资金-时间指定: 3/6 (50.0%)
1.10 个股主力资金-错误用例: 5/10 (50.0%)
1.11 板块主力资金: 4/10 (40.0%)
1.11 板块主力资金-时间指定: 3/6 (50.0%)
1.11 板块主力资金-错误用例: 5/10 (50.0%)
1.12 利润查询: 5/10 (50.0%)
1.12 利润查询-其他表达: 3/6 (50.0%)
1.12 利润查询-时间指定: 4/8 (50.0%)
1.12 利润查询-错误用例: 2/4 (50.0%)
1.13 PE排名: 0/8 (0.0%)
1.13 PE排名-默认前10: 0/6 (0.0%)
1.2 成交量查询: 8/16 (50.0%)
1.2 成交量查询-边界测试: 5/10 (50.0%)
1.2 成交量查询-错误用例: 3/6 (50.0%)
1.3 估值指标查询: 4/8 (50.0%)
1.4 K线查询: 4/10 (40.0%)
1.4 K线查询-边界测试: 13/26 (50.0%)
1.4 K线查询-错误用例: 5/10 (50.0%)
1.5 涨跌幅排名: 5/10 (50.0%)
1.5 涨跌幅排名-边界测试: 6/12 (50.0%)
1.5 涨跌幅排名-错误用例: 2/6 (33.3%)
1.6 市值排名: 0/8 (0.0%)
1.6 市值排名-TOP格式: 0/8 (0.0%)
1.6 市值排名-时间指定: 0/8 (0.0%)
1.6 市值排名-默认前10: 0/8 (0.0%)
1.7 成交额排名: 4/8 (50.0%)
1.7 成交额排名-TOP格式: 3/6 (50.0%)
1.7 成交额排名-默认前10: 3/6 (50.0%)
1.8 成交量排名: 4/8 (50.0%)
1.8 成交量排名-区分测试: 4/8 (50.0%)
1.9 主力资金排名: 4/8 (50.0%)
1.9 主力资金排名-错误用例: 2/4 (50.0%)
1.9 主力资金排名-默认前10: 4/8 (50.0%)
