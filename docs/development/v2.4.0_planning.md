# v2.4.0 开发计划 - 四大新Agent

发布时间规划：2025年10月  
开发周期：3个月

## 🎯 版本目标

在v2.3.0 Agent Excellence的基础上，新增4个专业Agent，形成完整的9-Agent架构体系。

## 📊 新Agent开发计划

### 1. Concept Agent - 概念股分析专家

**优先级**：⭐⭐⭐⭐⭐（最高）

**功能设计**：
- **核心功能**：基于事实依据的概念股发现和分析
- **主要特性**：
  - 概念识别：精确匹配 + 模糊匹配
  - 多源验证：软件收录、财报、互动平台、公告
  - 关联度评分：多维度证据支持
  - 技术筛选：资金流向 + 技术指标
- **数据来源**：
  - 概念板块数据（东财/同花顺）
  - 成分股列表（每日更新）
  - 互动平台数据
  - 公告RAG数据库

**实施方案**：
- Phase 1：等待数据库表创建（外部项目）
- Phase 2：实现概念匹配和股票发现
- Phase 3：实现多维度关联分析
- Phase 4：集成技术指标筛选

**查询示例**：
```
"概念股分析：充电宝相关的概念板块和概念股有哪些"
"概念股分析：半导体概念股哪些符合主力流入且MACD金叉"
"概念股分析：新能源汽车概念的龙头股分析"
"概念股分析：人工智能概念股的关联度排名"
```

### 2. Rank Agent - 专业排名分析

**优先级**：⭐⭐⭐⭐

**功能设计**：
- **核心功能**：深度排名分析、趋势预测、板块对比
- **排名类型**：
  - 涨跌幅排名（日/周/月/年）
  - 市值排名（总市值/流通市值）
  - 成交额排名
  - 板块涨跌排名
  - 主力资金净流入排名
- **特色功能**：
  - ST股票智能过滤
  - 板块轮动分析
  - 龙虎榜解读
  - 历史排名变化追踪

**触发词**："排行分析："

**查询示例**：
```
"排行分析：今日涨幅前10的科技股"
"排行分析：本月主力资金流入最多的板块"
"排行分析：市值最大的新能源汽车股"
```

### 3. ANNS Agent - 公告查询专家

**优先级**：⭐⭐⭐⭐

**功能设计**：
- **核心功能**：公告智能检索、内容提取、时间线分析
- **公告类型**：
  - 定期报告（年报/季报）
  - 临时公告
  - 股东大会决议
  - 重大事项公告
- **特色功能**：
  - 关键信息自动提取
  - 公告情感分析
  - 时间线整理
  - 同行业公告对比

**触发词**："查询公告："

**查询示例**：
```
"查询公告：贵州茅台最新的股东大会决议"
"查询公告：比亚迪近期的重大合同公告"
"查询公告：宁德时代的扩产计划"
```

### 4. QA Agent - 董秘互动专家

**优先级**：⭐⭐⭐

**功能设计**：
- **核心功能**：投资者问答检索、回复分析、市场情绪判断
- **数据来源**：
  - 上证e互动
  - 深交所互动易
  - 投资者关系活动记录
- **特色功能**：
  - 问题分类（业务/财务/战略）
  - 回复质量评分
  - 市场关注度分析
  - 情绪倾向判断

**触发词**："董秘互动："

**查询示例**：
```
"董秘互动：投资者最关心茅台的什么问题"
"董秘互动：宁德时代对产能扩张的回复"
"董秘互动：比亚迪最新的投资者交流内容"
```

## 🔧 技术架构设计

### 1. 模块化继承
- 基于v2.3.0的模块化架构
- 复用统一的参数提取、验证、格式化模块
- 继承标准的Agent基类

### 2. 数据架构
```
新增数据表：
- tu_concept_blocks（概念板块）
- tu_concept_stocks（概念成分股）
- tu_concept_evidence（关联证据）
- tu_concept_technical_cache（技术缓存）
- tu_ranking_snapshot（排名快照）
- tu_announcements_meta（公告元数据）
- tu_investor_qa（投资者问答）
```

### 3. 性能目标
- Concept Agent：概念匹配<0.5秒，完整分析<3秒
- Rank Agent：排名查询<0.5秒
- ANNS Agent：公告列表<0.3秒，内容分析<3秒
- QA Agent：问答检索<0.5秒

## 📅 开发时间线

### Phase 1：Concept Agent（4-5周）
- Week 1：等待外部项目数据准备
- Week 2-3：核心功能开发
- Week 4：技术筛选集成
- Week 5：测试和优化

### Phase 2：Rank & ANNS Agent（4周）
- Week 5-6：Rank Agent开发
- Week 7-8：ANNS Agent开发

### Phase 3：QA Agent & 集成（4周）
- Week 9-10：QA Agent开发
- Week 11：9-Agent集成测试
- Week 12：性能优化和文档

## 📊 成功指标

1. **功能完整性**
   - 4个新Agent全部上线
   - 每个Agent至少支持10种查询模式

2. **性能指标**
   - 90%查询响应时间<2秒
   - 支持100+并发用户

3. **质量标准**
   - 每个Agent测试覆盖率>80%
   - 关键功能测试通过率100%

4. **用户体验**
   - 查询意图识别准确率>90%
   - 用户满意度>90%

## 🚀 里程碑

1. **M1（Week 5）**：Concept Agent上线
2. **M2（Week 8）**：Rank & ANNS Agent上线
3. **M3（Week 10）**：QA Agent上线
4. **M4（Week 12）**：v2.4.0正式发布

## 💡 风险与对策

### 风险1：数据源限制
- **风险**：概念股数据依赖外部项目
- **对策**：与外部项目保持同步，建立备份方案

### 风险2：性能压力
- **风险**：9个Agent并发可能影响性能
- **对策**：加强缓存，优化查询路径

### 风险3：复杂度增加
- **风险**：系统复杂度大幅提升
- **对策**：严格遵循模块化设计原则

## 🎯 长期愿景

v2.4.0完成后，系统将拥有9个专业Agent，覆盖：
- 基础数据查询（SQL）
- 文档分析（RAG）
- 财务分析（Financial）
- 资金分析（Money Flow）
- 概念分析（Concept）⭐新
- 排名分析（Rank）⭐新
- 公告分析（ANNS）⭐新
- 互动分析（QA）⭐新
- 智能路由（Hybrid）

形成完整的股票分析生态系统！

---
创建时间：2025-07-13  
更新时间：2025-07-13