# SQL公告查询与RAG公告内容查询的边界说明

**创建日期**: 2025-07-04 01:00  
**版本**: v1.0

## 概述

本文档明确定义SQL Agent的公告查询功能与RAG Agent的公告内容查询功能之间的边界，帮助系统正确路由用户查询。

## 功能定位

### SQL Agent - 公告列表查询

**核心功能**: 返回公告的**元数据列表**（标题、日期、链接）

**典型查询示例**:
- "贵州茅台最新公告"
- "万科A昨天的公告"
- "中国平安本月公告列表"
- "比亚迪2025年6月的公告"
- "宁德时代最近10条公告"

**返回内容**:
- 公告日期
- 公告标题
- 查看原文链接
- 以Markdown表格形式展示

**特点**:
- 快速响应（通常1-2秒）
- 支持灵活的日期查询
- 可以指定返回数量
- 不包含公告具体内容

### RAG Agent - 公告内容分析

**核心功能**: 分析和总结公告的**具体内容**

**典型查询示例**:
- "总结贵州茅台年报的主要内容"
- "分析万科A最新公告的重点信息"
- "宁德时代业绩预告说了什么"
- "比亚迪分红公告的具体方案"
- "中国平安的风险提示有哪些"

**返回内容**:
- 公告内容的总结分析
- 关键信息提取
- 具体数据和细节
- 基于语义理解的回答

**特点**:
- 响应时间较长（10-30秒）
- 需要向量检索和LLM分析
- 提供深度内容理解
- 可能引用多份相关文档

## 路由规则

### 路由到SQL Agent的关键词

1. **列表类**：
   - "公告列表"
   - "公告信息"
   - "公告标题"
   - "有哪些公告"
   - "查看公告"

2. **不包含内容分析词汇**：
   - 仅询问公告的存在性
   - 只需要标题和链接
   - 明确要求列表形式

### 路由到RAG Agent的关键词

1. **内容分析类**：
   - "公告内容"
   - "公告说了什么"
   - "公告的主要内容"
   - "总结公告"
   - "分析公告"

2. **具体信息提取**：
   - "业绩如何"
   - "分红方案"
   - "重大事项"
   - "风险提示"

## 边界案例处理

### 模糊查询的处理原则

1. **"XX最新公告"**
   - 默认路由到SQL Agent
   - 返回公告列表

2. **"XX最新公告的主要内容"**
   - 路由到RAG Agent
   - 因为包含"内容"关键词

3. **"查询公告：XX"**
   - 保留给未来的ANNS Agent
   - 目前降级到SQL Agent处理

## 用户体验优化建议

1. **组合使用**：
   - 先用SQL查询获取公告列表
   - 选择感兴趣的公告用RAG深入分析

2. **明确提示**：
   - SQL查询结果中提示："如需查看公告具体内容，请使用'分析XX公告内容'等查询"
   - RAG查询结果中提示："如需查看更多公告，请使用'XX公告列表'查询"

3. **性能预期管理**：
   - SQL查询：预期1-2秒返回
   - RAG查询：预期10-30秒返回，视内容复杂度而定

## 未来扩展

### ANNS Agent（规划中）

**定位**: 高级公告搜索和筛选

**功能设想**:
- 按公告类型筛选（年报、季报、临时公告等）
- 多条件组合查询
- 批量公告下载
- 公告更新提醒

**触发词**: "查询公告："（已预留）

## 总结

- SQL Agent负责快速返回公告列表和基本信息
- RAG Agent负责深入分析公告的具体内容
- 两者功能互补，共同提供完整的公告查询体验
- 通过关键词识别实现准确的查询路由