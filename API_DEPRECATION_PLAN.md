# API废弃计划

## 时间线

### v2.3.0 (2025-07-13) - 当前版本
- ✅ 保留两个API并行运行
- ✅ 在原API添加废弃警告
- ✅ 鼓励用户开始迁移
- ⚠️ 前端保持使用8000端口（避免破坏性变更）

### v2.3.5 (2025-08月) - 过渡版本
- [ ] 前端默认切换到8001端口
- [ ] 提供环境变量快速切换选项
- [ ] 监控两个API的使用情况
- [ ] 收集用户反馈

### v2.4.0 (2025-10月) - 废弃版本
- [ ] 完全移除原API（端口8000）
- [ ] 清理所有旧代码
- [ ] 更新所有文档

## 迁移检查清单

### 开发者任务
- [ ] 更新前端`.env`配置到8001端口
- [ ] 测试前端与模块化API的兼容性
- [ ] 更新所有测试脚本
- [ ] 更新部署脚本

### 用户通知
- [ ] 在v2.3.0发布说明中明确废弃计划
- [ ] 在API响应头添加废弃警告
- [ ] 定期提醒用户迁移

### 监控指标
- [ ] 统计8000端口的调用量
- [ ] 统计8001端口的调用量
- [ ] 收集迁移过程中的问题

## 回滚方案

如果模块化API出现严重问题：
1. 保持原API作为备份
2. 快速切换前端配置
3. 修复问题后再次推进迁移

## 风险评估

### 低风险
- API兼容性已验证（99%）
- 迁移指南完整
- 有充足的过渡时间

### 中风险
- 用户可能忽略废弃警告
- 某些自动化脚本可能需要手动更新

### 缓解措施
- 主动通知重要用户
- 提供迁移支持
- 保留足够的过渡期