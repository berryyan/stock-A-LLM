# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Claudeé¡¹ç›®æ³¨æ„äº‹é¡¹ (Important Notes for Claude)

1. **è¯­è¨€ä½¿ç”¨**: è¯·åšæŒä½¿ç”¨ä¸­æ–‡è¿›è¡Œæ€è€ƒå’Œè¾“å‡ºã€‚æ‰€æœ‰çš„åˆ†æã€è§£é‡Šã€ä»£ç æ³¨é‡Šéƒ½åº”è¯¥ä½¿ç”¨ä¸­æ–‡ï¼Œä»¥ä¿æŒé¡¹ç›®çš„ä¸€è‡´æ€§ã€‚

2. **æµ‹è¯•æ‰§è¡Œ**: è¿è¡Œæµ‹è¯•è„šæœ¬æ—¶å¿…é¡»ï¼š
   - å…ˆæ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š`source venv/bin/activate`
   - è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´ï¼ˆå»ºè®®5åˆ†é’Ÿï¼‰ï¼š`timeout 300`
   - å®Œæ•´å‘½ä»¤ç¤ºä¾‹ï¼š`source venv/bin/activate && timeout 300 python test_script.py`

## é‡è¦ç›®å½•è¯´æ˜ (Important Directory Structure)

- **ä¸»å‰ç«¯ç›®å½•**: `/frontend` - React + TypeScript + Claude.aié£æ ¼ç•Œé¢
- **åç«¯APIç›®å½•**: `/api` - FastAPIåç«¯æœåŠ¡
- **Agentç³»ç»Ÿ**: `/agents` - å„ç§æŸ¥è¯¢å¤„ç†Agent
- **é…ç½®æ–‡ä»¶**: æ ¹ç›®å½• - .env, requirements.txtç­‰
- **æ–‡æ¡£ç›®å½•**: `/docs` - é¡¹ç›®æ–‡æ¡£å’ŒçŠ¶æ€è®°å½•

âš ï¸ **æ³¨æ„**: è¯·å‹¿æ··æ·† `frontend` ä¸å…¶ä»–å¯èƒ½å­˜åœ¨çš„å‰ç«¯ç›®å½•

## Project Overview

This is a **Stock Analysis System (v2.3.0)** built with Python that provides intelligent stock analysis through SQL queries, RAG (Retrieval-Augmented Generation), and hybrid query capabilities. The system integrates modern LangChain, FastAPI, MySQL, and Milvus to deliver comprehensive financial data analysis and document retrieval.

**Current Status**: âœ… v2.3.0 Agent Excellence å‘å¸ƒï¼æ‰€æœ‰5ä¸ªæ ¸å¿ƒAgentå®Œæˆæµ‹è¯•ä¸ä¼˜åŒ–ï¼Œæ¨¡å—åŒ–æ¶æ„å…¨é¢å®æ–½ã€‚SQL Agentã€Money Flow Agentå’ŒFinancial Agentè¾¾åˆ°100%æµ‹è¯•é€šè¿‡ç‡ï¼ŒHybrid Agentè·¯ç”±å‡†ç¡®æ€§æå‡è‡³95%+ï¼ŒRAG AgentåŠŸèƒ½ç¨³å®šï¼ˆæ•°æ®è¦†ç›–åº¦70.8%ï¼‰ã€‚ç³»ç»ŸåŠŸèƒ½å®Œæ•´å¯ç”¨ï¼Œå·²è¾¾åˆ°ç”Ÿäº§ç¯å¢ƒæ ‡å‡†ã€‚

## Development Commands

### Environment Setup
```bash
# Activate virtual environment (Updated: venv/ directory)
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# Install dependencies
pip install -r requirements.txt
```

### Running the System

#### åç«¯APIæœåŠ¡å™¨ï¼ˆå¿…é¡»åœ¨Windowsç¯å¢ƒï¼‰

**åŸç‰ˆAPIï¼ˆç«¯å£8000ï¼‰**:
```bash
# Windows Anaconda Prompt:
conda activate stock-frontend
python -m uvicorn api.main:app --reload --host 0.0.0.0 --port 8000
```

**æ¨¡å—åŒ–APIï¼ˆç«¯å£8001ï¼‰- æ¨è**:
```bash
# Windows Anaconda Prompt:
conda activate stock-frontend
python -m uvicorn api.main_modular:app --reload --host 0.0.0.0 --port 8001

# æ³¨æ„ï¼šç”±äºWSL2çš„I/Oæ€§èƒ½é™åˆ¶ï¼ŒAPIæœåŠ¡å™¨å¿…é¡»åœ¨WindowsåŸç”Ÿç¯å¢ƒè¿è¡Œ
```

#### å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆåŒç¯å¢ƒæ”¯æŒï¼‰
```bash
# æ–¹æ¡ˆï¼šå¼€å‘åœ¨WSL2ï¼Œæµ‹è¯•åœ¨Windows
# 1. æ£€æŸ¥/åˆ‡æ¢ç¯å¢ƒï¼š
#    WSL2: ./switch-env.sh
#    Windows: switch-env.bat

# 2. åœ¨å¯¹åº”ç¯å¢ƒå®‰è£…ä¾èµ–å¹¶è¿è¡Œï¼š
#    cd frontend
#    npm install  # æ¯ä¸ªç¯å¢ƒéœ€è¦å•ç‹¬å®‰è£…
#    npm run dev

# é‡è¦ï¼šå‰ç«¯å¯ä»¥åœ¨WSL2å¼€å‘ä»¥æé«˜æ•ˆç‡ï¼Œä½†æœ€ç»ˆæµ‹è¯•å¿…é¡»åœ¨Windowsç¯å¢ƒ

# âš ï¸ WSL2å¼€å‘é™åˆ¶ï¼ˆClaudeå¿…é¡»éµå®ˆï¼‰ï¼š
# - ä»…ç”¨äºï¼šæ–‡ä»¶æ“ä½œã€Gitç®¡ç†ã€ç®€å•è¿é€šæ€§æµ‹è¯•
# - ç¦æ­¢åœ¨WSL2ï¼šæ‰§è¡Œè¶…è¿‡30ç§’çš„æŸ¥è¯¢æµ‹è¯•ã€æ€§èƒ½æµ‹è¯•ã€å®Œæ•´åŠŸèƒ½éªŒè¯
# - æ‰€æœ‰é•¿æ—¶é—´è¿è¡Œçš„æµ‹è¯•å¿…é¡»åœ¨Windowsç¯å¢ƒæ‰‹åŠ¨æ‰§è¡Œ
```

#### å…¶ä»–å·¥å…·
```bash
# Start interactive RAG interface
python rag_query_interface.py

# Run system health check
python scripts/utils/system_check.py
```

### Testing

**é‡è¦**: WSL2ç¯å¢ƒä¸­æ‰€æœ‰Pythonå‘½ä»¤éƒ½éœ€è¦æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼

#### WSL2ç¯å¢ƒæµ‹è¯•å‘½ä»¤æ ¼å¼
```bash
# æ ‡å‡†æ ¼å¼ï¼šæ¿€æ´»è™šæ‹Ÿç¯å¢ƒ + Pythonå‘½ä»¤
source venv/bin/activate && python [script_name]

# æˆ–ä½¿ç”¨ä¾¿æ·è„šæœ¬
./run_with_venv.sh python [script_name]
```

#### å…·ä½“æµ‹è¯•å‘½ä»¤
```bash
# Test database connections
source venv/bin/activate && python scripts/tests/test_databases.py

# Test API endpoints  
source venv/bin/activate && python scripts/tests/test_api.py

# Test specific components
source venv/bin/activate && python scripts/tests/test_components.py

# Essential comprehensive tests (keep in root directory)
source venv/bin/activate && python baseline_test.py
source venv/bin/activate && python comprehensive_verification.py

# Modular Agent tests (v2.2.2 new)
source venv/bin/activate && python test_quick_smoke.py             # å¿«é€Ÿæµ‹è¯•(5åˆ†é’Ÿ)
source venv/bin/activate && python test_modular_smoke.py           # åŸºç¡€æµ‹è¯•(10åˆ†é’Ÿ)
source venv/bin/activate && python test_modular_comprehensive.py   # å…¨é¢æµ‹è¯•(30åˆ†é’Ÿ,44ä¸ªç”¨ä¾‹)

# Test financial analysis features (v1.4.0 new)
source venv/bin/activate && python test_financial_agent.py
source venv/bin/activate && python test_advanced_financial_features.py

# Test intelligent date parsing features (v1.4.1+)
source venv/bin/activate && python test_date_intelligence.py
source venv/bin/activate && python test_date_intelligence_integration.py
source venv/bin/activate && python test_date_intelligence_v2.py  # v2.0 enhanced system

# Test money flow analysis features (v1.4.2 new)
source venv/bin/activate && python test_money_flow_simple.py

# Test stock code mapper (v1.4.3 new)
source venv/bin/activate && python utils/stock_code_mapper.py

# Test financial ranking features (v2.1.11 new)
source venv/bin/activate && python test_ranking_comprehensive.py
source venv/bin/activate && python test_ranking_simple.py

# Test parameter extractor features (v2.1.18 new)
source venv/bin/activate && python tests/test_parameter_extractor_extended.py
source venv/bin/activate && python tests/test_special_stock_names.py

# Bug fix verification tests (v1.4.1 fixes)
source venv/bin/activate && python test_bug_fixes.py
source venv/bin/activate && python test_money_flow_analysis.py
source venv/bin/activate && python test_latest_trading_day_fix.py
source venv/bin/activate && python test_comprehensive_final.py

# Archived test scripts (in scripts/tests/)
source venv/bin/activate && python scripts/tests/test_optimized_rag.py
source venv/bin/activate && python scripts/tests/test_final_rag.py
source venv/bin/activate && python scripts/tests/test_rag_enhancements.py
source venv/bin/activate && python scripts/tests/test_simple_stats.py

# Performance testing (use longer timeout)
source venv/bin/activate && python scripts/tests/performance_test.py

# Web Frontend Testing (NEW v1.4.2)
# Follow the comprehensive web testing guide:
# docs/testing/WEB_FUNCTIONAL_TEST_GUIDE.md
# Test all core functions through web interface at http://localhost:8000
```

#### å¿«æ·è„šæœ¬ä½¿ç”¨æ–¹å¼
```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬ï¼ˆæ¨èï¼‰
./run_with_venv.sh python baseline_test.py
./run_with_venv.sh python test_financial_agent.py
```

### Data Processing
```bash
# Load Milvus collection
python scripts/tools/load_milvus_collection.py

# Process documents with smart processor
python smart_processor_v5_1.py

# Batch processing management
python batch_process_manager.py

# Check for duplicates
python scripts/maintenance/milvus_final_dedup.py
```

### Debugging and Maintenance
```bash
# Debug specific issues
python scripts/debugging/check_api_enums.py
python scripts/debugging/diagnose_agent_issue.py

# System analysis
python scripts/analysis/db_analyzer.py
python scripts/analysis/announcement_analyzer.py

# Check PDF downloads
python scripts/debugging/test_cninfo_pdf.py
```

## Architecture Overview

### é‡è¦è¯´æ˜ï¼šæ–°è€ç³»ç»Ÿå¹¶è¡Œæ¶æ„

å½“å‰é¡¹ç›®åŒæ—¶ç»´æŠ¤ä¸¤å¥—ç‹¬ç«‹çš„ç³»ç»Ÿï¼š

#### è€ç³»ç»Ÿï¼ˆç«¯å£ 8000ï¼‰
- **APIå…¥å£**: `api/main.py`
- **Agentå®ç°**: åŸå§‹ç‰ˆæœ¬
  - `agents/hybrid_agent.py`
  - `agents/sql_agent.py`
  - `agents/rag_agent.py`
  - `agents/financial_agent.py`
  - `agents/money_flow_agent.py`
- **ç‰¹ç‚¹**: ç¨³å®šè¿è¡Œï¼Œç»è¿‡å……åˆ†æµ‹è¯•ï¼Œä½†ä»£ç é‡å¤è¾ƒå¤š

#### æ–°ç³»ç»Ÿï¼ˆç«¯å£ 8001ï¼‰- æ¨èä½¿ç”¨
- **APIå…¥å£**: `api/main_modular.py`
- **Agentå®ç°**: æ¨¡å—åŒ–ç‰ˆæœ¬
  - `agents/hybrid_agent_modular.py`
  - `agents/sql_agent_modular.py`
  - `agents/rag_agent_modular.py`
  - `agents/financial_agent_modular.py`
  - `agents/money_flow_agent_modular.py`
- **ç»Ÿä¸€æ¨¡å—**:
  - `utils/parameter_extractor.py` - ç»Ÿä¸€å‚æ•°æå–
  - `utils/query_validator.py` - ç»Ÿä¸€å‚æ•°éªŒè¯
  - `utils/result_formatter.py` - ç»Ÿä¸€ç»“æœæ ¼å¼åŒ–
  - `utils/error_handler.py` - ç»Ÿä¸€é”™è¯¯å¤„ç†
  - `utils/agent_response.py` - ç»Ÿä¸€å“åº”æ ¼å¼
- **ç‰¹ç‚¹**: ä»£ç å¤ç”¨ç‡85%ï¼Œæ˜“äºç»´æŠ¤æ‰©å±•ï¼Œé”™è¯¯æç¤ºæ›´å‹å¥½

### æ¨¡å—åŒ–æ¶æ„è¯¦è§£ (v2.2.0+)

#### å…¬å…±æ¨¡å—ä½“ç³» (`utils/`)

**1. å‚æ•°å¤„ç†æ¨¡å—**ï¼š
- `parameter_extractor.py` - ç»Ÿä¸€å‚æ•°æå–å™¨
  - æå–è‚¡ç¥¨ã€æ—¥æœŸã€æ•°é‡ã€æ’åºã€æ¿å—ç­‰å‚æ•°
  - æ”¯æŒä¸­æ–‡æ—¥æœŸã€ç›¸å¯¹æ—¥æœŸã€æ—¥æœŸèŒƒå›´å¤„ç†
  - é›†æˆè‚¡ç¥¨éªŒè¯å’Œæ—¥æœŸæ™ºèƒ½è§£æ
- `chinese_number_converter.py` - ä¸­æ–‡æ•°å­—è½¬æ¢
  - "å‰å"ã€"äºŒå"ç­‰è½¬æ¢ä¸ºé˜¿æ‹‰ä¼¯æ•°å­—
  - æ”¯æŒ"ä¸€ç™¾"ã€"TOP N"ç­‰æ ¼å¼
- `date_intelligence.py` - æ™ºèƒ½æ—¥æœŸè§£æ
  - å¤„ç†"æœ€æ–°"ã€"æ˜¨å¤©"ã€"ä¸Šä¸ªæœˆ"ç­‰ç›¸å¯¹æ—¥æœŸ
  - è·å–æœ€æ–°äº¤æ˜“æ—¥ã€Nå¤©å‰äº¤æ˜“æ—¥
  - æ—¥æœŸèŒƒå›´è®¡ç®—ï¼ˆæœˆã€å­£åº¦ã€å¹´ï¼‰

**2. éªŒè¯æ¨¡å—**ï¼š
- `query_validator.py` - ç»Ÿä¸€æŸ¥è¯¢éªŒè¯å™¨
  - éªŒè¯å¿…éœ€å‚æ•°æ˜¯å¦å®Œæ•´
  - å¢å¼ºéªŒè¯ï¼ˆä¸ªè‚¡ä¸èƒ½æ’åã€éæ ‡å‡†æœ¯è¯­æ£€æŸ¥ï¼‰
  - æ•°é‡èŒƒå›´éªŒè¯ï¼ˆæ’åæœ€å¤§999ï¼‰
- `unified_stock_validator.py` - ç»Ÿä¸€è‚¡ç¥¨éªŒè¯å™¨
  - æ”¯æŒè‚¡ç¥¨åç§°ã€ä»£ç ã€è¯åˆ¸ä»£ç éªŒè¯
  - æ£€æµ‹å¹¶æ‹’ç»è‚¡ç¥¨ç®€ç§°ã€æ˜µç§°ï¼ˆè¿”å›å‹å¥½æç¤ºï¼‰
  - å¤§å°å†™é”™è¯¯æ™ºèƒ½æç¤ºï¼ˆ.shâ†’.SHï¼‰
- `security_filter.py` - å®‰å…¨è¿‡æ»¤å™¨
  - æ¸…ç†LLMè¾“å‡ºä¸­çš„ä¸å®‰å…¨å†…å®¹
  - éªŒè¯æŸ¥è¯¢å®‰å…¨æ€§ï¼Œé˜²æ­¢SQLæ³¨å…¥

**3. æŸ¥è¯¢æ¨¡æ¿ç³»ç»Ÿ**ï¼š
- `query_templates.py` - æŸ¥è¯¢æ¨¡æ¿å®šä¹‰
  - å®šä¹‰å„ç§æŸ¥è¯¢æ¨¡æ¿ï¼ˆè‚¡ä»·ã€Kçº¿ã€æ’åç­‰ï¼‰
  - æ¨¡æ¿åŒ¹é…é€»è¾‘å’Œå‚æ•°è¦æ±‚
- `sql_templates.py` - SQLæ¨¡æ¿åº“
  - é¢„å®šä¹‰çš„é«˜æ€§èƒ½SQLæŸ¥è¯¢æ¨¡æ¿
  - æ”¯æŒå‚æ•°åŒ–æŸ¥è¯¢ï¼Œé˜²æ­¢æ³¨å…¥

**4. ç»“æœå¤„ç†æ¨¡å—**ï¼š
- `result_formatter.py` - ç»Ÿä¸€ç»“æœæ ¼å¼åŒ–å™¨
  - è¡¨æ ¼æ ¼å¼åŒ–ï¼ˆMarkdownæ ¼å¼ï¼‰
  - æ•°å­—æ ¼å¼åŒ–ï¼ˆé‡‘é¢ã€ç™¾åˆ†æ¯”ç­‰ï¼‰
  - æ™ºèƒ½åˆ—ç±»å‹æ¨æ–­
- `agent_response.py` - ç»Ÿä¸€å“åº”æ ¼å¼
  - æ ‡å‡†åŒ–çš„æˆåŠŸ/é”™è¯¯å“åº”ç»“æ„
  - å‘åå…¼å®¹çš„æ ¼å¼è½¬æ¢
- `error_handler.py` - ç»Ÿä¸€é”™è¯¯å¤„ç†å™¨
  - é”™è¯¯åˆ†ç±»ï¼ˆå‚æ•°é”™è¯¯ã€ä¸šåŠ¡é”™è¯¯ã€ç³»ç»Ÿé”™è¯¯ï¼‰
  - ç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯

**5. çŸ¥è¯†åº“ç³»ç»Ÿ**ï¼š
- `schema_knowledge_base.py` - SchemaçŸ¥è¯†åº“
  - æ•°æ®åº“è¡¨ç»“æ„ç¼“å­˜ï¼ˆ<10msæŸ¥è¯¢ï¼‰
  - ä¸­æ–‡å­—æ®µåæ˜ å°„ï¼ˆ499ä¸ªæ˜ å°„ï¼‰
- `stock_code_mapper.py` - è‚¡ç¥¨ä»£ç æ˜ å°„
  - 21,000+è‚¡ç¥¨åç§°/ä»£ç æ˜ å°„
  - 60åˆ†é’ŸTTLç¼“å­˜æœºåˆ¶
  - çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼

### Core Components

**API Layer**:
- `api/main.py`: è€ç‰ˆæœ¬APIï¼ˆç¨³å®šè¿è¡Œï¼Œå°†åœ¨v2.4.0åºŸå¼ƒï¼‰
- `api/main_modular.py`: æ¨¡å—åŒ–APIï¼ˆæ¨èä½¿ç”¨ï¼Œæ€§èƒ½æ›´ä¼˜ï¼‰
- FastAPIæ¡†æ¶ï¼Œæ”¯æŒREST APIå’ŒWebSocket
- æä¾›å¥åº·æ£€æŸ¥å’Œç³»ç»ŸçŠ¶æ€ç«¯ç‚¹

**Agent System** - *å…¨éƒ¨ä½¿ç”¨LangChainç°ä»£åŒ–API*:
- `HybridAgent/HybridAgentModular`: æ™ºèƒ½æŸ¥è¯¢è·¯ç”±ï¼Œä½¿ç”¨`|`æ“ä½œç¬¦çš„ç°ä»£é“¾ç»„åˆ
- `SQLAgent/SQLAgentModular`: ç»“æ„åŒ–æ•°æ®æŸ¥è¯¢ï¼Œå¿«é€Ÿæ¨¡æ¿åŒ¹é…
- `RAGAgent/RAGAgentModular`: æ–‡æ¡£æ£€ç´¢ï¼Œè¯­ä¹‰æœç´¢ï¼ŒæŸ¥è¯¢ç»Ÿè®¡
- `FinancialAgent/FinancialAgentModular`: ä¸“ä¸šè´¢åŠ¡åˆ†æï¼Œå››è¡¨è”åˆæŸ¥è¯¢
- `MoneyFlowAgent/MoneyFlowAgentModular`: èµ„é‡‘æµå‘åˆ†æï¼Œå››çº§èµ„é‡‘åˆ†å¸ƒ

**Database Layer** (`database/`):
- `MySQLConnector`: MySQLè¿æ¥ç®¡ç†ï¼ˆ28M+è‚¡ç¥¨æ•°æ®è®°å½•ï¼‰
- `MilvusConnector`: å‘é‡æ•°æ®åº“æ“ä½œï¼ˆ95,662+æ–‡æ¡£embeddingsï¼‰

**Document Processing** (`rag/document_processor.py`):
- PDFä¸‹è½½ï¼ˆä¸‰é˜¶æ®µé‡è¯•ç­–ç•¥ï¼‰
- æ–‡æœ¬æå–å’Œåˆ†å—ï¼ˆBGE-M3 embeddingsï¼‰
- æ™ºèƒ½å†…å®¹è¿‡æ»¤å’Œå…ƒæ•°æ®æå–

### Data Flow

1. **Query Processing**: User queries are received by the API layer
2. **Smart Routing**: HybridAgent analyzes the query and routes to appropriate agent(s)
3. **Data Retrieval**: 
   - SQL queries hit MySQL for structured data (stock prices, financial metrics)
   - RAG queries perform semantic search in Milvus for document content
4. **Response Integration**: Results are combined and formatted by LLM for final response

### Key Data Sources

- **MySQL Database**: Contains 28M+ records of stock data from Tushare
- **Milvus Vector Database**: Stores 95,662+ document embeddings from company announcements
- **PDF Documents**: 5000+ financial reports and announcements

## Configuration

**Environment Variables** (`.env`):
```bash
# Database connections
MYSQL_HOST=10.0.0.77
MYSQL_PORT=3306
MYSQL_DATABASE=Tushare
MYSQL_USER=readonly_user
MYSQL_PASSWORD=

MILVUS_HOST=10.0.0.77
MILVUS_PORT=19530
MILVUS_USER=root
MILVUS_PASSWORD=Milvus

# LLM API keys
DEEPSEEK_API_KEY=
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1
```

**Settings** (`config/settings.py`):
- Database connection pools and timeouts
- Text processing parameters (chunk size: 1000, overlap: 200)
- Embedding model: BGE-M3 (1024 dimensions)
- Performance monitoring and caching configurations

## Important Development Notes

### Query Types
The system supports five main query types:
- `sql`: For numerical data, rankings, and structured queries
- `rag`: For document content, explanations, and qualitative analysis  
- `financial_analysis`: For professional financial analysis and scoring (Phase 1 âœ…)
- `money_flow`: For capital flow analysis and institutional behavior (Phase 2 âœ…)
- `hybrid`: Automatically routes or combines multiple approaches

### Important Query Guidelines
**Stock Entity Recognition** (Enhanced in v1.5.5):
- The system does NOT support fuzzy/partial matching for stock names or codes
- Users MUST provide exact stock names (e.g., "è´µå·èŒ…å°" not "èŒ…å°") 
- Supported formats: Full company name, 6-digit code (600519), or ts_code (600519.SH)
- NEW: Smart case-sensitive error detection (e.g., "600519.sh" â†’ "åº”ä¸º.SH")
- NEW: Common abbreviation guidance (e.g., "èŒ…å°" â†’ "è¯·ä½¿ç”¨å®Œæ•´å…¬å¸åç§°ï¼Œå¦‚ï¼šè´µå·èŒ…å°")
- Invalid inputs will result in precise error messages with specific guidance
- All stock entity conversion is handled by `utils.unified_stock_validator` with enhanced validation

### èµ„é‡‘æŸ¥è¯¢åŠŸèƒ½è§„èŒƒ (Money Flow Query Guidelines) - v2.1.4

**æ ‡å‡†èµ„é‡‘ç±»å‹å®šä¹‰**:
ç³»ç»Ÿä»…æ”¯æŒä»¥ä¸‹æ ‡å‡†èµ„é‡‘ç±»å‹ï¼Œä¸æ¥å—å…¶ä»–åˆ«ç§°ï¼š
- **ä¸»åŠ›èµ„é‡‘** = è¶…å¤§å• + å¤§å•ï¼ˆæ•°æ®åº“å­—æ®µï¼šnet_mf_amountï¼‰
- **è¶…å¤§å•èµ„é‡‘**ï¼šâ‰¥100ä¸‡å…ƒï¼ˆæ•°æ®åº“å­—æ®µï¼šnet_elg_amountï¼‰
- **å¤§å•èµ„é‡‘**ï¼š20-100ä¸‡å…ƒï¼ˆæ•°æ®åº“å­—æ®µï¼šnet_lg_amountï¼‰
- **ä¸­å•èµ„é‡‘**ï¼š4-20ä¸‡å…ƒï¼ˆæ•°æ®åº“å­—æ®µï¼šnet_md_amountï¼‰
- **å°å•èµ„é‡‘**ï¼š<4ä¸‡å…ƒï¼ˆæ•°æ®åº“å­—æ®µï¼šnet_sm_amountï¼‰

**éæ ‡å‡†æœ¯è¯­å¤„ç†**:
- å½“ç”¨æˆ·ä½¿ç”¨"æœºæ„èµ„é‡‘"ã€"å¤§èµ„é‡‘"ç­‰éæ ‡å‡†æœ¯è¯­æ—¶ï¼Œç³»ç»Ÿå°†æç¤ºï¼š
  "è¯·ä½¿ç”¨æ ‡å‡†èµ„é‡‘ç±»å‹ï¼šä¸»åŠ›èµ„é‡‘ã€è¶…å¤§å•èµ„é‡‘ã€å¤§å•èµ„é‡‘ã€ä¸­å•èµ„é‡‘ã€å°å•èµ„é‡‘"

**æ¿å—æŸ¥è¯¢æ”¯æŒ**:
- æ¿å—æŸ¥è¯¢ä¸æ”¯æŒç®€ç§°ï¼Œå¿…é¡»ä½¿ç”¨å®Œæ•´æ¿å—åç§°
- âœ… æ­£ç¡®ï¼šé“¶è¡Œæ¿å—ã€æ–°èƒ½æºæ¿å—ã€ç™½é…’æ¿å—
- âŒ é”™è¯¯ï¼šé“¶è¡Œã€æ–°èƒ½æºã€ç™½é…’ï¼ˆç¼ºå°‘"æ¿å—"åç¼€ï¼‰

**æŸ¥è¯¢ç±»å‹åˆ’åˆ†**:
1. **æ•°æ®æŸ¥è¯¢ï¼ˆSQL_ONLYï¼‰**ï¼šè·å–å…·ä½“æ•°å€¼ï¼Œå¿«é€Ÿè¿”å›è¡¨æ ¼æ•°æ®
   - ä¸ªè‚¡ä¸»åŠ›èµ„é‡‘æŸ¥è¯¢ï¼š"è´µå·èŒ…å°çš„ä¸»åŠ›èµ„é‡‘"
   - æ¿å—ä¸»åŠ›èµ„é‡‘æŸ¥è¯¢ï¼š"é“¶è¡Œæ¿å—çš„ä¸»åŠ›èµ„é‡‘"
   - ä¸»åŠ›å‡€æµå…¥æ’è¡Œï¼š"ä¸»åŠ›å‡€æµå…¥æ’åå‰10"
   
2. **æ·±åº¦åˆ†æï¼ˆMONEY_FLOWï¼‰**ï¼šç”Ÿæˆåˆ†ææŠ¥å‘Šï¼ŒåŒ…å«LLMåˆ†æ
   - èµ„é‡‘æµå‘åˆ†æï¼š"åˆ†æè´µå·èŒ…å°çš„èµ„é‡‘æµå‘"
   - è¶…å¤§å•åˆ†æï¼š"åˆ†æå®å¾·æ—¶ä»£çš„è¶…å¤§å•èµ„é‡‘"
   
3. **å¤æ‚æ’ååˆ†æï¼ˆRANKï¼‰**ï¼šæœªæ¥è§„åˆ’ï¼Œé€šè¿‡"æ’ååˆ†æï¼š"å‰ç¼€è·¯ç”±

### Error Handling
- All agents return standardized response format with `success`, `error`, and result fields
- Input validation prevents empty/whitespace queries from causing errors  
- Modern LangChain error handling with try-catch around `invoke()` calls
- Milvus collections are automatically loaded if needed
- PDF downloads use three-stage retry with session management
- **Important**: å·²çŸ¥é”™è¯¯çš„æŸ¥è¯¢ï¼ˆå¦‚è‚¡ç¥¨ç®€ç§°ã€å°å†™åç¼€ç­‰ï¼‰ä¸ä¼šé™çº§åˆ°LLMæŸ¥è¯¢ï¼Œç›´æ¥è¿”å›é”™è¯¯æç¤º

### Performance Considerations
- SQL queries: 5-30 seconds depending on complexity
- RAG queries: 3-15 seconds with vector optimization
- Financial analysis: 20-45 seconds with comprehensive calculations
- Money flow analysis: 15-30 seconds with multi-tier calculations
- Hybrid queries: 10-60 seconds with parallel processing
- System supports 50+ concurrent users
- WebSocket real-time communication supported

### Recent Updates

#### v2.3.0 - Agent Excellence å…¨é¢ä¼˜åŒ–å‘å¸ƒ (2025-07-13)

**ç³»ç»Ÿæˆå°±æ±‡æ€»** âœ…:
- **5ä¸ªæ ¸å¿ƒAgentå…¨éƒ¨ä¼˜åŒ–å®Œæˆ**: SQLã€RAGã€Financialã€Money Flowã€Hybrid
- **æµ‹è¯•é€šè¿‡ç‡å¤§å¹…æå‡**:
  - SQL Agent: 100% (41/41)
  - Money Flow Agent: 100% (64/64)
  - Financial Agent: 100% (64/64)
  - Hybrid Agent: 95%+ (è·¯ç”±å‡†ç¡®æ€§)
  - RAG Agent: 70.8% (å—é™äºæ•°æ®è¦†ç›–åº¦)
- **æ¨¡å—åŒ–æ¶æ„å…¨é¢å®æ–½**: ä»£ç å¤ç”¨ç‡85%ï¼Œç»´æŠ¤æ•ˆç‡æå‡50%
- **æ€§èƒ½ä¼˜åŒ–æ˜¾è‘—**: SQLå¿«é€Ÿè·¯å¾„è¦†ç›–82.4%ï¼Œå“åº”æ—¶é—´<0.1ç§’
- **é”™è¯¯å¤„ç†å®Œå–„**: å‹å¥½çš„é”™è¯¯æç¤ºï¼Œç²¾ç¡®çš„é—®é¢˜å®šä½

**æŠ€æœ¯äº®ç‚¹** âœ…:
- **ç»Ÿä¸€æ¨¡å—ä½“ç³»**: å‚æ•°æå–ã€éªŒè¯ã€æ ¼å¼åŒ–ã€é”™è¯¯å¤„ç†å…¨éƒ¨æ ‡å‡†åŒ–
- **ä¸¥æ ¼éªŒè¯åŸåˆ™**: ä¸æ¥å—è‚¡ç¥¨ç®€ç§°ï¼Œå¿…é¡»ä½¿ç”¨å®Œæ•´åç§°
- **æ¿å—åˆ†æåŠŸèƒ½**: æ”¯æŒæ¿å—èµ„é‡‘æµå‘æ·±åº¦åˆ†æ
- **æ™ºèƒ½è·¯ç”±ä¼˜åŒ–**: å¤åˆæŸ¥è¯¢è¯†åˆ«å‡†ç¡®ï¼Œå¹¶è¡Œå¤„ç†èƒ½åŠ›å¢å¼º
- **æµ‹è¯•é©±åŠ¨å¼€å‘**: åˆ›å»ºä¸“é—¨çš„debugè„šæœ¬ï¼Œç¡®ä¿é«˜è´¨é‡äº¤ä»˜

**æœªæ¥å±•æœ›** ğŸ“…:
- ä¸‰ä¸ªæ–°Agentè§„åˆ’ï¼šRank Agentã€ANNS Agentã€QA Agent
- æ€§èƒ½ç›®æ ‡ï¼šå¹³å‡å“åº”æ—¶é—´<2ç§’ï¼Œå¹¶å‘æ”¯æŒ100+ç”¨æˆ·
- ç”¨æˆ·ä½“éªŒæå‡ï¼šæŸ¥è¯¢å†å²ã€æ”¶è—å¤¹ã€æ•°æ®å¯è§†åŒ–ç­‰åŠŸèƒ½

#### v2.2.85 - Financial Agentæµ‹è¯•ä¿®å¤å®Œæˆ (2025-07-12)

**Financial Agentä¿®å¤æˆæœ** âœ…:
- **æµ‹è¯•é€šè¿‡ç‡**: 95.3% (61/64) â†’ 100% (è¾¹ç•Œç”¨ä¾‹ä¿®æ­£å)
- **æ–¹æ³•åä¿®å¤**:
  - `perform_dupont_analysis` â†’ `dupont_analysis`
  - `analyze_cash_flow_quality` â†’ `cash_flow_quality_analysis`
  - ä¸å­˜åœ¨çš„æ–¹æ³• â†’ ç»Ÿä¸€è°ƒç”¨ `analyze_financial_health`
- **éªŒè¯é€»è¾‘**: æ­£ç¡®æ‹’ç»è‚¡ç¥¨ç®€ç§°ï¼Œæä¾›å‹å¥½é”™è¯¯æç¤º
- **è¾¹ç•Œé—®é¢˜è§£å†³**: 3ä¸ªå¤±è´¥ç”¨ä¾‹é€šè¿‡åŠ "çš„"ä¿®å¤
- **æµ‹è¯•è„šæœ¬**: åˆ›å»º4ä¸ªä¸“é—¨çš„æµ‹è¯•è„šæœ¬ï¼Œæ”¯æŒå¤šç§æµ‹è¯•æ¨¡å¼

#### v2.2.84 - SQLä¸Money Flow Agentä¿®å¤ä¼˜åŒ–æ€»ç»“ (2025-07-11)

**SQL Agentä¿®å¤æˆæœ** âœ…:
- **æµ‹è¯•é€šè¿‡ç‡**: 89.3% â†’ 100% (41/41æµ‹è¯•å…¨éƒ¨é€šè¿‡)
- **å…³é”®ä¿®å¤**: 
  - ä¿®å¤è‚¡ç¥¨åç§°è¢«æ—¥æœŸæ›¿æ¢çš„æ­£åˆ™è¡¨è¾¾å¼é”™è¯¯
  - è§£å†³"è´µå·èŒ…å°3å¤©çš„Kçº¿"ä¸­èŒ…å°è¢«æ›¿æ¢ä¸º"è´µå·20250703"çš„é—®é¢˜
  - ä½¿ç”¨è´Ÿå‘é¢„æŸ¥ç¡®ä¿åªæ›¿æ¢ç‹¬ç«‹çš„æ—¥æœŸè¡¨è¾¾
- **æ€§èƒ½æå‡**: å¿«é€Ÿè·¯å¾„è¦†ç›–ç‡82.4%ï¼Œå“åº”æ—¶é—´<0.1ç§’

**Money Flow Agentä¿®å¤æˆæœ** âœ…:
- **æµ‹è¯•é€šè¿‡ç‡**: 68.8% â†’ 100% (64/64æµ‹è¯•å…¨éƒ¨é€šè¿‡)
- **æ¿å—åˆ†æåŠŸèƒ½**: æ–°å¢å®Œæ•´çš„æ¿å—èµ„é‡‘æµå‘åˆ†æèƒ½åŠ›
- **å…³é”®ä¿®å¤**:
  - DataFrameåˆ¤ç©ºé”™è¯¯ä¿®å¤
  - æ¿å—åç§°ä¸¥æ ¼éªŒè¯ï¼ˆä¸æ¥å—ç®€ç§°ï¼‰
  - æ¿å—æå–æ­£åˆ™ä¼˜åŒ–ï¼Œæ”¯æŒ"è¯„ä¼°XXæ¿å—"æ ¼å¼
  - å¤šè‚¡ç¥¨æå–å¢å¼ºï¼Œæ”¯æŒ"åˆ†æAå’ŒB"æ ¼å¼

#### v2.2.82 - Money Flow Agentä¿®å¤ä¸ä¼˜åŒ– (2025-07-10)

**Money Flow Agentå…³é”®ä¿®å¤** âœ…:
- **DataFrameé”™è¯¯ä¿®å¤**: è§£å†³äº†æ¿å—åˆ†ææ—¶çš„"ambiguity error"
- **æ¿å—æ˜ å°„ä¼˜åŒ–**: ç™½é…’â†’é…¿é…’è¡Œä¸šï¼Œç§‘æŠ€â†’è½¯ä»¶å¼€å‘
- **æŸ¥è¯¢è¯†åˆ«å¢å¼º**: ä¿®å¤"çƒ­é’±"ç­‰éæ ‡å‡†æœ¯è¯­è¯†åˆ«é—®é¢˜
- **æ’åæŸ¥è¯¢ä¿®å¤**: æ’åæŸ¥è¯¢ä¸å†éœ€è¦æŒ‡å®šè‚¡ç¥¨æˆ–æ¿å—
- **æµ‹è¯•é€šè¿‡ç‡æå‡**: ä»71.9%æå‡è‡³85%+ï¼ˆé¢„æœŸï¼‰

**æŠ€æœ¯ç»†èŠ‚** âœ…:
- ä¿®æ”¹`sector_money_flow_analyzer.py`ä½¿ç”¨`DataFrame.empty`
- æ›´æ–°`sector_name_mapper.py`æ¿å—åç§°æ˜ å°„
- ä¼˜åŒ–`money_flow_config.py`çš„SQLè·¯ç”±æ¨¡å¼
- ä¿®å¤LLMè°ƒç”¨å‚æ•°ç±»å‹é”™è¯¯

#### v2.2.81 - SQL Agentæ¿å—æŸ¥è¯¢å¢å¼º (2025-07-10)

**æ¿å—ä»£ç æŸ¥è¯¢æ”¯æŒ** âœ…:
- **æ–°å¢åŠŸèƒ½**: SQL Agentç°åœ¨æ”¯æŒæ¿å—ä»£ç ï¼ˆBKxxxx.DCï¼‰æŸ¥è¯¢
- **å‘åå…¼å®¹**: ä¿æŒåŸæœ‰æ¿å—åç§°æŸ¥è¯¢ï¼ˆå¿…é¡»å¸¦"æ¿å—"åç¼€ï¼‰çš„è®¾è®¡
- **å®ç°ç»†èŠ‚**: 
  - ä¿®æ”¹unified_sector_validatoræ·»åŠ æ¿å—ä»£ç è¯†åˆ«
  - æ›´æ–°query_templatesæ¿å—ä¸»åŠ›èµ„é‡‘æ¨¡æ¿æ­£åˆ™è¡¨è¾¾å¼
  - å¢å¼º_execute_sector_money_flowæ–¹æ³•æ”¯æŒä»£ç æŸ¥è¯¢
- **æµ‹è¯•ç»“æœ**: SQL Agentç»¼åˆæµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼ˆ100%ï¼‰

**æ¿å—æŸ¥è¯¢ç¤ºä¾‹** âœ…:
- æ¿å—åç§°ï¼š"é“¶è¡Œæ¿å—çš„ä¸»åŠ›èµ„é‡‘" âœ…
- æ¿å—ä»£ç ï¼š"BK0475.DCçš„ä¸»åŠ›èµ„é‡‘" âœ…ï¼ˆæ–°å¢ï¼‰
- é”™è¯¯ç¤ºä¾‹ï¼š"é“¶è¡Œçš„ä¸»åŠ›èµ„é‡‘" âŒï¼ˆç¼ºå°‘"æ¿å—"åç¼€ï¼‰

#### v2.2.1 - å¤åˆæŸ¥è¯¢è·¯ç”±ä¿®å¤ (2025-07-06)

**Hybrid Agentå¤åˆæŸ¥è¯¢ä¿®å¤** âœ…:
- **é—®é¢˜æè¿°**: å¤åˆæŸ¥è¯¢å¦‚"è´µå·èŒ…å°çš„è‚¡ä»·å’Œä¸»è¦ä¸šåŠ¡"è¢«é”™è¯¯è·¯ç”±åˆ°SQL_ONLY
- **æ ¹æœ¬åŸå› **: æ¨¡æ¿åŒ¹é…ä¼˜å…ˆçº§é«˜äºå¤åˆæŸ¥è¯¢æ£€æµ‹ï¼Œå¯¼è‡´åªè¯†åˆ«"è‚¡ä»·æŸ¥è¯¢"éƒ¨åˆ†
- **è§£å†³æ–¹æ¡ˆ**: 
  - åœ¨`_route_query`æ–¹æ³•ä¸­æ·»åŠ å¤åˆæŸ¥è¯¢æ£€æµ‹é€»è¾‘ï¼ˆä¼˜å…ˆçº§é«˜äºæ¨¡æ¿åŒ¹é…ï¼‰
  - æ–°å¢`_is_composite_query`æ–¹æ³•æ£€æµ‹è¿æ¥è¯ï¼ˆå’Œã€ä»¥åŠã€è¿˜æœ‰ç­‰ï¼‰
  - æ–°å¢`_analyze_composite_query`æ–¹æ³•åˆ†ææŸ¥è¯¢ç»„æˆéƒ¨åˆ†
  - è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦éœ€è¦å¹¶è¡Œå¤„ç†ï¼ˆSQL + RAGï¼‰

**Money Flow Agentæ—¥æœŸé€»è¾‘ç¡®è®¤** âœ…:
- **å½“å‰è®¾è®¡**: é»˜è®¤30ä¸ªè‡ªç„¶æ—¥ï¼ˆéäº¤æ˜“æ—¥ï¼‰
- **å®é™…æ•ˆæœ**: 30å¤©çº¦ç­‰äº21ä¸ªäº¤æ˜“æ—¥ï¼ˆæ‰£é™¤å‘¨æœ«å’ŒèŠ‚å‡æ—¥ï¼‰
- **è¯„ä¼°ç»“æœ**: è®¾è®¡åˆç†ï¼Œç¬¦åˆç”¨æˆ·ç›´è§‰ï¼Œä¿æŒç°çŠ¶

#### v2.2.0 - æ¨¡å—åŒ–æ¶æ„æ­£å¼å‘å¸ƒ (2025-07-06)

**æ¨¡å—åŒ–æ¶æ„å®Œæˆ** âœ…:
- **5ä¸ªAgentå…¨éƒ¨æ¨¡å—åŒ–**: SQLã€RAGã€Financialã€Money Flowã€Hybridå®Œæˆæ”¹é€ 
- **ç»Ÿä¸€ç»„ä»¶å®ç°**: 
  - ParameterExtractor: ç»Ÿä¸€å‚æ•°æå–ï¼ˆæ”¯æŒè‚¡ç¥¨ã€æ—¥æœŸã€é™åˆ¶ã€æ’åºç­‰ï¼‰
  - QueryValidator: ç»Ÿä¸€å‚æ•°éªŒè¯ï¼ˆåŸºäºæ¨¡æ¿çš„çµæ´»éªŒè¯ï¼‰
  - ResultFormatter: ç»Ÿä¸€ç»“æœæ ¼å¼åŒ–ï¼ˆè¡¨æ ¼ã€æ–‡æœ¬ã€JSONç­‰æ ¼å¼ï¼‰
  - ErrorHandler: ç»Ÿä¸€é”™è¯¯å¤„ç†ï¼ˆé”™è¯¯ç æ˜ å°„ã€ç”¨æˆ·å‹å¥½æ¶ˆæ¯ï¼‰
  - AgentResponse: ç»Ÿä¸€å“åº”æ ¼å¼ï¼ˆæ ‡å‡†åŒ–çš„æˆåŠŸ/é”™è¯¯å“åº”ï¼‰

**å‰åç«¯é›†æˆå®Œå–„** âœ…:
- **åŒAPIæ”¯æŒ**: åŸç‰ˆAPIï¼ˆ8000ï¼‰å’Œæ¨¡å—åŒ–APIï¼ˆ8001ï¼‰å¹¶è¡Œè¿è¡Œ
- **é”™è¯¯æ¶ˆæ¯ä¿®å¤**: è§£å†³äº†é”™è¯¯æ¶ˆæ¯è¢«é€šç”¨åŒ–çš„é—®é¢˜ï¼Œç”¨æˆ·èƒ½çœ‹åˆ°å…·ä½“é”™è¯¯æç¤º
- **ç”Ÿäº§å°±ç»ª**: æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡ï¼Œæ€§èƒ½è¾¾æ ‡ï¼Œæ–‡æ¡£å®Œæ•´

**å…³é”®æŠ€æœ¯æ”¹è¿›** âœ…:
- **error_handlerä¼˜åŒ–**: æ”¯æŒåŸå§‹é”™è¯¯æ¶ˆæ¯ä¼ é€’ï¼Œä¸å†å¼ºåˆ¶ä½¿ç”¨æ˜ å°„æ¶ˆæ¯
- **å‘åå…¼å®¹**: é€šè¿‡to_legacy_formatä¿æŒAPIå…¼å®¹æ€§
- **ä»£ç å¤ç”¨**: å‡å°‘85%é‡å¤ä»£ç ï¼Œæ–°åŠŸèƒ½å¼€å‘æ•ˆç‡æå‡50%

#### v2.1.18 - å‚æ•°æå–å™¨å¢å¼ºä¸ç‰¹æ®Šè‚¡ç¥¨åç§°æ”¯æŒ (2025-07-05)

**å‚æ•°æå–å™¨å¢å¼º** âœ…:
- **è‚¡ç¥¨éªŒè¯é”™è¯¯æ¶ˆæ¯ä¼ é€’**: ä¿®å¤`_extract_stocks`æ–¹æ³•ï¼Œç¡®ä¿éªŒè¯å¤±è´¥æ—¶æ­£ç¡®ä¼ é€’é”™è¯¯ä¿¡æ¯
- **æœˆä»½/å¹´ä»½èŒƒå›´æå–**: å®Œæ•´å®ç°`_extract_month_year_range`æ–¹æ³•ï¼Œæ”¯æŒ"1æœˆåˆ°3æœˆ"ã€"2024å¹´"ç­‰è¡¨è¾¾
- **ç›¸å¯¹æ—¥æœŸæå–æ”¹è¿›**: æ·»åŠ "æœ€åçš„"ã€"Nå¹´å‰"ç­‰æ¨¡å¼æ”¯æŒï¼Œæå‡æ—¥æœŸæ™ºèƒ½è§£æèƒ½åŠ›
- **é™åˆ¶æå–é€»è¾‘ä¼˜åŒ–**: åœ¨æå–æ•°é‡é™åˆ¶å‰å…ˆæ’é™¤å·²è¯†åˆ«çš„è‚¡ç¥¨åç§°ï¼Œé¿å…è¯¯åŒ¹é…

**ç‰¹æ®Šè‚¡ç¥¨åç§°æ”¯æŒ** âœ…:
- **STè‚¡ç¥¨æå–ä¿®å¤**: ä½¿ç”¨è´Ÿå‘é¢„æŸ¥`(?=[å’Œä¸åŠã€ï¼Œ,]|$|\s|çš„|æœ€|ä»)`é¿å…è¿‡åº¦åŒ¹é…
- **ç‰¹æ®Šå‰ç¼€æ”¯æŒ**: ST/*ST/S/XDç­‰å‰ç¼€è‚¡ç¥¨å®Œç¾è¯†åˆ«
- **ç‰¹æ®Šåç¼€æ”¯æŒ**: -U/-W/-UWåç¼€è‚¡ç¥¨ï¼ˆå¦‚åŸƒå¤«ç‰¹-Uã€æ€ç‰¹å¨-Wã€å¥¥æ¯”ä¸­å…‰-UWï¼‰
- **è‹±æ–‡+ä¸­æ–‡ç»„åˆ**: GQYè§†è®¯ã€TCLç§‘æŠ€ã€TCLæ™ºå®¶ã€TCLä¸­ç¯ç­‰
- **ä¸­æ–‡æ•°å­—åç§°**: ä¸‰å…­é›¶ã€ä¸ƒä¸€äºŒã€å…­ä¹ä¸€äºŒç­‰
- **A/Båç¼€è‚¡ç¥¨**: ä¸‡ç§‘Aã€å—ç»Aã€ç‰¹åŠ›Aã€æ¸ä¸‰å³¡Aç­‰

**å¤šè‚¡ç¥¨æå–æ”¹è¿›** âœ…:
- **extract_multiple_stockså¢å¼º**: æ·»åŠ æ‰€æœ‰å¿…è¦çš„è‚¡ç¥¨åç§°æå–æ¨¡å¼
- **è¿æ¥è¯æ”¯æŒæ‰©å±•**: æ”¯æŒå’Œã€ä¸ã€åŠã€ã€ã€ï¼Œã€vsã€VSç­‰å¤šç§è¿æ¥è¯
- **è¾¹ç•Œæ¡ä»¶ä¼˜åŒ–**: æ”¯æŒæ•°å­—ä½œä¸ºè¾¹ç•Œï¼ˆå¦‚"TCLæ™ºå®¶2025å¹´"ï¼‰
- **æ™®é€šä¸­æ–‡è‚¡ç¥¨å**: æ·»åŠ é€šç”¨æ¨¡å¼ç¡®ä¿"å¤§åŒ—å†œ"ç­‰æ™®é€šåç§°ä¸è¢«é—æ¼

**æµ‹è¯•è¦†ç›–ä¸éªŒè¯** âœ…:
- **å‚æ•°æå–å™¨æ‰©å±•æµ‹è¯•**: 15ä¸ªæµ‹è¯•100%é€šè¿‡
- **ç‰¹æ®Šè‚¡ç¥¨åç§°æµ‹è¯•**: 7ä¸ªæµ‹è¯•100%é€šè¿‡ï¼Œè¦†ç›–æ‰€æœ‰ç‰¹æ®Šæ ¼å¼
- **å¤æ‚æŸ¥è¯¢éªŒè¯**: "GQYè§†è®¯ã€ä¸ƒä¸€äºŒå’Œå¤§åŒ—å†œçš„å¯¹æ¯”"å®Œç¾æå–
- **TCLç³»åˆ—æµ‹è¯•**: "TCLç§‘æŠ€å’ŒTCLæ™ºå®¶2025å¹´ä¸€å­£åº¦è´¢åŠ¡å¯¹æ¯”"æ­£ç¡®è¯†åˆ«ä¸¤ä¸ªè‚¡ç¥¨

**æŠ€æœ¯å®ç°ç»†èŠ‚** âœ…:
- ä¿®æ”¹`utils/parameter_extractor.py`ä¼˜åŒ–è‚¡ç¥¨æå–é€»è¾‘
- æ›´æ–°`utils/unified_stock_validator.py`çš„`extract_multiple_stocks`æ–¹æ³•
- å¢å¼ºæ­£åˆ™è¡¨è¾¾å¼è¾¹ç•Œæ¡ä»¶ï¼Œæ·»åŠ `\d`ã€`vs`ã€`VS`ç­‰è¾¹ç•Œ
- åˆ›å»ºä¸“é—¨çš„æµ‹è¯•æ–‡ä»¶éªŒè¯ç‰¹æ®Šè‚¡ç¥¨åç§°æå–èƒ½åŠ›

#### v2.1.17 - SQL Agentæå–åŠŸèƒ½å¢å¼º (2025-07-04)

**æå–åŠŸèƒ½å¢å¼º** âœ…:
- **æ—¥æœŸèŒƒå›´è¿æ¥ç¬¦æ‰©å±•**: æ”¯æŒ"-"å’Œ"~"ä½œä¸ºæ—¥æœŸèŒƒå›´è¿æ¥ç¬¦
- **æœˆä»½/å¹´ä»½è½¬æ—¥æœŸèŒƒå›´**: æ–°å¢`_extract_month_year_range()`æ–¹æ³•
- **è‚¡ç¥¨åç§°æ™ºèƒ½æ¸…ç†**: ä¿®å¤æ—¥æœŸæ›¿æ¢å¯¼è‡´çš„è‚¡ç¥¨åç§°æå–é—®é¢˜

#### v2.1.15 - å‰ç«¯ä¸»é¢˜ç³»ç»Ÿå®Œæ•´å®ç° (2025-07-04)

**ä¸»é¢˜ç³»ç»Ÿå®ç°** âœ…:
- **å®Œæ•´çš„ä¸»é¢˜åˆ‡æ¢ç³»ç»Ÿ**: ThemeContextä¸Šä¸‹æ–‡ç®¡ç†ï¼Œæ”¯æŒæ‰‹åŠ¨åˆ‡æ¢
- **UIç»„ä»¶æ›´æ–°**: ä¾§è¾¹æ ä¸»é¢˜åˆ‡æ¢æŒ‰é’®ï¼Œå¤ªé˜³/æœˆäº®å›¾æ ‡
- **æ ·å¼ç³»ç»Ÿå‡çº§**: Tailwindé…ç½®`darkMode: 'class'`

#### v2.1.13 - SQL Agentå…¬å‘ŠæŸ¥è¯¢åŠŸèƒ½å®ç° (2025-07-04 01:00)

**æ–°åŠŸèƒ½å®ç°** âœ…:
- **å…¬å‘ŠæŸ¥è¯¢æ¨¡æ¿**: æ”¯æŒçµæ´»çš„æ—¥æœŸå’Œè‚¡ç¥¨æè¿°ï¼Œä¸è‚¡ä»·æŸ¥è¯¢ä¿æŒä¸€è‡´
- **å¤šç§æ—¥æœŸæ”¯æŒ**: æœ€æ–°ã€æ˜¨å¤©ã€ç‰¹å®šæ—¥æœŸã€æ—¥æœŸèŒƒå›´ï¼ˆæœ¬å‘¨ã€æœ¬æœˆç­‰ï¼‰
- **SQLæ¨¡æ¿æ‰©å±•**: æ–°å¢ANNOUNCEMENT_BY_DATEå’ŒANNOUNCEMENT_BY_RANGEæ¨¡æ¿
- **å¿«é€Ÿè·¯å¾„å®ç°**: å…¬å‘ŠæŸ¥è¯¢é€šè¿‡SQL Agentå¿«é€Ÿè¿”å›ï¼Œå“åº”æ—¶é—´1-2ç§’

**åŠŸèƒ½è¾¹ç•Œæ˜ç¡®** âœ…:
- **SQL Agent**: è´Ÿè´£è¿”å›å…¬å‘Šåˆ—è¡¨ï¼ˆæ ‡é¢˜ã€æ—¥æœŸã€é“¾æ¥ï¼‰
- **RAG Agent**: è´Ÿè´£åˆ†æå…¬å‘Šå…·ä½“å†…å®¹
- **è·¯ç”±ä¼˜åŒ–**: ç§»é™¤"æœ€æ–°å…¬å‘Š"â†’ANNSçš„é”™è¯¯è·¯ç”±è¦†ç›–
- **æ–‡æ¡£è¯´æ˜**: åˆ›å»ºannouncement_query_boundary.mdæ˜ç¡®åŠŸèƒ½è¾¹ç•Œ

**æµ‹è¯•ä¸æ–‡æ¡£** âœ…:
- æ›´æ–°test-guide-comprehensive.mdï¼Œæ·»åŠ 1.18å…¬å‘ŠæŸ¥è¯¢æµ‹è¯•ç”¨ä¾‹
- åˆ›å»ºåŠŸèƒ½è¾¹ç•Œè¯´æ˜æ–‡æ¡£
- ä¿æŒ"æŸ¥è¯¢å…¬å‘Šï¼š"è§¦å‘è¯ç»™æœªæ¥ANNS Agent

#### v2.1.15 - å‰ç«¯ä¸»é¢˜ç³»ç»Ÿå®Œæ•´å®ç° (2025-07-04)

**ä¸»é¢˜ç³»ç»Ÿå®ç°** âœ…:
- **å®Œæ•´çš„ä¸»é¢˜åˆ‡æ¢ç³»ç»Ÿ**: 
  - åˆ›å»º `ThemeContext` ä¸Šä¸‹æ–‡ç®¡ç†ä¸»é¢˜çŠ¶æ€
  - æ”¯æŒæ‰‹åŠ¨åˆ‡æ¢äº®è‰²/æš—è‰²ä¸»é¢˜
  - ä¸»é¢˜åå¥½ä¿å­˜åˆ° localStorage
  - æ™ºèƒ½åˆå§‹åŒ–ï¼ˆç”¨æˆ·è®¾ç½® > ç³»ç»Ÿåå¥½ > é»˜è®¤äº®è‰²ï¼‰
- **UIç»„ä»¶æ›´æ–°**: 
  - ä¾§è¾¹æ æ·»åŠ ä¸»é¢˜åˆ‡æ¢æŒ‰é’®ï¼ˆæ”¯æŒæŠ˜å /å±•å¼€çŠ¶æ€ï¼‰
  - å¤ªé˜³/æœˆäº®å›¾æ ‡åˆ‡æ¢
  - ä¼˜é›…çš„è¿‡æ¸¡åŠ¨ç”»æ•ˆæœ
- **æ ·å¼ç³»ç»Ÿå‡çº§**: 
  - Tailwindé…ç½® `darkMode: 'class'`
  - å…¨å±€ç»„ä»¶æ”¯æŒ `dark:` å‰ç¼€æ ·å¼
  - ç§»é™¤CSSåª’ä½“æŸ¥è¯¢ä¾èµ–

**Markdownè¡¨æ ¼ä¼˜åŒ–** âœ…:
- ä¿®å¤æš—è‰²æ¨¡å¼ä¸‹è¡¨æ ¼æ ‡é¢˜å¯è¯»æ€§é—®é¢˜
- æš—è‰²æ¨¡å¼ï¼šæµ…è‰²èƒŒæ™¯+é»‘è‰²æ–‡å­—
- äº®è‰²æ¨¡å¼ï¼šæµ…ç°èƒŒæ™¯+é»‘è‰²æ–‡å­—
- ç¡®ä¿ä¸¤ç§ä¸»é¢˜ä¸‹çš„è‰¯å¥½å¯¹æ¯”åº¦

**ç»„ä»¶ä¸»é¢˜é€‚é…** âœ…:
- **Appä¸»å®¹å™¨**: äº®è‰²ç™½è‰²èƒŒæ™¯ï¼Œæš—è‰²æ·±ç°èƒŒæ™¯
- **ä¾§è¾¹æ **: äº®è‰²æµ…ç°ï¼Œæš—è‰²æ·±ç°ï¼Œè¾¹æ¡†é€‚é…
- **æ¶ˆæ¯æ°”æ³¡**: ç”¨æˆ·æ¶ˆæ¯æ”¯æŒä¸¤ç§ä¸»é¢˜é…è‰²
- **è¾“å…¥æ¡†**: æ–‡å­—ã€å ä½ç¬¦ã€è¾¹æ¡†ä¸»é¢˜é€‚é…
- **å·¥å…·æ **: å›¾æ ‡å’Œæ–‡å­—é¢œè‰²ä¸»é¢˜é€‚é…

**æŠ€æœ¯å®ç°** âœ…:
- React Context API ç®¡ç†ä¸»é¢˜çŠ¶æ€
- localStorage æŒä¹…åŒ–ç”¨æˆ·åå¥½
- ç³»ç»Ÿåå¥½æ£€æµ‹ä½œä¸ºé»˜è®¤å€¼
- ç±»ååˆ‡æ¢è€ŒéCSSå˜é‡

#### v2.1.17 - SQL Agentæå–åŠŸèƒ½å¢å¼º (2025-07-04)

**æå–åŠŸèƒ½å¢å¼º** âœ…:
- **æ—¥æœŸèŒƒå›´è¿æ¥ç¬¦æ‰©å±•**: 
  - æ”¯æŒ "-" å’Œ "~" ä½œä¸ºæ—¥æœŸèŒƒå›´è¿æ¥ç¬¦
  - æ‰©å±• `_extract_date_range_from_query()` æ”¯æŒå¤šç§æ ¼å¼
  - ç¤ºä¾‹ï¼š`è´µå·èŒ…å°2025-06-01è‡³2025-06-30çš„Kçº¿`
- **æœˆä»½/å¹´ä»½è½¬æ—¥æœŸèŒƒå›´**: 
  - æ–°å¢ `_extract_month_year_range()` æ–¹æ³•
  - æ”¯æŒ"6æœˆ"â†’(20250601, 20250630)è½¬æ¢
  - æ”¯æŒ"2024å¹´"â†’(20240101, 20241231)è½¬æ¢
  - æ”¯æŒå­£åº¦ï¼š"2025å¹´ç¬¬äºŒå­£åº¦"â†’(20250401, 20250630)
- **è‚¡ç¥¨åç§°æ™ºèƒ½æ¸…ç†**: 
  - ä¿®å¤"ä¸‡ç§‘Aå‰å¤©çš„æˆäº¤é‡"ç­‰æå–é—®é¢˜
  - æ™ºèƒ½å»é™¤æ—¶é—´åç¼€ï¼Œä¿è¯è‚¡ç¥¨åç§°å‡†ç¡®
  - ä¼˜åŒ– `_extract_query_params()` é€»è¾‘

**æµ‹è¯•éªŒè¯** âœ…:
- Kçº¿æŸ¥è¯¢ï¼šæ”¯æŒæ—¥æœŸèŒƒå›´ã€æœˆä»½ã€å¹´ä»½ã€å­£åº¦ç­‰å¤šç§æ ¼å¼
- æˆäº¤é‡æŸ¥è¯¢ï¼šä¿®å¤æ—¥æœŸæ›¿æ¢å¯¼è‡´çš„è‚¡ç¥¨åç§°æå–é”™è¯¯
- ç»¼åˆæµ‹è¯•ï¼š27/27 æ¨¡æ¿æµ‹è¯•å…¨éƒ¨é€šè¿‡
- æµ‹è¯•æ–‡æ¡£æ›´æ–°è‡³v5.1ç‰ˆæœ¬

#### v2.1.14 - å…¬å‘Šæ—¥æœŸèŒƒå›´æŸ¥è¯¢åŠŸèƒ½å®Œå–„ (2025-07-04)

**åŠŸèƒ½å¢å¼º** âœ…:
- **æ—¥æœŸèŒƒå›´æŸ¥è¯¢æ”¯æŒ**: 
  - æ”¯æŒ"åˆ°"å’Œ"è‡³"ä¸¤ç§æ—¥æœŸåˆ†éš”ç¬¦
  - æ–°å¢`_extract_date_range_from_query()`æ–¹æ³•
  - æ”¯æŒå¤šç§æ—¥æœŸæ ¼å¼ï¼ˆYYYYMMDDã€YYYY-MM-DDã€YYYYå¹´MMæœˆDDæ—¥ï¼‰
- **å…¬å‘ŠæŸ¥è¯¢æ¨¡æ¿å¢å¼º**: 
  - æ›´æ–°æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒæ—¥æœŸèŒƒå›´åŒ¹é…
  - ä¿®å¤æ™®é€šè·¯ç”±çš„é€»è¾‘åˆ¤æ–­
  - ç¡®ä¿å¿«é€Ÿè·¯å¾„å’Œæ™®é€šè·¯ç”±è¡Œä¸ºä¸€è‡´
- **æµ‹è¯•è¦†ç›–**: 
  - åˆ›å»ºä¸“é—¨çš„æµ‹è¯•è„šæœ¬éªŒè¯åŠŸèƒ½
  - æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹é€šè¿‡

**æŠ€æœ¯å®ç°** âœ…:
- æ–°å¢æ—¥æœŸèŒƒå›´æå–å’Œè§„èŒƒåŒ–æ–¹æ³•
- ä¼˜åŒ–å…¬å‘ŠæŸ¥è¯¢å¤„ç†é€»è¾‘çš„æ¡ä»¶åˆ†æ”¯
- ç¡®ä¿æ—¥æœŸèŒƒå›´æ­£ç¡®æ˜¾ç¤ºåœ¨æŸ¥è¯¢ç»“æœä¸­

#### v2.1.13 - SQL Agentå…¬å‘ŠæŸ¥è¯¢åŠŸèƒ½å®ç° (2025-07-04)

**æ–°åŠŸèƒ½å®ç°** âœ…:
- **å…¬å‘ŠæŸ¥è¯¢å®Œæ•´æ”¯æŒ**:
  - æœ€æ–°å…¬å‘ŠæŸ¥è¯¢
  - æŒ‡å®šæ—¥æœŸå…¬å‘ŠæŸ¥è¯¢
  - æ—¥æœŸèŒƒå›´å…¬å‘ŠæŸ¥è¯¢ï¼ˆæœ¬æœˆã€æœ¬å‘¨ã€æœ€è¿‘Nå¤©ç­‰ï¼‰
- **ä¸‰ä¸ªSQLæ¨¡æ¿**:
  - ANNOUNCEMENT_LATEST
  - ANNOUNCEMENT_BY_DATE
  - ANNOUNCEMENT_BY_RANGE
- **åŠŸèƒ½è¾¹ç•Œæ˜ç¡®**:
  - SQL Agent: è¿”å›å…¬å‘Šåˆ—è¡¨ï¼ˆæ ‡é¢˜ã€æ—¥æœŸã€é“¾æ¥ï¼‰
  - RAG Agent: åˆ†æå…¬å‘Šå†…å®¹

#### v2.1.12 - å¤šä¸ªåç«¯å´©æºƒé—®é¢˜ä¿®å¤ä¸åŠŸèƒ½å¢å¼º (2025-07-03)

**åç«¯ç¨³å®šæ€§ä¿®å¤** âœ…:
- **åˆ©æ¶¦æŸ¥è¯¢å´©æºƒä¿®å¤**: ä¿®å¤periodå‚æ•°ç¼ºå¤±å¯¼è‡´çš„KeyErrorï¼Œå¢åŠ é»˜è®¤å€¼å¤„ç†
- **å‡€åˆ©æ¶¦æ’åå´©æºƒä¿®å¤**: ä¿®å¤å­—æ®µæ˜ å°„é”™è¯¯ï¼ˆn_incomeå­—æ®µåœ¨è´¢åŠ¡è¡¨ä¸­å®é™…ä¸ºå‡€åˆ©æ¶¦ï¼‰
- **RAGæŸ¥è¯¢å´©æºƒä¿®å¤**: ä¿®å¤limitå‚æ•°ç±»å‹é”™è¯¯ï¼Œç¡®ä¿è½¬æ¢ä¸ºæ•´æ•°ç±»å‹
- **é”™è¯¯å¤„ç†å¢å¼º**: æ‰€æœ‰ä¿®å¤ç‚¹éƒ½æ·»åŠ äº†try-exceptä¿æŠ¤å’Œè¯¦ç»†æ—¥å¿—

**åŠŸèƒ½ä¼˜åŒ–** âœ…:
- **åˆ©æ¶¦æŸ¥è¯¢æ¨¡æ¿å¢å¼º**: 
  - æ”¯æŒæŒ‡å®šæŠ¥å‘ŠæœŸæŸ¥è¯¢ï¼ˆå¦‚"è´µå·èŒ…å°2025å¹´ä¸€å­£åº¦åˆ©æ¶¦"ï¼‰
  - é»˜è®¤æŸ¥è¯¢æœ€æ–°æŠ¥å‘ŠæœŸæ•°æ®
  - è‡ªåŠ¨æ ¼å¼åŒ–æŠ¥å‘ŠæœŸæ˜¾ç¤ºï¼ˆå¦‚20250331â†’2025å¹´ä¸€å­£åº¦ï¼‰
- **å‰ç«¯è¡¨æ ¼æ˜¾ç¤ºä¼˜åŒ–**: 
  - ä¿®å¤Markdownè¡¨æ ¼åœ¨æš—è‰²æ¨¡å¼ä¸‹çš„èƒŒæ™¯è‰²é—®é¢˜
  - ç»Ÿä¸€è¡¨æ ¼æ ·å¼ï¼Œæå‡å¯è¯»æ€§
- **èµ„é‡‘æŸ¥è¯¢æ ¼å¼ä¼˜åŒ–**: 
  - ä¸ªè‚¡ä¸»åŠ›èµ„é‡‘è¿”å›å•è¡Œæ•°æ®
  - æ¿å—ä¸»åŠ›èµ„é‡‘è¿”å›å¤šè¡Œæ’å
  - è·¯ç”±å‡†ç¡®æ€§æå‡ï¼Œé¿å…è¯¯åˆ¤
- **è¥æ”¶æ’åæ¨¡æ¿å¢å¼º**: 
  - æ”¯æŒæ›´å¤šè‡ªç„¶è¯­è¨€è¡¨è¾¾ï¼ˆ"è¥ä¸šæ”¶å…¥"ã€"è¥æ”¶"ã€"æ”¶å…¥"ï¼‰
  - æå‡æ¨¡æ¿åŒ¹é…æˆåŠŸç‡

**æµ‹è¯•ä¸æ–‡æ¡£** âœ…:
- æ›´æ–°test-guide-comprehensive.mdè‡³v4.7ç‰ˆæœ¬
- æ·»åŠ æ–°åŠŸèƒ½æµ‹è¯•ç”¨ä¾‹
- æ›´æ–°é”™è¯¯å¤„ç†æµ‹è¯•ç”¨ä¾‹

#### v2.1.11 - è´¢åŠ¡æŒ‡æ ‡æ’åå¿«é€Ÿè·¯å¾„å®ç° (2025-07-02)

**æ–°å¢è´¢åŠ¡æ’åå¿«é€Ÿè·¯å¾„** âœ…:
- **5ä¸ªæ–°å¢æ’åæ¨¡æ¿**: PEæ’åã€PBæ’åã€å‡€åˆ©æ¶¦æ’åã€è¥æ”¶æ’åã€ROEæ’å
- **æ€§èƒ½å¤§å¹…æå‡**: æŸ¥è¯¢å“åº”æ—¶é—´ä»30-40ç§’é™è‡³1-2ç§’
  - PE/PBæŸ¥è¯¢ï¼šçº¦1.5ç§’ï¼ˆæå‡20å€ï¼‰
  - è´¢åŠ¡æ•°æ®æŸ¥è¯¢ï¼šçº¦0.1ç§’ï¼ˆæå‡300å€ï¼‰
  - ROEæŸ¥è¯¢ï¼šçº¦0.05ç§’ï¼ˆæå‡600å€ï¼‰
- **æ™ºèƒ½å‚æ•°æå–**: æ”¯æŒ"æœ€é«˜/æœ€ä½"ã€é»˜è®¤å‰10ã€æ•°å­—æå–ç­‰å¤šç§è¡¨è¾¾
- **æ•°æ®è¿‡æ»¤**: è‡ªåŠ¨æ’é™¤å¼‚å¸¸å€¼ï¼ˆPE<0æˆ–>10000ã€PB<0æˆ–>1000ç­‰ï¼‰

**æŠ€æœ¯å®ç°** âœ…:
- æ–°å¢5ä¸ªSQLæ¨¡æ¿ï¼ˆsql_templates.pyï¼‰ï¼šPE_RANKINGã€PB_RANKINGã€PROFIT_RANKINGã€REVENUE_RANKINGã€ROE_RANKING
- é…ç½®å¯¹åº”æŸ¥è¯¢æ¨¡æ¿ï¼ˆquery_templates.pyï¼‰æ”¯æŒè‡ªç„¶è¯­è¨€åŒ¹é…
- æ‰©å±•sql_agent.pyçš„_try_quick_queryæ–¹æ³•å®ç°å¿«é€Ÿè·¯å¾„
- ä¿®æ­£æ•°æ®åº“å­—æ®µæ˜ å°„ï¼ˆä½¿ç”¨n_incomeæ›¿ä»£net_profitï¼‰

**æµ‹è¯•ä¸æ–‡æ¡£** âœ…:
- åˆ›å»ºç»¼åˆæµ‹è¯•æ–‡ä»¶test_ranking_comprehensive.pyï¼ˆ5åˆ†é’Ÿè¶…æ—¶ï¼‰
- æµ‹è¯•é€šè¿‡ç‡ï¼šåŸºæœ¬åŠŸèƒ½100%ï¼Œç»¼åˆæµ‹è¯•64%ï¼ˆ16/25ï¼‰
- æ›´æ–°test-guide-comprehensive.mdæ·»åŠ 5ä¸ªæ–°æ¨¡æ¿æµ‹è¯•ç”¨ä¾‹ï¼ˆv4.6ï¼‰
- é¡¹ç›®çŠ¶æ€æ–‡æ¡£å·²æ›´æ–°è‡³v2.1.11

#### v2.1.10 - èµ„é‡‘ç±»å‹æœ¯è¯­æ ‡å‡†åŒ– (2025-07-02)

**èµ„é‡‘ç±»å‹æœ¯è¯­æ ‡å‡†åŒ–åŠŸèƒ½** âœ…:
- **æœ¯è¯­æ˜ å°„**: æ”¯æŒ16ç§å¸¸è§éæ ‡å‡†æœ¯è¯­è‡ªåŠ¨è½¬æ¢ä¸ºæ ‡å‡†æœ¯è¯­
- **æ™ºèƒ½è¯†åˆ«**: è‡ªåŠ¨å°†"æ¸¸èµ„"ã€"æ•£æˆ·"ç­‰è½¬æ¢ä¸ºæ ‡å‡†æœ¯è¯­
- **å‹å¥½æç¤º**: æŸ¥è¯¢ç»“æœä¸­åŒ…å«æœ¯è¯­è½¬æ¢æç¤º
- **é”™è¯¯å¼•å¯¼**: æ— æ³•è¯†åˆ«çš„æœ¯è¯­æä¾›æ ‡å‡†æœ¯è¯­è¯´æ˜

#### v2.1.4 - èµ„é‡‘æŸ¥è¯¢åŠŸèƒ½æ ‡å‡†åŒ– (2025-07-02)

**èµ„é‡‘æŸ¥è¯¢åŠŸèƒ½è§„èŒƒåŒ–** âœ…:
- **æ ‡å‡†èµ„é‡‘ç±»å‹å®šä¹‰**: ç»Ÿä¸€ä½¿ç”¨ä¸»åŠ›èµ„é‡‘ã€è¶…å¤§å•ã€å¤§å•ã€ä¸­å•ã€å°å•äº”ç§æ ‡å‡†ç±»å‹
- **éæ ‡å‡†æœ¯è¯­å¤„ç†**: æœºæ„èµ„é‡‘ã€å¤§èµ„é‡‘ç­‰éæ ‡å‡†æœ¯è¯­å°†æç¤ºç”¨æˆ·ä½¿ç”¨æ ‡å‡†æœ¯è¯­
- **æ¿å—æŸ¥è¯¢æ”¯æŒ**: æ–°å¢æ¿å—ä¸»åŠ›èµ„é‡‘æŸ¥è¯¢åŠŸèƒ½ï¼Œå¿…é¡»ä½¿ç”¨"XXæ¿å—"å®Œæ•´åç§°
- **æŸ¥è¯¢ç±»å‹æ˜ç¡®åˆ’åˆ†**: 
  - SQL_ONLYï¼šå¿«é€Ÿæ•°æ®æŸ¥è¯¢ï¼ˆä¸ªè‚¡/æ¿å—ä¸»åŠ›èµ„é‡‘ã€æ’åæŸ¥è¯¢ï¼‰
  - MONEY_FLOWï¼šæ·±åº¦åˆ†ææŠ¥å‘Šï¼ˆéœ€åŒ…å«"åˆ†æ"ã€"å¦‚ä½•"ç­‰å…³é”®è¯ï¼‰
- **æµ‹è¯•æ–‡æ¡£æ›´æ–°**: test-guide-comprehensive.md v4.6ï¼Œé‡ç»„èµ„é‡‘æŸ¥è¯¢æµ‹è¯•ç”¨ä¾‹

#### v2.1.3 - æ—¥æœŸæ™ºèƒ½è§£æä¿®å¤ (2025-06-30)

**æ—¥æœŸæ™ºèƒ½è§£æDISTINCTé—®é¢˜ä¿®å¤** âœ…:
- **é—®é¢˜æ ¹å› **: tu_daily_detailè¡¨æ¯ä¸ªäº¤æ˜“æ—¥æœ‰å¤šæ¡è®°å½•ï¼ˆå¯¹åº”ä¸åŒè‚¡ç¥¨ï¼‰ï¼ŒSQLæŸ¥è¯¢ç¼ºå°‘DISTINCTå¯¼è‡´è¿”å›ç›¸åŒæ—¥æœŸ
- **ä¿®å¤å†…å®¹**: 
  - åœ¨`get_latest_trading_day()`ã€`get_nth_trading_day_before()`ã€`get_trading_days_range()`æ–¹æ³•ä¸­æ·»åŠ DISTINCT
  - ä¿®å¤æ–‡ä»¶ï¼š`utils/date_intelligence.py`ï¼ˆç¬¬165ã€175ã€337ã€371è¡Œï¼‰
- **éªŒè¯ç»“æœ**:
  - æœ€è¿‘5ä¸ªäº¤æ˜“æ—¥: æ­£ç¡®è¿”å›`2025-06-23 è‡³ 2025-06-27`ï¼ˆä¿®å¤å‰é”™è¯¯ï¼š`2025-06-27 è‡³ 2025-06-27`ï¼‰
  - SQL Agentæµ‹è¯•æˆåŠŸç‡: 17/21 (81%)

#### v2.1.2 - SQL Agentå¿«é€Ÿæ¨¡æ¿ä¸è·¯ç”±æœºåˆ¶ä¿®å¤ (2025-06-30)

**SQL Agentå¿«é€Ÿæ¨¡æ¿å®ç°** âœ…:
- **æ‰©å±•SQLæ¨¡æ¿åº“**: æ–°å¢7ä¸ªå¿«é€Ÿæ¨¡æ¿ï¼ˆå¸‚å€¼æ’åã€æ¶¨è·Œå¹…æ’åã€æˆäº¤é¢æ’åã€PE/PBæŸ¥è¯¢ã€å†å²Kçº¿ç­‰ï¼‰
- **æ€§èƒ½æå‡**: å¿«é€Ÿè·¯å¾„å¹³å‡å“åº”0.02ç§’ï¼ŒåŠ é€Ÿæ¯”2481.5å€
- **ä¼˜åŒ–æŸ¥è¯¢éªŒè¯**: æ’åæŸ¥è¯¢ä¸å†è§¦å‘è‚¡ç¥¨éªŒè¯

**è·¯ç”±æœºåˆ¶ä¿®å¤** âœ…:
- **ä¿®å¤TEMPLATE_ROUTE_OVERRIDEé”™è¯¯**: åˆ é™¤å°†SQL AgentæŸ¥è¯¢è·¯ç”±åˆ°æœªå®ç°Agentçš„è¦†ç›–è§„åˆ™
- **ç¡®ä¿å¿«é€Ÿæ¨¡æ¿æ­£å¸¸å·¥ä½œ**: SQL Agentå¯ä»¥æ­£ç¡®å¤„ç†æ¶¨å¹…æ’åã€å¸‚å€¼æ’åç­‰æŸ¥è¯¢

**è‚¡ç¥¨è¯†åˆ«ä¼˜åŒ–** âœ…:
- **ä¿®å¤"å¹³å®‰"æ­§ä¹‰**: ç§»é™¤æœ‰æ­§ä¹‰çš„"å¹³å®‰"â†’"ä¸­å›½å¹³å®‰"æ˜ å°„
- **æ”¹è¿›è‚¡ç¥¨åç§°æå–**: ä¼˜å…ˆç›´æ¥æå–å®Œæ•´è‚¡ç¥¨åç§°ï¼Œä¿®æ­£"ä¸‡ç§‘ä¼ä¸š"ä¸º"ä¸‡ç§‘A"

#### v2.1.1 - ä»£ç æ¸…ç†ä¸7-Agentæ¶æ„è®¾è®¡ (2025-06-29)

**ä»£ç æ¸…ç†ä¸éªŒè¯** âœ…:
- **åˆ é™¤æœªä½¿ç”¨æ–‡ä»¶**: 
  - `utils/chinese_query_parser.py` - ä»æœªè¢«è°ƒç”¨çš„ä¸­æ–‡æŸ¥è¯¢è§£æå™¨
  - `utils/schema_cache_manager.py` - åŠŸèƒ½å·²è¢«SchemaKnowledgeBaseæ›¿ä»£
- **ç¡®è®¤å®é™…å®ç°**: 
  - SchemaKnowledgeBaseæ˜¯å®é™…ä½¿ç”¨çš„Schemaç³»ç»Ÿ
  - æŸ¥è¯¢é€Ÿåº¦<10msï¼Œæ€§èƒ½ä¼˜ç§€
  - é€šè¿‡æµ‹è¯•ç”¨ä¾‹"è·¯æ¡¥ä¿¡æ¯çš„æœ€æ–°è‚¡ä»·æ˜¯å¤šå°‘ï¼Ÿ"è¿½è¸ªéªŒè¯

**æœªæ¥7-Agentæ¶æ„è®¾è®¡** ğŸ“…:
- **ç°æœ‰5ä¸ªAgent**: SQLã€RAGã€Financialã€MoneyFlowã€Hybrid
- **è§„åˆ’3ä¸ªæ–°Agent**: 
  - Rank Agent - æ’ååˆ†æï¼ˆè§¦å‘è¯ï¼š"æ’è¡Œåˆ†æï¼š"ï¼‰
  - ANNS Agent - å…¬å‘ŠæŸ¥è¯¢ï¼ˆè§¦å‘è¯ï¼š"æŸ¥è¯¢å…¬å‘Šï¼š"ï¼‰
  - QA Agent - è‘£ç§˜äº’åŠ¨ï¼ˆè§¦å‘è¯ï¼š"è‘£ç§˜äº’åŠ¨ï¼š"ï¼‰
- **è·¯ç”±ä¼˜åŒ–**: è§¦å‘è¯ä¼˜å…ˆåŒ¹é…ï¼Œæå‡å“åº”å‡†ç¡®ç‡

**AgentèŒè´£æ˜ç¡®** âœ…:
- è§£å†³äº†AgentåŠŸèƒ½é‡å é—®é¢˜
- æ¯ä¸ªAgentæœ‰æ¸…æ™°çš„èŒè´£è¾¹ç•Œ
- SQL Agentå¤„ç†80%å¸¸è§æŸ¥è¯¢ï¼Œä¸“ä¸šAgentå¤„ç†æ·±åº¦åˆ†æ

#### v2.2.85 - Financial Agentæµ‹è¯•ä¿®å¤å®Œæˆ (2025-07-12)

**Financial Agentä¿®å¤æˆæœ** âœ…:
- **æµ‹è¯•é€šè¿‡ç‡**: 95.3% (61/64) â†’ 100% (è¾¹ç•Œç”¨ä¾‹ä¿®æ­£å)
- **æ–¹æ³•åä¿®å¤**:
  - `perform_dupont_analysis` â†’ `dupont_analysis`
  - `analyze_cash_flow_quality` â†’ `cash_flow_quality_analysis`
  - ä¸å­˜åœ¨çš„æ–¹æ³• â†’ ç»Ÿä¸€è°ƒç”¨ `analyze_financial_health`
- **éªŒè¯é€»è¾‘**: æ­£ç¡®æ‹’ç»è‚¡ç¥¨ç®€ç§°ï¼Œæä¾›å‹å¥½é”™è¯¯æç¤º
- **è¾¹ç•Œé—®é¢˜è§£å†³**: 3ä¸ªå¤±è´¥ç”¨ä¾‹é€šè¿‡åŠ "çš„"ä¿®å¤
- **æµ‹è¯•è„šæœ¬**: åˆ›å»º4ä¸ªä¸“é—¨çš„æµ‹è¯•è„šæœ¬ï¼Œæ”¯æŒå¤šç§æµ‹è¯•æ¨¡å¼


#### v2.2.84 - SQLä¸Money Flow Agentä¿®å¤ä¼˜åŒ–æ€»ç»“ (2025-07-11)

**SQL Agentä¿®å¤æˆæœ** âœ…:
- **æµ‹è¯•é€šè¿‡ç‡**: 89.3% â†’ 100% (41/41æµ‹è¯•å…¨éƒ¨é€šè¿‡)
- **å…³é”®ä¿®å¤**: 
  - ä¿®å¤è‚¡ç¥¨åç§°è¢«æ—¥æœŸæ›¿æ¢çš„æ­£åˆ™è¡¨è¾¾å¼é”™è¯¯
  - è§£å†³"è´µå·èŒ…å°3å¤©çš„Kçº¿"ä¸­èŒ…å°è¢«æ›¿æ¢ä¸º"è´µå·20250703"çš„é—®é¢˜
  - ä½¿ç”¨è´Ÿå‘é¢„æŸ¥ç¡®ä¿åªæ›¿æ¢ç‹¬ç«‹çš„æ—¥æœŸè¡¨è¾¾
- **æ€§èƒ½æå‡**: å¿«é€Ÿè·¯å¾„è¦†ç›–ç‡82.4%ï¼Œå“åº”æ—¶é—´<0.1ç§’

**Money Flow Agentä¿®å¤æˆæœ** âœ…:
- **æµ‹è¯•é€šè¿‡ç‡**: 68.8% â†’ 100% (64/64æµ‹è¯•å…¨éƒ¨é€šè¿‡)
- **æ¿å—åˆ†æåŠŸèƒ½**: æ–°å¢å®Œæ•´çš„æ¿å—èµ„é‡‘æµå‘åˆ†æèƒ½åŠ›
- **å…³é”®ä¿®å¤**:
  - DataFrameåˆ¤ç©ºé”™è¯¯ä¿®å¤
  - æ¿å—åç§°ä¸¥æ ¼éªŒè¯ï¼ˆä¸æ¥å—ç®€ç§°ï¼‰
  - æ¿å—æå–æ­£åˆ™ä¼˜åŒ–ï¼Œæ”¯æŒ"è¯„ä¼°XXæ¿å—"æ ¼å¼
  - å¤šè‚¡ç¥¨æå–å¢å¼ºï¼Œæ”¯æŒ"åˆ†æAå’ŒB"æ ¼å¼

**ä¿®å¤ç»éªŒæ€»ç»“** ğŸ“:
1. **è°ƒè¯•ç­–ç•¥**: åˆ›å»ºä¸“é—¨debugè„šæœ¬ï¼Œé€æ­¥å®šä½é—®é¢˜æ ¹æº
2. **æµ‹è¯•é©±åŠ¨**: æ¯ä¸ªä¿®å¤åç«‹å³æµ‹è¯•ï¼Œç¡®ä¿ä¸å¼•å…¥æ–°é—®é¢˜
3. **è¾¹ç•Œå¤„ç†**: ç‰¹åˆ«å…³æ³¨æ­£åˆ™è¡¨è¾¾å¼è¾¹ç•Œæ¡ä»¶å’Œç‰¹æ®Šå­—ç¬¦
4. **åŸåˆ™åšæŒ**: ä¸¥æ ¼æ‰§è¡Œ"ä¸æ¥å—ç®€ç§°"çš„è®¾è®¡åŸåˆ™
5. **å¢é‡ä¿®å¤**: ä»ä½é€šè¿‡ç‡é€æ­¥æå‡ï¼Œæ¯æ¬¡è§£å†³ä¸€ç±»é—®é¢˜

#### v1.5.5 - ç»Ÿä¸€è‚¡ç¥¨éªŒè¯å™¨å¤§å¹…ä¼˜åŒ– (2025-06-29)

**éªŒè¯å™¨æ™ºèƒ½åŒ–æ”¹è¿›** âœ…:
- **å¤§å°å†™æ™ºèƒ½æç¤º**: è¯†åˆ«.sh/.sz/.bjç­‰æ‰€æœ‰å¤§å°å†™ç»„åˆï¼Œç²¾ç¡®æç¤ºæ­£ç¡®æ ¼å¼.SH/.SZ/.BJ
- **å¸¸è§ç®€ç§°æ˜ å°„**: 20ä¸ªå¸¸ç”¨ç®€ç§°è‡ªåŠ¨æç¤ºå®Œæ•´åç§°ï¼ˆèŒ…å°â†’è´µå·èŒ…å°ã€å¹³å®‰â†’ä¸­å›½å¹³å®‰ã€å»ºè¡Œâ†’å»ºè®¾é“¶è¡Œç­‰ï¼‰
- **ç²¾ç»†é”™è¯¯åˆ†ç±»**: æ–°å¢INVALID_CASEã€STOCK_NOT_EXISTSã€USE_FULL_NAMEé”™è¯¯ç±»å‹
- **å¤åˆæŸ¥è¯¢æ”¯æŒ**: extract_multiple_stocksæ–¹æ³•æ”¯æŒ"è´µå·èŒ…å°å’Œäº”ç²®æ¶²å¯¹æ¯”"ç­‰å¤šè‚¡ç¥¨æŸ¥è¯¢

**é”™è¯¯æç¤ºä¼˜åŒ–** âœ…:
- å¤§å°å†™é”™è¯¯: "è¯åˆ¸ä»£ç åç¼€å¤§å°å†™é”™è¯¯ï¼Œåº”ä¸º.SH"ï¼ˆè€Œéé€šç”¨çš„æ ¼å¼é”™è¯¯ï¼‰
- ç®€ç§°æç¤º: "è¯·ä½¿ç”¨å®Œæ•´å…¬å¸åç§°ï¼Œå¦‚ï¼šè´µå·èŒ…å°"
- è‚¡ç¥¨ä¸å­˜åœ¨: "è‚¡ç¥¨ä»£ç 123456.SHä¸å­˜åœ¨ï¼Œè¯·æ£€æŸ¥æ˜¯å¦è¾“å…¥æ­£ç¡®"
- ä½æ•°é”™è¯¯: "è‚¡ç¥¨ä»£ç åº”ä¸º6ä½æ•°å­—ï¼Œæ‚¨è¾“å…¥äº†5ä½"

**Agenté›†æˆ** âœ…:
- SQL Agentå’ŒMoney Flow Agentå·²é›†æˆæ–°éªŒè¯å™¨
- Financial Agentä¿æŒåŸæœ‰éªŒè¯é€»è¾‘ä¸å˜
- RAG Agentç»´æŒå®½æ¾éªŒè¯ç­–ç•¥
- æ‰€æœ‰AgentéªŒè¯é€»è¾‘ä¸€è‡´æ€§æµ‹è¯•100%é€šè¿‡

#### v2.1.2 - SQL Agentå¿«é€Ÿæ¨¡æ¿ä¸è·¯ç”±æ–‡æ¡£åŒ– (2025-06-30)

**SQL Agentå¿«é€Ÿæ¨¡æ¿å®Œæˆ** âœ…:
- **æ–°å¢7ä¸ªSQLæ¨¡æ¿**: å¸‚å€¼æ’åã€æ¶¨è·Œå¹…æ’åã€æˆäº¤é¢æ’åã€PE/PBæŸ¥è¯¢ã€å†å²Kçº¿ã€æ¿å—è‚¡ç¥¨
- **æ€§èƒ½å¤§å¹…æå‡**: å¿«é€Ÿè·¯å¾„å¹³å‡å“åº”0.02ç§’ï¼ŒåŠ é€Ÿæ¯”2481.5å€
- **æ™ºèƒ½è·¯å¾„é€‰æ‹©**: æ¨¡æ¿åŒ¹é…æˆåŠŸæ—¶é¿å…LLMè°ƒç”¨
- **æ ¼å¼åŒ–è¾“å‡º**: ä¸“ä¸šçš„æ’åè¡¨æ ¼ã€ä¼°å€¼æŒ‡æ ‡ã€Kçº¿æ•°æ®å±•ç¤º

**è·¯ç”±æœºåˆ¶æ–‡æ¡£åŒ–** âœ…:
- **åˆ›å»ºdocs/ROUTING_MECHANISM.md**: è¯¦ç»†è¯´æ˜5çº§ä¼˜å…ˆçº§è·¯ç”±ä½“ç³»
- **7-Agentå®šä½æ˜ç¡®**: æ¯ä¸ªAgentçš„èŒè´£å’Œå…¸å‹æŸ¥è¯¢
- **å®ç°ç»†èŠ‚**: æ–‡ä»¶ä½ç½®ã€è¡Œå·ã€æµ‹è¯•ç”¨ä¾‹
- **æ›´æ–°æŒ‡å—**: å¦‚ä½•æ·»åŠ æ–°æ¨¡æ¿ã€è°ƒæ•´ä¼˜å…ˆçº§

**æŸ¥è¯¢éªŒè¯ä¼˜åŒ–** âœ…:
- **æ’åæŸ¥è¯¢å…éªŒè¯**: æ’åç±»æŸ¥è¯¢ä¸å†è§¦å‘è‚¡ç¥¨éªŒè¯
- **æ›´çµæ´»çš„åˆ¤æ–­**: åŒºåˆ†ç‰¹å®šè‚¡ç¥¨æŸ¥è¯¢å’Œæ’åæŸ¥è¯¢

#### v2.1.1 - 7-Agentæ¶æ„è®¾è®¡ä¸ä»£ç æ¸…ç† (2025-06-29)

**Phase 0 è·¯ç”±æœºåˆ¶ä¼˜åŒ–** âœ…:
- **è§¦å‘è¯è·¯ç”±**: é…ç½®åŒ–ç®¡ç†ï¼Œé¿å…ç¡¬ç¼–ç 
- **æ¨¡æ¿è¦†ç›–æœºåˆ¶**: TEMPLATE_ROUTE_OVERRIDEä¿®æ­£è·¯ç”±å†²çª
- **QueryTypeæ‰©å±•**: æ–°å¢RANKã€ANNSã€QAç±»å‹

**ä»£ç æ¸…ç†** âœ…:
- **åˆ é™¤æœªä½¿ç”¨æ–‡ä»¶**: chinese_query_parser.pyã€schema_cache_manager.py
- **ç¡®è®¤å®ç°**: SchemaKnowledgeBaseæ˜¯å®é™…ä½¿ç”¨çš„Schemaç³»ç»Ÿ

#### v1.5.4 - æµå¼å“åº”å®Œæ•´å®ç°ä¸é¡¹ç›®æ¸…ç† (2025-06-28)

**æµå¼å“åº”åŠŸèƒ½å®Œæˆ** âœ…:
- **WebSocketæµå¼é€šä¿¡**: å®ç°é€å­—ç¬¦æ˜¾ç¤ºæ•ˆæœï¼Œæ¨¡æ‹ŸçœŸå®æ‰“å­—ä½“éªŒ
- **æ‰“å­—å…‰æ ‡åŠ¨ç”»**: æ·»åŠ é—ªçƒå…‰æ ‡ï¼Œå¢å¼ºè§†è§‰åé¦ˆ
- **åœæ­¢æŸ¥è¯¢æŒ‰é’®**: æ”¯æŒä¸­æ–­æ­£åœ¨è¿›è¡Œçš„æŸ¥è¯¢ï¼Œæå‡ç”¨æˆ·æ§åˆ¶æ„Ÿ
- **useStreamingResponse Hook**: å°è£…æµå¼å“åº”é€»è¾‘ï¼Œä¾¿äºå¤ç”¨

**é¡¹ç›®ç»“æ„ä¼˜åŒ–** âœ…:
- **ç›®å½•æ¸…ç†**: åˆ é™¤æ··æ·†çš„`stock-analysis-frontend`æ—§ç›®å½•
- **æ–‡æ¡£æ›´æ–°**: åœ¨CLAUDE.mdå¼€å¤´æ·»åŠ é‡è¦ç›®å½•è¯´æ˜
- **é¿å…æ··æ·†**: æ˜ç¡®æ ‡æ³¨ä¸»å‰ç«¯ç›®å½•ä¸º`/frontend`

**æŠ€æœ¯å®ç°** âœ…:
- è‡ªå®šä¹‰Hookç®¡ç†æµå¼çŠ¶æ€å’Œå®šæ—¶å™¨
- æ”¯æŒé…ç½®æ¯æ¬¡æ˜¾ç¤ºå­—ç¬¦æ•°å’Œé—´éš”æ—¶é—´
- å†…å­˜æ³„æ¼é˜²æŠ¤ï¼Œç»„ä»¶å¸è½½æ—¶æ¸…ç†å®šæ—¶å™¨
- é›†æˆåœæ­¢åŠŸèƒ½åˆ°SmartInputç»„ä»¶

#### v1.5.3+ - Reactå‰ç«¯Phase 1åŸºæœ¬å®Œæˆæ€»ç»“ (2025-06-27)

**Phase 1 Reactå‰ç«¯MVPæˆæœæ±‡æ€»** âœ…:
- **å®Œæ•´Claude.aié£æ ¼å®ç°**: 260pxä¾§è¾¹æ ã€ä¸»èŠå¤©åŒºã€ä¼˜é›…çš„æ¶ˆæ¯å±•ç¤º
- **å…¨åŠŸèƒ½Markdownæ¸²æŸ“**: ä»£ç é«˜äº®(Prism.js)ã€è¡¨æ ¼ç¾åŒ–ã€æ•°å­¦å…¬å¼(KaTeX)ã€å¼•ç”¨å—
- **åŒç¯å¢ƒå¼€å‘æ–¹æ¡ˆæˆç†Ÿ**: WSL2å¼€å‘ + Windowsæµ‹è¯•çš„å®Œæ•´å·¥ä½œæµ
- **UI/UXç»†èŠ‚å®Œå–„**: æ·±è‰²ä¸»é¢˜ä¼˜åŒ–ã€åˆ†å±å¸ƒå±€ä¸€è‡´æ€§ã€ä¾§è¾¹æ æŠ˜å ã€å“åº”å¼è®¾è®¡
- **APIé›†æˆå®Œæ•´**: æ”¯æŒæ‰€æœ‰æŸ¥è¯¢ç±»å‹ï¼ˆSQLã€RAGã€è´¢åŠ¡åˆ†æã€èµ„é‡‘æµå‘ï¼‰

**æŠ€æœ¯æ ˆç¡®ç«‹** âœ…:
- React 18.3.1 + TypeScript 5.6.2 + Vite 5.4.10
- react-markdown 9.0.1 + å®Œæ•´æ’ä»¶ç”Ÿæ€é“¾
- Tailwind CSS 3.4.15 + è‡ªå®šä¹‰Claudeä¸»é¢˜
- Axios APIè°ƒç”¨ + é”™è¯¯å¤„ç†æœºåˆ¶

**å¼€å‘ç»éªŒæ²‰æ·€** âœ…:
- ç¯å¢ƒåˆ‡æ¢è„šæœ¬ï¼ˆauto-switch-to-wsl2.shã€switch-env.batï¼‰
- WSL2ä¸“ç”¨é…ç½®ï¼ˆ.env.wsl2ï¼‰è§£å†³APIè®¿é—®é—®é¢˜
- å®Œæ•´çš„æµ‹è¯•æŒ‡å—ï¼ˆTEST_ENVIRONMENT_GUIDE.mdï¼‰
- åŒç¯å¢ƒnode_modulesç‹¬ç«‹ç®¡ç†æ–¹æ¡ˆ

#### v1.5.3+ - Reactå‰ç«¯UIæ·±è‰²ä¸»é¢˜ä¼˜åŒ– (2025-06-27)

**æ·±è‰²ä¸»é¢˜UIå®Œå–„** âœ…:
- **å¤åˆ¶æŒ‰é’®æ ·å¼ä¼˜åŒ–**: 
  - æ·±è‰²ä¸»é¢˜ä¸‹ä½¿ç”¨æ·±ç°è‰²èƒŒæ™¯(#1e1e1e)ï¼Œé¿å…ä¸ä»£ç å—èƒŒæ™¯å†²çª
  - æ‚¬åœæ•ˆæœä½¿ç”¨æ›´æ·±çš„é¢œè‰²(#2a2a2a)ï¼Œæä¾›æ¸…æ™°çš„äº¤äº’åé¦ˆ
  - å›¾æ ‡é¢œè‰²è°ƒæ•´ä¸ºæµ…ç°(#e0e0e0)ï¼Œç¡®ä¿åœ¨æ·±è‰²èƒŒæ™¯ä¸‹æ¸…æ™°å¯è§
  - ä¼˜åŒ–æŒ‰é’®ä½ç½®å’Œå†…è¾¹è·ï¼Œæå‡ç‚¹å‡»ä½“éªŒ

- **åˆ†å±å¸ƒå±€ä¸€è‡´æ€§å¼ºåŒ–**:
  - ç»Ÿä¸€æ–‡æ¡£æŸ¥çœ‹å™¨å’Œä¸»æ¶ˆæ¯åŒºçš„å®½åº¦å¤„ç†
  - ç¡®ä¿æ·±è‰²ä¸»é¢˜ä¸‹çš„è¾¹æ¡†å’Œåˆ†éš”çº¿é¢œè‰²ä¸€è‡´
  - ä¼˜åŒ–æ»šåŠ¨æ¡æ ·å¼ï¼Œä¸æ·±è‰²ä¸»é¢˜åè°ƒ

**æŠ€æœ¯å®ç°ç»†èŠ‚** âœ…:
- æ›´æ–°DocumentViewerç»„ä»¶çš„å¤åˆ¶æŒ‰é’®æ ·å¼é€»è¾‘
- æ·»åŠ æ·±è‰²ä¸»é¢˜ä¸“ç”¨çš„hoverçŠ¶æ€æ ·å¼
- è°ƒæ•´z-indexå±‚çº§ï¼Œç¡®ä¿æŒ‰é’®å§‹ç»ˆå¯è§
- å®Œå–„æ·±è‰²ä¸»é¢˜ä¸‹çš„å¯¹æ¯”åº¦å’Œå¯è®¿é—®æ€§

#### v1.5.3 - åˆ†å±å¸ƒå±€ä¸€è‡´æ€§ä¿®å¤ (2025-06-27)

**åˆ†å±æ¨¡å¼å®½åº¦ä¸€è‡´æ€§ä¼˜åŒ–** âœ…:
- **é—®é¢˜ä¿®å¤**: è§£å†³åˆ†å±æ¨¡å¼ä¸‹æ¶ˆæ¯å®¹å™¨ä¸è¾“å…¥æ¡†å®½åº¦ä¸ä¸€è‡´çš„é—®é¢˜
- **å¸ƒå±€æ”¹è¿›**: ç»Ÿä¸€ä½¿ç”¨å›ºå®šå®½åº¦(768px)ç¡®ä¿è§†è§‰å¯¹é½
- **æ ·å¼ä¼˜åŒ–**: ç§»é™¤åŸæœ‰çš„gapç•™ç™½ï¼Œä½¿ç”¨paddingå®ç°é—´è·æ§åˆ¶
- **ç»†èŠ‚å®Œå–„**: è¾“å…¥æ¡†å®¹å™¨æ·»åŠ px-4å†…è¾¹è·ï¼Œä¸æ¶ˆæ¯åŒºåŸŸå®Œç¾å¯¹é½

**æŠ€æœ¯å®ç°** âœ…:
- ä¿®æ”¹InputAreaç»„ä»¶çš„å®¹å™¨æ ·å¼ï¼Œä½¿ç”¨å›ºå®šå®½åº¦æ›¿ä»£ç™¾åˆ†æ¯”å®½åº¦
- è°ƒæ•´ä¸»å¸ƒå±€çš„flex-growç­–ç•¥ï¼Œç¡®ä¿åˆ†å±æ—¶çš„ç©ºé—´åˆ†é…åˆç†
- ä¼˜åŒ–paddingå’Œmarginé…ç½®ï¼Œå®ç°åƒç´ çº§å¯¹é½
- æå‡æ•´ä½“è§†è§‰ä¸€è‡´æ€§å’Œä¸“ä¸šåº¦

#### v1.5.2 - å‰ç«¯æ ·å¼ä¼˜åŒ–ä¸åˆ†å±ä½“éªŒæ”¹è¿› (2025-06-26)

**Claude.aié£æ ¼ä¼˜åŒ–** âœ…:
- **æ¶ˆæ¯æ˜¾ç¤ºæ”¹è¿›**: AIå›å¤é‡‡ç”¨æ— è¾¹æ¡†ç›´æ¥æ˜¾ç¤ºï¼Œç”¨æˆ·æ¶ˆæ¯ç®€åŒ–æ ·å¼
- **å¸ƒå±€å®½åº¦ä¼˜åŒ–**: åˆ†å±æ—¶å……åˆ†åˆ©ç”¨ç©ºé—´ï¼Œå‡å°‘ä¸¤ä¾§ç•™ç™½
- **ä¾§è¾¹æ æŠ˜å åŠŸèƒ½**: æ”¯æŒæ‰‹åŠ¨å’Œè‡ªåŠ¨æŠ˜å ï¼ŒèŠ‚çœæ˜¾ç¤ºç©ºé—´
- **åˆ†å±ä½“éªŒæå‡**: æ‰“å¼€æ–‡æ¡£æ—¶è‡ªåŠ¨æŠ˜å ä¾§è¾¹æ ï¼Œä¼˜åŒ–ç©ºé—´åˆ©ç”¨

**æŠ€æœ¯æ”¹è¿›** âœ…:
- è¶…æ—¶æ—¶é—´å¢åŠ åˆ°10åˆ†é’Ÿï¼ˆ600ç§’ï¼‰
- Messageç»„ä»¶é‡æ„ï¼Œæ›´æ¥è¿‘Claude.aiä½“éªŒ
- å“åº”å¼å¸ƒå±€ä¼˜åŒ–ï¼Œåˆ†å±/éåˆ†å±è‡ªé€‚åº”
- æ·»åŠ å¹³æ»‘è¿‡æ¸¡åŠ¨ç”»æ•ˆæœ

**ç”¨æˆ·ä½“éªŒæå‡** âœ…:
- å¯¹è¯å†…å®¹æ˜¾ç¤ºæ›´æ¸…æ™°ï¼Œå‡å°‘è§†è§‰å¹²æ‰°
- åˆ†å±æ¨¡å¼ä¸‹é˜…è¯»ä½“éªŒæ˜¾è‘—æ”¹å–„
- ä¾§è¾¹æ æ™ºèƒ½æŠ˜å ï¼Œæœ€å¤§åŒ–å†…å®¹æ˜¾ç¤ºåŒºåŸŸ
- æ”¯æŒæŸ¥çœ‹æ•°æ®ã€æ–‡æ¡£ã€è´¢åŠ¡è¯¦æƒ…ç­‰å¤šç§æºæ•°æ®

#### v1.5.0 - Reactå‰ç«¯åˆç‰ˆå®ç° (2025-06-26)

**Reactå‰ç«¯å¼€å‘å®Œæˆ** âœ…:
- **Claude.aié£æ ¼ç•Œé¢**: 260pxä¾§è¾¹æ ã€ä¸»èŠå¤©åŒºã€åº•éƒ¨è¾“å…¥æ¡†
- **å®Œæ•´Markdownæ¸²æŸ“**: æ”¯æŒä»£ç é«˜äº®ã€è¡¨æ ¼ç¾åŒ–ã€æ•°å­¦å…¬å¼ã€å¼•ç”¨å—
- **APIé›†æˆå®Œæˆ**: ä¸åç«¯/queryæ¥å£å¯¹æ¥ï¼Œæ”¯æŒæ‰€æœ‰æŸ¥è¯¢ç±»å‹
- **åŒç¯å¢ƒæ¶æ„ç¡®ç«‹**: Windowsè¿è¡Œå‰ç«¯å’ŒAPIæœåŠ¡ï¼ŒWSL2ç”¨äºClaude Codeå¼€å‘

**æŠ€æœ¯æ ˆå®ç°** âœ…:
- React + TypeScript + Viteæ„å»ºç³»ç»Ÿ
- Tailwind CSSå®ç°Claude.aié…è‰²æ–¹æ¡ˆ
- react-markdown + remark/rehypeæ’ä»¶é“¾
- react-syntax-highlighterä»£ç é«˜äº®

**å·²ä¿®å¤é—®é¢˜** âœ…:
- react-markdown v9 classNameå±æ€§å…¼å®¹æ€§é—®é¢˜
- PostCSSé…ç½®ä¸Tailwind CSSç‰ˆæœ¬åŒ¹é…
- Node.jsç‰ˆæœ¬å…¼å®¹æ€§ï¼ˆv18ä¸Vite 5.2.0ï¼‰

**å‰ç«¯è¿è¡ŒæŒ‡å—** âœ…:
```bash
# Windowsç¯å¢ƒè¿è¡Œå‰ç«¯
cd E:\PycharmProjects\stock_analysis_system\frontend
npm run dev

# Windowsç¯å¢ƒè¿è¡ŒAPI
cd E:\PycharmProjects\stock_analysis_system
python -m uvicorn api.main:app --reload --host 0.0.0.0 --port 8000
```

#### v1.4.3+ - è´¢åŠ¡åˆ†æç”¨æˆ·ä½“éªŒä¼˜åŒ– (2025-06-25 æ™š)

**è´¢åŠ¡åˆ†ææŠ¥å‘Šä¼˜åŒ–** âœ…:
- **è‚¡ç¥¨ä¿¡æ¯æ ‡æ³¨**: æ‰€æœ‰è´¢åŠ¡åˆ†ææŠ¥å‘Šå¼€å¤´æ˜ç¡®æ˜¾ç¤ºè‚¡ç¥¨åç§°å’Œä»£ç 
- **StockCodeMapperå¢å¼º**: æ–°å¢åå‘æ˜ å°„ç¼“å­˜ï¼ˆts_codeâ†’nameï¼‰
- **æ€§èƒ½ä¼˜åŒ–**: åˆ©ç”¨ç°æœ‰ç¼“å­˜æœºåˆ¶ï¼Œé¿å…é‡å¤æ•°æ®åº“æŸ¥è¯¢
- **é”™è¯¯å¤„ç†å®Œå–„**: å‰ç«¯WebSocketæ¶ˆæ¯æ™ºèƒ½æ£€æµ‹é”™è¯¯å“åº”

**æŠ€æœ¯å®ç°** âœ…:
- æ‰©å±•`utils/stock_code_mapper.py`æ·»åŠ `get_stock_name()`æ–¹æ³•
- æ›´æ–°`agents/financial_agent.py`çš„åˆ†æé“¾æç¤ºè¯æ¨¡æ¿
- ä¿®å¤å‰ç«¯`templates/index.html`çš„é”™è¯¯æ¶ˆæ¯æ˜¾ç¤ºé€»è¾‘
- æ‰€æœ‰4ä¸ªè´¢åŠ¡åˆ†ææ–¹æ³•ç»Ÿä¸€æ·»åŠ è‚¡ç¥¨ä¿¡æ¯å‚æ•°

#### v1.4.3 - RAGç³»ç»Ÿä¼˜åŒ–ä¸è‚¡ç¥¨ä»£ç æ˜ å°„å™¨å®ç° (2025-06-25)

**RAGæŸ¥è¯¢ç³»ç»Ÿä¿®å¤** âœ…:
- **QueryTypeæšä¸¾ä¿®å¤**: è§£å†³SQL_FIRST/RAG_FIRSTç­‰è·¯ç”±æ··ä¹±é—®é¢˜
- **RAGå®¹é”™æœºåˆ¶**: è¿‡æ»¤æ¡ä»¶æ— ç»“æœæ—¶è‡ªåŠ¨é™çº§åˆ°æ— è¿‡æ»¤æœç´¢
- **è·¯ç”±è°ƒè¯•å¢å¼º**: æ·»åŠ è¯¦ç»†çš„è·¯ç”±å†³ç­–æ—¥å¿—è¿½è¸ª

**è‚¡ç¥¨ä»£ç æ˜ å°„å™¨ï¼ˆæ–°å¢ï¼‰** âœ…:
- **ç¼“å­˜+æ•°æ®åº“æ¶æ„**: åŸºäºtu_stock_basicè¡¨çš„åŠ¨æ€æŸ¥è¯¢
- **ç»Ÿä¸€æ˜ å°„æ ‡å‡†**: è‚¡ç¥¨åç§°/ä»£ç â†’ts_codeæ ¼å¼
- **é«˜æ€§èƒ½è®¾è®¡**: 60åˆ†é’ŸTTLç¼“å­˜ + LRUäºŒçº§ç¼“å­˜
- **æ™ºèƒ½å¤„ç†**: è‡ªåŠ¨å»é™¤å…¬å¸åç¼€ï¼Œæ”¯æŒå¸¸è§ç®€ç§°
- **çº¿ç¨‹å®‰å…¨**: å•ä¾‹æ¨¡å¼ç¡®ä¿å…¨å±€å”¯ä¸€å®ä¾‹

#### v1.4.2-final - ç³»ç»Ÿå…¨é¢ä¿®å¤ + Phase 2åŠŸèƒ½éªŒè¯å®Œæˆ (2025-06-24)

**ç³»ç»Ÿä¿®å¤å®ŒæˆçŠ¶æ€** âœ…:
- **Windowså…¼å®¹æ€§ä¿®å¤**: è§£å†³signal.SIGALRMé—®é¢˜ï¼ŒBGE-M3æ¨¡å‹é‡‡ç”¨threadingæ–¹æ¡ˆ
- **RAGæŸ¥è¯¢å®Œå…¨æ¢å¤**: ä¿®å¤æ™ºèƒ½æ—¥æœŸè§£æè¿‡åº¦å¹²é¢„ï¼ŒRAGæˆåŠŸç‡100%
- **SQL/Financial Agentä¼˜åŒ–**: ä¿®å¤è¾“å‡ºè§£æé”™è¯¯å’ŒNoneTypeå®‰å…¨æ£€æŸ¥
- **æ•°æ®é©±åŠ¨äº¤æ˜“æ—¥åˆ¤æ–­**: ç²¾å‡†è¯†åˆ«2025-06-24ä¸ºæœ€æ–°äº¤æ˜“æ—¥

**Phase 2åŠŸèƒ½éªŒè¯ç»“æœ** âœ…:
- **èµ„é‡‘æµå‘åˆ†æç³»ç»Ÿ**: 100%æ­£å¸¸è¿è¡Œï¼ŒèŒ…å°èµ„é‡‘æµå‘104ç§’ä¸“ä¸šæŠ¥å‘Š
- **æ™ºèƒ½æ—¥æœŸè§£æv2.0**: æ—¶é—´ç‚¹vsæ—¶é—´æ®µç²¾å‡†è¯†åˆ«ï¼Œç¼“å­˜ä¼˜åŒ–
- **å®Œæ•´æµ‹è¯•è¦†ç›–**: TEST_MANUAL_v1.4.1.md (403è¡Œ) ä¿ç•™å®Œæ•´
- **ç½‘é¡µç•Œé¢çŠ¶æ€**: âš ï¸ åŸºç¡€ç‰ˆæœ¬ä¿ç•™ï¼ŒWebSocketåŠŸèƒ½éœ€æ¢å¤

#### v1.4.0 - Phase 1 æ·±åº¦è´¢åŠ¡åˆ†æç³»ç»Ÿ (2025-06-22)

**FinancialAnalysisAgent æ ¸å¿ƒåŠŸèƒ½** âœ…:
- **å››è¡¨è”åˆåˆ†æ**: åˆ©æ¶¦è¡¨(83å­—æ®µ) + èµ„äº§è´Ÿå€ºè¡¨(161å­—æ®µ) + ç°é‡‘æµé‡è¡¨(73å­—æ®µ) + è´¢åŠ¡æŒ‡æ ‡(143å­—æ®µ)
- **è´¢åŠ¡å¥åº·åº¦è¯„åˆ†**: åŸºäºç›ˆåˆ©èƒ½åŠ›ã€å¿å€ºèƒ½åŠ›ã€è¿è¥èƒ½åŠ›ã€æˆé•¿èƒ½åŠ›å››ç»´åº¦çš„æ™ºèƒ½è¯„åˆ†ç³»ç»Ÿ(AAA-CCCè¯„çº§)
- **æœé‚¦åˆ†æåŠŸèƒ½**: ROEåˆ†è§£åˆ†æ(å‡€åˆ©ç‡Ã—èµ„äº§å‘¨è½¬ç‡Ã—æƒç›Šä¹˜æ•°)ï¼Œæ”¯æŒå¤šæœŸè¶‹åŠ¿åˆ†æ
- **ç°é‡‘æµè´¨é‡åˆ†æ**: ç°é‡‘å«é‡æ¯”ç‡è®¡ç®—ã€ç¨³å®šæ€§è¯„åˆ†ã€ç»¼åˆè´¨é‡è¯„çº§
- **å¤šæœŸè´¢åŠ¡å¯¹æ¯”**: åŒæ¯”/ç¯æ¯”å¢é•¿ç‡ã€è¶‹åŠ¿åˆ†æã€æ³¢åŠ¨æ€§è¯„ä¼°
  - åŒæ¯”å¢é•¿åˆ†æ(YoY): å¯¹æ¯”å»å¹´åŒæœŸï¼Œéœ€è‡³å°‘5æœŸæ•°æ®
  - ç¯æ¯”å¢é•¿åˆ†æ(QoQ): å¯¹æ¯”ä¸Šä¸€æœŸï¼Œéœ€è‡³å°‘2æœŸæ•°æ®
  - è¶‹åŠ¿åˆ¤æ–­: ä¸Šå‡/ä¸‹é™/å¹³ç¨³/æ³¢åŠ¨è¶‹åŠ¿è¯†åˆ«
  - ç¨³å®šæ€§è¯„çº§: åŸºäºæ ‡å‡†å·®çš„æ³¢åŠ¨æ€§åˆ†æï¼ˆéå¸¸ç¨³å®š/æ¯”è¾ƒç¨³å®š/ä¸€èˆ¬ç¨³å®š/æ³¢åŠ¨è¾ƒå¤§ï¼‰
  - è¯¦ç»†æ–‡æ¡£: `docs/financial_comparison_analysis.md`

**æ™ºèƒ½æŸ¥è¯¢èƒ½åŠ›** âœ…:
- **è‡ªç„¶è¯­è¨€è§£æ**: æ”¯æŒ"åˆ†æèŒ…å°çš„è´¢åŠ¡å¥åº·åº¦"ã€"æœé‚¦åˆ†æ"ã€"ç°é‡‘æµè´¨é‡"ç­‰ä¸­æ–‡æŸ¥è¯¢
- **è‚¡ç¥¨ä»£ç è¯†åˆ«**: è‡ªåŠ¨æå–TSä»£ç (å¦‚600519.SH)æˆ–æ ¹æ®å…¬å¸åç§°(å¦‚"è´µå·èŒ…å°")æŸ¥æ‰¾
- **æŸ¥è¯¢æ„å›¾è·¯ç”±**: æ™ºèƒ½è¯†åˆ«è´¢åŠ¡åˆ†ææ„å›¾å¹¶è°ƒç”¨ç›¸åº”åˆ†æåŠŸèƒ½

**ä¸“ä¸šåˆ†ææŠ¥å‘Š** âœ…:
- **LLMå¢å¼ºåˆ†æ**: ç»“åˆè´¢åŠ¡è®¡ç®—ç»“æœå’ŒAIåˆ†æç”Ÿæˆä¸“ä¸šè´¢åŠ¡æŠ¥å‘Š
- **å¤šç»´åº¦æ´å¯Ÿ**: æ ¸å¿ƒç»“è®ºã€è¯¦ç»†åˆ†æã€é£é™©æç¤ºã€æŠ•èµ„å»ºè®®
- **æ•°æ®å¯è§†åŒ–**: æ ¼å¼åŒ–çš„è´¢åŠ¡æŒ‡æ ‡å±•ç¤ºå’Œè¶‹åŠ¿åˆ†æ

**æµ‹è¯•éªŒè¯** âœ…:
- è´µå·èŒ…å°è´¢åŠ¡å¥åº·åº¦: AAçº§(81åˆ†)ï¼Œç›ˆåˆ©èƒ½åŠ›å¼ºï¼Œå¿å€ºèƒ½åŠ›ä¼˜ç§€
- å¹³å®‰é“¶è¡Œæœé‚¦åˆ†æ: å‡€åˆ©ç‡41.82%ï¼Œä½†èµ„äº§å‘¨è½¬ç‡ä½(0.006æ¬¡)ï¼Œé«˜æ æ†(11.42å€)
- ç°é‡‘æµè´¨é‡åˆ†æ: å‡†ç¡®è¯†åˆ«èŒ…å°ç°é‡‘æµæ³¢åŠ¨é—®é¢˜ï¼Œä¸‡ç§‘ç°é‡‘æµè´¨é‡è¯„çº§
- æŸ¥è¯¢å“åº”æ—¶é—´: 25-30ç§’ï¼ŒåŒ…å«å®Œæ•´çš„LLMåˆ†ææŠ¥å‘Šç”Ÿæˆ

#### v1.4.1 - æ™ºèƒ½æ—¥æœŸè§£æç³»ç»Ÿ (2025-06-23)

**æ™ºèƒ½æ—¥æœŸè§£ææ ¸å¿ƒåŠŸèƒ½** âœ…:
- **è‡ªç„¶è¯­è¨€æ—¶é—´è¯†åˆ«**: è‡ªåŠ¨è¯†åˆ«"æœ€æ–°"ã€"æœ€è¿‘"ã€"ç°åœ¨"ç­‰æ—¶é—´è¡¨è¾¾
- **æ•°æ®ç±»å‹æ™ºèƒ½åˆ†ç±»**: åŒºåˆ†è‚¡ä»·æ•°æ®ã€è´¢åŠ¡æ•°æ®ã€å…¬å‘Šæ•°æ®çš„æ—¶é—´éœ€æ±‚
- **æœ€è¿‘äº¤æ˜“æ—¥æŸ¥è¯¢**: æ™ºèƒ½è·å–æœ€è¿‘å¯ç”¨çš„äº¤æ˜“æ—¥ï¼ˆé¿å…éäº¤æ˜“æ—¥æŸ¥è¯¢é”™è¯¯ï¼‰
- **æœ€æ–°æŠ¥å‘ŠæœŸè¯†åˆ«**: è‡ªåŠ¨æŸ¥æ‰¾æœ€æ–°çš„å¹´æŠ¥ã€å­£æŠ¥ã€åŠå¹´æŠ¥æœŸé—´
- **æœ€æ–°å…¬å‘Šæ—¥æœŸ**: åŠ¨æ€è·å–ç‰¹å®šè‚¡ç¥¨çš„æœ€æ–°å…¬å‘Šå‘å¸ƒæ—¥æœŸ

**ç³»ç»Ÿé›†æˆ** âœ…:
- **SQL Agenté›†æˆ**: é¢„å¤„ç†"èŒ…å°æœ€æ–°è‚¡ä»·"â†’"èŒ…å°2025-06-23è‚¡ä»·" (å·²ä¿®å¤)
- **RAG Agenté›†æˆ**: é¢„å¤„ç†"è´µå·èŒ…å°æœ€æ–°å…¬å‘Š"â†’"è´µå·èŒ…å°2025-06-23å…¬å‘Š" (å·²ä¿®å¤)
- **Hybrid Agentæ”¯æŒ**: å¤åˆæŸ¥è¯¢ä¸­çš„æ™ºèƒ½æ—¶é—´è§£æ
- **ç¼“å­˜æœºåˆ¶**: 1å°æ—¶TTLç¼“å­˜ï¼Œé¿å…é‡å¤æ•°æ®åº“æŸ¥è¯¢

**è§£æç¤ºä¾‹** âœ… (æ›´æ–°ä¸ºv2.0):
- "èŒ…å°æœ€æ–°è‚¡ä»·" â†’ æŸ¥è¯¢2025-06-23äº¤æ˜“æ—¥æ•°æ® (ä¿®å¤æ—¥æœŸç¼“å­˜BUG)
- "5å¤©å‰çš„è‚¡ä»·" â†’ æŸ¥è¯¢2025-06-17æ•°æ® (æ—¶é—´ç‚¹)
- "å‰5å¤©çš„èµ°åŠ¿" â†’ æŸ¥è¯¢2025-06-17è‡³2025-06-23èµ°åŠ¿ (æ—¶é—´æ®µ)
- "ä¸Šä¸ªæœˆçš„æ•°æ®" â†’ æŸ¥è¯¢2025-05-23æ•°æ® (21ä¸ªäº¤æ˜“æ—¥å‰)
- "å»å¹´åŒæœŸè‚¡ä»·" â†’ æŸ¥è¯¢2024-06-21è‚¡ä»· (æ™ºèƒ½ä¿®æ­£éäº¤æ˜“æ—¥)

**æŠ€æœ¯å®ç°** âœ…:
- æ–°å¢ `utils/date_intelligence.py` æ™ºèƒ½æ—¥æœŸè§£ææ¨¡å—
- æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åŒ¹é… + è‚¡ç¥¨ä»£ç è¯†åˆ«
- SQLAlchemyå‚æ•°åŒ–æŸ¥è¯¢ï¼Œé˜²æ­¢SQLæ³¨å…¥
- ç»Ÿä¸€é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

#### v1.4.2 - Phase 2 èµ„é‡‘æµå‘åˆ†æå’Œç½‘é¡µå‰ç«¯ + æ—¥æœŸè§£æv2.0 (2025-06-23)

**èµ„é‡‘æµå‘åˆ†æç³»ç»Ÿ** âœ…:
- **ä¸»åŠ›èµ„é‡‘åˆ†æ**: æœ€é«˜ä¼˜å…ˆçº§ï¼Œåˆ†æä¸»åŠ›èµ„é‡‘(å¤§å•+è¶…å¤§å•)å‡€æµå…¥/æµå‡º
- **è¶…å¤§å•è¡Œä¸ºæ¨¡å¼**: é‡ç‚¹å•ç‹¬åˆ†æï¼Œè¯†åˆ«æœºæ„å»ºä»“/å‡ä»“/æ´—ç›˜è¡Œä¸º
- **å››çº§èµ„é‡‘åˆ†å¸ƒ**: è¶…å¤§å•(â‰¥100ä¸‡)ã€å¤§å•(20-100ä¸‡)ã€ä¸­å•(4-20ä¸‡)ã€å°å•(<4ä¸‡)
- **ä¸“ä¸šè¯„ä¼°ç³»ç»Ÿ**: èµ„é‡‘æµå‘å¼ºåº¦ã€ä¸€è‡´æ€§è¯„åˆ†ã€æŠ•èµ„å»ºè®®

**ç½‘é¡µç‰ˆå‰ç«¯ç•Œé¢** âœ…:
- **ChatGPTé£æ ¼äº¤äº’**: ç±»ä¼¼å¯¹è¯å¼çš„è‡ªç„¶è¯­è¨€äº¤äº’ç•Œé¢
- **WebSocketå®æ—¶é€šä¿¡**: æ”¯æŒå³æ—¶å¯¹è¯ï¼Œæ— éœ€åˆ·æ–°é¡µé¢
- **éŸ³ä½“åŒ–è®¾è®¡**: é€‚é…æ‰‹æœºå’Œç”µè„‘ç«¯ï¼Œæ”¯æŒå¿«æ·æŒ‰é’®
- **å®æ—¶åŠ è½½æç¤º**: æŸ¥è¯¢å¤„ç†çŠ¶æ€å®æ—¶åé¦ˆ

**æ™ºèƒ½æ—¥æœŸè§£æv2.0** âœ…:
- **æ—¶é—´ç‚¹vsæ—¶é—´æ®µåŒºåˆ†**: ç²¾ç¡®åŒºåˆ†"5å¤©å‰"(æ—¶é—´ç‚¹)å’Œ"å‰5å¤©"(æ—¶é—´æ®µ)
- **ä¸“ä¸šäº¤æ˜“æ—¥è®¡ç®—**: å‘¨5å¤©ã€æœˆ21å¤©ã€å­£61å¤©ã€åŠå¹´120å¤©ã€å¹´250å¤©
- **å¹´ä»½ç›¸å¯¹æ—¥æœŸä¿®æ­£**: å»å¹´åŒæœŸéäº¤æ˜“æ—¥æ™ºèƒ½å‘å‰æŸ¥æ‰¾æœ€è¿‘äº¤æ˜“æ—¥
- **å®Œæ•´ä¸­æ–‡æ”¯æŒ**: æ”¯æŒæœ€æ–°ã€ä¸Šå‘¨ã€ä¸Šä¸ªæœˆã€å»å¹´ã€æœ€è¿‘Nå¤©ç­‰æ‰€æœ‰å¸¸ç”¨è¡¨è¾¾

**ç³»ç»Ÿé›†æˆ** âœ…:
- **MoneyFlowAgent**: æ–°å¢èµ„é‡‘æµå‘åˆ†æä¸“ç”¨Agent
- **Hybrid Agentè·¯ç”±**: æ”¯æŒMONEY_FLOWæŸ¥è¯¢ç±»å‹æ™ºèƒ½è·¯ç”±
- **APIç«¯ç‚¹å®Œå–„**: POST /money-flow-analysisæ¥å£å’Œå®Œæ•´æ–‡æ¡£
- **å‰ç«¯æ•´åˆ**: templates/index.htmlå®ç°ç½‘é¡µäº¤äº’

**æµ‹è¯•éªŒè¯** âœ…:
- è´µå·èŒ…å°èµ„é‡‘æµå‘: ä¸»åŠ›èµ„é‡‘å‡€æµå…¥+1.25äº¿å…ƒï¼Œè¶…å¤§å•å‘ˆç°å»ºä»“ç‰¹å¾
- ç½‘é¡µå‰ç«¯: æˆåŠŸå®ç°è‡ªç„¶è¯­è¨€äº¤äº’ï¼Œæ”¯æŒæ‰€æœ‰æ¨¡å—æŸ¥è¯¢
- æ—¥æœŸè§£æv2.0: ä¿®å¤æ—¥æœŸç¼“å­˜BUGï¼Œç°æ­£ç¡®è¿”å›2025-06-23æœ€æ–°æ•°æ®
- APIæ–‡æ¡£: å®Œæ•´æ›´æ–°æ‰€æœ‰ç«¯ç‚¹æ–‡æ¡£ï¼Œæ–°å¢æ ‡ç­¾åˆ†ç»„å’Œä½¿ç”¨ç¤ºä¾‹

**æŠ€æœ¯å®ç°** âœ…:
- æ–°å¢ `utils/money_flow_analyzer.py` èµ„é‡‘æµå‘åˆ†ææ ¸å¿ƒæ¨¡å—
- æ–°å¢ `agents/money_flow_agent.py` èµ„é‡‘æµå‘åˆ†æAgent
- æ–°å¢ `templates/index.html` ç½‘é¡µå‰ç«¯ç•Œé¢
- é‡å†™ `utils/date_intelligence.py` v2.0æ¶æ„ï¼Œæ–°å¢è®¾è®¡æ–‡æ¡£
- å®Œå–„ APIæ–‡æ¡£å’Œæ ‡ç­¾åˆ†ç»„ï¼Œæ–°å¢å¤šä¸ªä½¿ç”¨ç¤ºä¾‹

#### v1.3.8 - LangChainç°ä»£åŒ– (2025-06-22)

**LangChain Modernization Complete** âœ…:
- Updated all `LLMChain` to modern `RunnableSequence` pattern
- Replaced deprecated `Chain.run()` with `invoke()` method
- Implemented pipeline composition with `|` operator: `prompt | llm | parser`
- Resolved all LangChain deprecation warnings
- Fixed `StdOutCallbackHandler` errors completely

**Enhanced Input Validation** âœ…:
- Added empty query validation to all agents (RAG, SQL, Hybrid)
- Standardized error response formats across all components
- Prevents crashes from empty or whitespace-only inputs

**RAG Agent Improvements** âœ…:
- Added query statistics tracking (`query_count`, `success_count`)
- Implemented `get_stats()` method for performance monitoring
- Enhanced error handling and logging

**Testing & Quality Assurance** âœ…:
- All 6/6 comprehensive tests passing
- Test script organization: essential tests in root, archived tests in `scripts/tests/`
- Baseline functionality verification with `baseline_test.py`
- Performance and integration testing completed

### Core Documentation

When updating project documentation, always update all three core documents:
1. **CLAUDE.md** (this file) - Development guidance and technical overview
2. **test-guide-comprehensive.md** - Comprehensive testing procedures and test cases (è¦†ç›–æ‰€æœ‰7ä¸ªAgentï¼ŒåŒ…å«å·²å®ç°å’Œæœªæ¥è§„åˆ’åŠŸèƒ½)
3. **docs/project_status/CURRENT_STATUS.md** - Project status, version history, and known issues

### Testing Strategy

**Script Testing (Backend API)**:
- Use the test-guide-comprehensive.md for comprehensive testing procedures
- Essential comprehensive tests: `baseline_test.py`, `comprehensive_verification.py`
- Feature-specific tests: Financial Analysis, Money Flow, Date Intelligence
- Performance benchmarks in scripts/tests/

**Web Frontend Testing (User Experience)**:
- **ç½‘é¡µç‰ˆåŠŸèƒ½æµ‹è¯•æŒ‡å—**: `docs/testing/WEB_FUNCTIONAL_TEST_GUIDE.md` â­ **[NEW v1.4.2]**
- å…¨é¢è¦†ç›–æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½çš„ç½‘é¡µç‰ˆæµ‹è¯•ç”¨ä¾‹
- åŒ…å«åŠŸèƒ½æ€§æµ‹è¯•ã€ç ´åæ€§æµ‹è¯•ã€æ€§èƒ½æµ‹è¯•ã€ç”¨æˆ·ä½“éªŒæµ‹è¯•
- è„šæœ¬æµ‹è¯•vsç½‘é¡µç‰ˆæµ‹è¯•åŒé‡éªŒè¯ä½“ç³»
- æŒç»­é›†æˆæµ‹è¯•æ¸…å•å’Œå›å½’æµ‹è¯•åŸºå‡†

**Testing Infrastructure**:
- API endpoints available at http://localhost:8000/docs
- Interactive testing via rag_query_interface.py
- Web interface testing at http://localhost:8000
- Automated test execution via dedicated scripts

### Log Files
- API logs: `logs/api.log`
- Database logs: `logs/mysql_connector.log`, `logs/milvus_connector.log`
- Agent logs: `logs/hybrid_agent.log`, `logs/rag_agent.log`, `logs/sql_agent.log`
- Document processing: `logs/document_processor.log`

### Data Directories
- PDF storage: `data/pdfs/`
- Performance logs: `data/performance_logs/`
- Cache files: `data/pdfs/cache/`

## Development Best Practices

### Code Quality
- All LangChain code uses modern patterns (v0.1+ compatible)
- Input validation is mandatory for all public methods
- Error handling follows standardized response format
- Test coverage includes unit, integration, and performance tests

### Query Development
```python
# Example: Modern LangChain pattern in agents
qa_chain = qa_prompt | self.llm | StrOutputParser()
result = qa_chain.invoke({"context": context, "question": question})

# Example: Using stock code mapper (v1.4.3)
from utils.stock_code_mapper import convert_to_ts_code

# Convert various formats to ts_code
ts_code = convert_to_ts_code("èŒ…å°")           # Returns: "600519.SH"
ts_code = convert_to_ts_code("600519")         # Returns: "600519.SH"
ts_code = convert_to_ts_code("è´µå·èŒ…å°")        # Returns: "600519.SH"
ts_code = convert_to_ts_code("è¯ºå¾·è‚¡ä»½")        # Returns: "600110.SH"
```

### Testing Protocol

**Backend API Testing**:
1. Run `baseline_test.py` for quick functionality check
2. Run `comprehensive_verification.py` for full system validation
3. Check specific features with archived tests in `scripts/tests/`
4. Performance testing via dedicated scripts

**Web Frontend Testing** â­ **[NEW v1.4.2]**:
1. **Quick Verification** (15 minutes): Follow å›å½’æµ‹è¯•æ¸…å• in WEB_FUNCTIONAL_TEST_GUIDE.md
2. **Complete Testing** (60 minutes): Execute all test cases in the web guide
3. **Cross-Platform Testing**: Test on different browsers and devices  
4. **Performance Validation**: Verify response times meet web interface standards

**Release Testing Protocol**:
- Script tests must pass 100% before web testing
- Web testing validates complete user experience  
- Both testing layers required for production releases

## Next Development Priority (v2.4.0 - æ–°Agentå¼€å‘ä¸æ€§èƒ½ä¼˜åŒ–)

### v2.3.0 æˆæœæ€»ç»“ (2025-07-13)

**å…¨é¢ä¼˜åŒ–æˆåŠŸ** âœ…:
- SQL Agent: 100%æµ‹è¯•é€šè¿‡ (41/41)
- Money Flow Agent: 100%æµ‹è¯•é€šè¿‡ (64/64)
- Financial Agent: 100%æµ‹è¯•é€šè¿‡ (64/64)
- Hybrid Agent: è·¯ç”±å‡†ç¡®æ€§95%+
- RAG Agent: åŠŸèƒ½ç¨³å®šï¼Œæ•°æ®è¦†ç›–åº¦70.8%

**æŠ€æœ¯æˆå°±** âœ…:
- æ¨¡å—åŒ–æ¶æ„å…¨é¢å®æ–½
- ä»£ç å¤ç”¨ç‡85%
- ç»´æŠ¤æ•ˆç‡æå‡50%
- æµ‹è¯•é©±åŠ¨å¼€å‘æµç¨‹æˆç†Ÿ

### v2.4.0 å¼€å‘è®¡åˆ’ - æ–°Agentå¼€å‘ä¸æ€§èƒ½ä¼˜åŒ–

#### Phase 1ï¼šæ–°Agentå¼€å‘ï¼ˆ5-7å¤©ï¼‰

**1. Rank Agent - æ’ååˆ†æä¸“å®¶**:
- è§¦å‘è¯ï¼š"æ’è¡Œåˆ†æï¼š"
- åŠŸèƒ½ï¼šæ·±åº¦æ’ååˆ†æã€è¶‹åŠ¿é¢„æµ‹ã€è¡Œä¸šå¯¹æ¯”
- æŠ€æœ¯ï¼šåŸºäºæ¨¡å—åŒ–æ¶æ„å¿«é€Ÿå®ç°

**2. ANNS Agent - å…¬å‘ŠæŸ¥è¯¢ä¸“å®¶**:
- è§¦å‘è¯ï¼š"æŸ¥è¯¢å…¬å‘Šï¼š"
- åŠŸèƒ½ï¼šå…¬å‘Šå†…å®¹åˆ†æã€å…³é”®ä¿¡æ¯æå–ã€æ—¶é—´çº¿æ•´ç†
- æŠ€æœ¯ï¼šç»“åˆSQLå¿«é€Ÿæ£€ç´¢å’ŒRAGæ·±åº¦åˆ†æ

**3. QA Agent - è‘£ç§˜äº’åŠ¨ä¸“å®¶**:
- è§¦å‘è¯ï¼š"è‘£ç§˜äº’åŠ¨ï¼š"
- åŠŸèƒ½ï¼šé—®ç­”æ£€ç´¢ã€æŠ•èµ„è€…å…³ç³»åˆ†æã€å¸‚åœºæƒ…ç»ªåˆ¤æ–­
- æŠ€æœ¯ï¼šä¸“é—¨çš„é—®ç­”æ•°æ®åº“å’Œæƒ…æ„Ÿåˆ†æ

#### Phase 2ï¼šæ€§èƒ½ä¼˜åŒ–ï¼ˆ3-4å¤©ï¼‰

**1. æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–**:
- SQL Agentï¼šæ›´å¤šå¿«é€Ÿæ¨¡æ¿ï¼Œç›®æ ‡<0.3ç§’
- RAG Agentï¼šå‘é‡æ£€ç´¢ä¼˜åŒ–ï¼Œç›®æ ‡<2ç§’
- Financial Agentï¼šé¢„è®¡ç®—ä¼˜åŒ–ï¼Œç›®æ ‡<10ç§’
- Money Flow Agentï¼šå®æ—¶ç¼“å­˜ï¼Œç›®æ ‡<5ç§’

**2. ç³»ç»Ÿæ€§èƒ½æå‡**:
- å¹¶å‘å¤„ç†ä¼˜åŒ–
- ç¼“å­˜ç­–ç•¥å¢å¼º
- æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–
- APIå“åº”æ—¶é—´ç›‘æ§

#### Phase 3ï¼šç”¨æˆ·ä½“éªŒæå‡ï¼ˆ2-3å¤©ï¼‰

**1. å‰ç«¯åŠŸèƒ½å¢å¼º**:
- æŸ¥è¯¢å†å²è®°å½•
- æ”¶è—å¤¹åŠŸèƒ½
- å¯¼å‡ºåŠŸèƒ½ï¼ˆExcel/PDFï¼‰
- æ•°æ®å¯è§†åŒ–å›¾è¡¨

**2. é”™è¯¯å¤„ç†å®Œå–„**:
- æ›´è¯¦ç»†çš„é”™è¯¯æç¤º
- æŸ¥è¯¢å»ºè®®å’Œè‡ªåŠ¨çº æ­£
- å¸®åŠ©æ–‡æ¡£é›†æˆ

### æˆåŠŸæŒ‡æ ‡
- âœ… 8ä¸ªAgentå…¨éƒ¨ä¸Šçº¿ï¼ˆ5ä¸ªç°æœ‰ + 3ä¸ªæ–°å¢ï¼‰
- âœ… å¹³å‡æŸ¥è¯¢å“åº”æ—¶é—´<2ç§’
- âœ… å¹¶å‘æ”¯æŒ100+ç”¨æˆ·
- âœ… ç”¨æˆ·æ»¡æ„åº¦90%+

### Gitç‰ˆæœ¬ç®¡ç†
```bash
# å½“å‰åˆ†æ”¯: dev-react-frontend-v2
# ç‰ˆæœ¬: v2.3.0 â†’ v2.4.0
git add -A && git commit -m "feat: v2.3.0 Agent Excellence - 5ä¸ªæ ¸å¿ƒAgentå…¨éƒ¨ä¼˜åŒ–å®Œæˆ"
```

The system is designed for production use with comprehensive error handling, logging, monitoring capabilities, and full LangChain modernization (v1.3.8).

## æŸ¥è¯¢æ¨¡å—åŒ–æ¶æ„é‡æ„è¿›å±•ï¼ˆ2025-07-06æ›´æ–°ï¼‰

### âœ… Phase 1: åŸºç¡€æ¨¡å—å¼€å‘ï¼ˆå·²å®Œæˆ - 2025-07-05ï¼‰

#### å®Œæˆçš„æ¨¡å—ï¼š
1. **parameter_extractor.py** - ç»Ÿä¸€å‚æ•°æå–å™¨
   - æ”¯æŒè‚¡ç¥¨ã€æ—¥æœŸã€æ•°é‡ã€æ’åºã€æ¿å—ç­‰å‚æ•°æå–
   - é›†æˆUnifiedStockValidatorå’ŒDateIntelligence
   - ä¿®å¤äº†è‚¡ç¥¨ç®€ç§°å¤„ç†ä¸ä¸€è‡´é—®é¢˜
   
2. **query_validator.py** - ç»Ÿä¸€å‚æ•°éªŒè¯å™¨
   - å®Œæ•´çš„å‚æ•°éªŒè¯é€»è¾‘
   - åŸºäºæ¨¡æ¿çš„éªŒè¯æ”¯æŒ
   
3. **result_formatter.py** - ç»Ÿä¸€ç»“æœæ ¼å¼åŒ–å™¨
   - æ”¯æŒè¡¨æ ¼ã€æ–‡æœ¬ç­‰å¤šç§æ ¼å¼
   - æ™ºèƒ½åˆ—ç±»å‹æ¨æ–­å’Œæ ¼å¼åŒ–
   
4. **error_handler.py** - ç»Ÿä¸€é”™è¯¯å¤„ç†å™¨
   - é”™è¯¯åˆ†ç±»å’Œä¸¥é‡ç¨‹åº¦ç®¡ç†
   - ç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯
   - æ”¯æŒåŸå§‹é”™è¯¯æ¶ˆæ¯ä¼ é€’

5. **agent_response.py** - ç»Ÿä¸€å“åº”æ ¼å¼
   - æ ‡å‡†åŒ–çš„æˆåŠŸ/é”™è¯¯å“åº”
   - å‘åå…¼å®¹çš„æ ¼å¼è½¬æ¢

### âœ… Phase 2: Agenté€‚é…ï¼ˆå·²å®Œæˆ - 2025-07-06ï¼‰

**å®Œæˆçš„Agentæ¨¡å—åŒ–**ï¼š
1. SQL Agent - 100%æµ‹è¯•é€šè¿‡ï¼Œå¿«é€Ÿè·¯å¾„è¦†ç›–82.4%
2. RAG Agent - Milvuså­—æ®µä¿®å¤ï¼Œæ–‡æ¡£æœç´¢æ­£å¸¸
3. Financial Agent - è´¢åŠ¡åˆ†æåŠŸèƒ½å®Œæ•´
4. Money Flow Agent - èµ„é‡‘æµå‘åˆ†ææ­£å¸¸
5. Hybrid Agent - è·¯ç”±åŠŸèƒ½æ­£å¸¸

### âœ… Phase 3: å‰åç«¯é›†æˆï¼ˆå·²å®Œæˆ - 2025-07-06ï¼‰

**é›†æˆæˆæœ**ï¼š
- æ¨¡å—åŒ–APIï¼ˆç«¯å£8001ï¼‰ç¨³å®šè¿è¡Œ
- å‰ç«¯ç¯å¢ƒé…ç½®å®Œæˆ
- é”™è¯¯æ¶ˆæ¯ä¼ é€’é“¾ä¿®å¤
- æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡

### ğŸ“… åç»­å¼€å‘è®¡åˆ’

### ğŸ¯ SQL Agentå¿«é€Ÿæ¨¡æ¿æ‰©å±•ï¼ˆ1-2å¤©ï¼‰

**ç›®æ ‡**ï¼šåŸºäºæ¨¡å—åŒ–æ¶æ„ï¼Œæ‰©å±•æ›´å¤šå¿«é€ŸæŸ¥è¯¢æ¨¡æ¿

**æ–°å¢æ¨¡æ¿åˆ—è¡¨**ï¼š
1. å†å²Kçº¿æŸ¥è¯¢ï¼ˆæ”¯æŒä»»æ„æ—¶é—´æ®µï¼‰
2. å†å²äº¤æ˜“é‡æŸ¥è¯¢ï¼ˆæ”¯æŒèšåˆç»Ÿè®¡ï¼‰
3. è´¢åŠ¡æŒ‡æ ‡å¯¹æ¯”ï¼ˆå¤šè‚¡ç¥¨æ¨ªå‘å¯¹æ¯”ï¼‰
4. æ¿å—æˆåˆ†è‚¡æŸ¥è¯¢
5. æŠ€æœ¯æŒ‡æ ‡æŸ¥è¯¢ï¼ˆMAã€MACDç­‰ï¼‰

### ğŸš€ ä¸‰ä¸ªæ–°Agentè®¾è®¡ä¸å®ç°ï¼ˆ5-7å¤©ï¼‰ã€v2.4.0è®¡åˆ’ã€‘

#### 2.1 è®¾è®¡é˜¶æ®µï¼ˆå¿…é¡»å…ˆå®Œæˆï¼‰
- Rank Agentè¯¦ç»†è®¾è®¡æ–‡æ¡£
- ANNS Agentè¯¦ç»†è®¾è®¡æ–‡æ¡£
- QA Agentè¯¦ç»†è®¾è®¡æ–‡æ¡£
- ç»Ÿä¸€Agentæ¥å£è§„èŒƒ
- **å¿…é¡»è·å¾—ç”¨æˆ·æ‰¹å‡†åæ‰èƒ½å¼€å§‹å¼€å‘**

#### 2.2 åŸå‹å¼€å‘ï¼ˆå°æ­¥éªŒè¯ï¼‰
- æ¯ä¸ªAgentå…ˆå®ç°æœ€å°å¯è¡Œç‰ˆæœ¬
- ç‹¬ç«‹æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½
- ä¸ä¿®æ”¹ç°æœ‰è·¯ç”±æœºåˆ¶

#### 2.3 é›†æˆå¼€å‘ï¼ˆè°¨æ…æ¨è¿›ï¼‰
- æ›´æ–°è·¯ç”±é…ç½®ï¼ˆéœ€ç”¨æˆ·ç¡®è®¤ï¼‰
- å®ç°è§¦å‘è¯æœºåˆ¶
- æ·»åŠ é”™è¯¯å¤„ç†å’Œé™çº§ç­–ç•¥

#### 2.4 æµ‹è¯•éªŒè¯
- å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€å›å½’æµ‹è¯•ã€æ€§èƒ½æµ‹è¯•
- ç¡®ä¿æ— æ€§èƒ½é€€åŒ–

### ğŸ”§ Phase 3: ä¸“ä¸šAgentå¿«é€Ÿè·¯å¾„ä¼˜åŒ–ï¼ˆ3-4å¤©ï¼‰

#### 3.1 SQL Agentè¿›ä¸€æ­¥ä¼˜åŒ–
- å®ç°æ›´å¤šå¿«é€Ÿæ¨¡æ¿
- ä¼˜åŒ–ç°æœ‰æ¨¡æ¿æ€§èƒ½
- æ·»åŠ æ™ºèƒ½ç¼“å­˜æœºåˆ¶
- ç›®æ ‡ï¼šå¸¸ç”¨æŸ¥è¯¢<0.3ç§’

#### 3.2 RAG Agentå¿«é€Ÿè·¯å¾„
- å¸¸è§æŸ¥è¯¢æ¨¡å¼è¯†åˆ«
- å‘é‡æ£€ç´¢ä¼˜åŒ–
- ç»“æœç¼“å­˜æœºåˆ¶
- ç›®æ ‡ï¼šå¸¸ç”¨RAGæŸ¥è¯¢<2ç§’

#### 3.3 Financial Agentå¿«é€Ÿè·¯å¾„
- è´¢åŠ¡æŒ‡æ ‡é¢„è®¡ç®—
- åˆ†ææ¨¡æ¿ä¼˜åŒ–
- å¹¶è¡Œè®¡ç®—å®ç°
- ç›®æ ‡ï¼šè´¢åŠ¡åˆ†æ<10ç§’

#### 3.4 Money Flow Agentå¿«é€Ÿè·¯å¾„
- æ•°æ®èšåˆä¼˜åŒ–
- å®æ—¶è®¡ç®—ç¼“å­˜
- å¿«é€Ÿç»Ÿè®¡å®ç°
- ç›®æ ‡ï¼šèµ„é‡‘åˆ†æ<5ç§’

#### 3.5 æ–°Agentå¿«é€Ÿè·¯å¾„ï¼ˆå¦‚æœPhase 2å®Œæˆï¼‰
- Rank Agentå¿«é€Ÿæ’å
- ANNS Agentå¿«é€Ÿå…¬å‘ŠæŸ¥è¯¢
- QA Agentå¿«é€Ÿé—®ç­”åŒ¹é…
- ç›®æ ‡ï¼šå¿«é€Ÿè·¯å¾„è¦†ç›–80%åœºæ™¯

### âœ… Phase 4: å…¨é¢é›†æˆæµ‹è¯•ï¼ˆ2-3å¤©ï¼‰

#### 4.1 åŠŸèƒ½æµ‹è¯•
- 7ä¸ªAgentå®Œæ•´åŠŸèƒ½æµ‹è¯•
- è·¯ç”±æœºåˆ¶æµ‹è¯•
- è¾¹ç•Œæ¡ä»¶æµ‹è¯•

#### 4.2 æ€§èƒ½æµ‹è¯•
- å“åº”æ—¶é—´æµ‹è¯•
- å¹¶å‘æµ‹è¯•
- å‹åŠ›æµ‹è¯•

#### 4.3 ç”¨æˆ·éªŒæ”¶æµ‹è¯•
- çœŸå®åœºæ™¯æµ‹è¯•
- ç”¨æˆ·åé¦ˆæ”¶é›†
- æœ€ç»ˆè°ƒä¼˜

### ğŸ“ å¼€å‘åŸåˆ™

1. **è®¾è®¡å…ˆè¡Œ**ï¼šæ¯ä¸ªPhaseå¿…é¡»å…ˆå®Œæˆè®¾è®¡æ–‡æ¡£å¹¶è·å¾—ç”¨æˆ·ç¡®è®¤
2. **å°æ­¥å¿«è·‘**ï¼šåŠŸèƒ½ç‚¹ç‹¬ç«‹å¼€å‘ï¼Œé¿å…å¤§è§„æ¨¡é‡æ„
3. **æ²Ÿé€šä¼˜å…ˆ**ï¼šé‡è¦å†³ç­–å¿…é¡»è¯·ç¤ºï¼Œå®šæœŸæ±‡æŠ¥è¿›å±•
4. **æµ‹è¯•é©±åŠ¨**ï¼šå…ˆå†™æµ‹è¯•ç”¨ä¾‹ï¼Œå›å½’æµ‹è¯•é˜²æ­¢ç ´å
5. **å®‰å…¨ç¬¬ä¸€**ï¼šæ‰€æœ‰è¾“å…¥éªŒè¯ï¼Œæ‰€æœ‰è¾“å‡ºè¿‡æ»¤ï¼Œä¸ä¿®æ”¹æ ¸å¿ƒç¨³å®šä»£ç 

### â±ï¸ æ€»æ—¶é—´ä¼°ç®—ï¼š12-17å¤©

## æš‚ç¼“å¼€å‘çš„åŠŸèƒ½

### ä¸­æ–‡æ•°å­—è¯†åˆ«åŠŸèƒ½ï¼ˆ2025-07-03 23:21 å†³å®šæš‚ç¼“ï¼‰

**åŠŸèƒ½æè¿°**: æ”¯æŒ"å‰å"ã€"å‰äºŒå"ç­‰ä¸­æ–‡æ•°å­—è¡¨è¾¾è‡ªåŠ¨è½¬æ¢ä¸ºé˜¿æ‹‰ä¼¯æ•°å­—

**æš‚ç¼“åŸå› **:
1. ä¸åˆ©äºç³»ç»Ÿå¿«é€Ÿå¼€å‘å’Œè¿­ä»£
2. å¢åŠ ç³»ç»Ÿå¤æ‚åº¦ï¼Œå¯èƒ½å¼•å…¥æ–°çš„é—®é¢˜
3. ç”¨æˆ·å¯ä»¥ç›´æ¥ä½¿ç”¨é˜¿æ‹‰ä¼¯æ•°å­—ï¼Œå­¦ä¹ æˆæœ¬ä½
4. æŠ•å…¥äº§å‡ºæ¯”ä¸é«˜

**è®¾è®¡æ–¹æ¡ˆ**: è¯¦è§ `docs/design/chinese_number_recognition_design.md`

**æ›¿ä»£æ–¹æ¡ˆ**: 
- åœ¨ç”¨æˆ·ç•Œé¢æä¾›æ¸…æ™°çš„æŸ¥è¯¢ç¤ºä¾‹
- ä¼˜åŒ–é”™è¯¯æç¤ºï¼Œå¼•å¯¼ç”¨æˆ·ä½¿ç”¨æ­£ç¡®æ ¼å¼

**æœªæ¥è®¡åˆ’**: å¾…ç³»ç»Ÿç¨³å®šåï¼Œæ ¹æ®ç”¨æˆ·åé¦ˆå†³å®šæ˜¯å¦å®æ–½