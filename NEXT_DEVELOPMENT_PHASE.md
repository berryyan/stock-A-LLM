# ä¸‹ä¸€æ­¥å¼€å‘è®¡åˆ’ - Stock Analysis System

**æ–‡æ¡£ç‰ˆæœ¬**: v3.1  
**æ›´æ–°æ—¥æœŸ**: 2025-06-26  
**å½“å‰ç‰ˆæœ¬**: v1.4.3-stable (å‡†å¤‡åˆå¹¶åˆ°ä¸»åˆ†æ”¯)  
**å½“å‰åˆ†æ”¯**: dev-phase2-technical-analysis â†’ main â†’ dev-react-frontend-v2  
**é‡å¤§å†³ç­–**: é‡‡ç”¨Reactå‰ç«¯é©±åŠ¨çš„æµ‹è¯•å’Œå¼€å‘ç­–ç•¥

## ğŸ“‹ ç›®å½•

1. [Phase 1: React MVP + æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•](#phase-1-react-mvp-æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•)
2. [Phase 2: é«˜ä¼˜å…ˆçº§åç«¯ä¼˜åŒ–](#phase-2-é«˜ä¼˜å…ˆçº§åç«¯ä¼˜åŒ–)
3. [Phase 3: å‰ç«¯å¢å¼º + æŠ€æœ¯åˆ†æ](#phase-3-å‰ç«¯å¢å¼º-æŠ€æœ¯åˆ†æ)
4. [Gitç‰ˆæœ¬ç®¡ç†ç­–ç•¥](#gitç‰ˆæœ¬ç®¡ç†ç­–ç•¥)
5. [Reactå‰ç«¯å¼€å‘è¯¦ç»†æŒ‡å—](#reactå‰ç«¯å¼€å‘è¯¦ç»†æŒ‡å—)
6. [æµ‹è¯•ç­–ç•¥è§„èŒƒ](#æµ‹è¯•ç­–ç•¥è§„èŒƒ)
7. [å·²å®ŒæˆåŠŸèƒ½æ€»ç»“](#å·²å®ŒæˆåŠŸèƒ½æ€»ç»“)

## Phase 1: React MVP + æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•ï¼ˆç¬¬1å‘¨ï¼‰

### Day 1-3: ReactåŸºç¡€æ¡†æ¶æ­å»º
**ç›®æ ‡**: å¿«é€Ÿå®ç°ä¸HTMLç‰ˆæœ¬åŠŸèƒ½å¯¹ç­‰çš„Reactç•Œé¢

#### å¿…é¡»å®Œæˆçš„ä»»åŠ¡ï¼š
1. **é¡¹ç›®åˆå§‹åŒ–**
   ```bash
   # åœ¨æ–°åˆ†æ”¯ dev-react-frontend-v2 ä¸Šæ‰§è¡Œ
   npm create vite@latest stock-analysis-frontend -- --template react-ts
   cd stock-analysis-frontend
   npm install
   
   # æ ¸å¿ƒä¾èµ–å®‰è£…
   npm install react-markdown remark-gfm axios
   npm install -D @types/react @types/react-dom
   ```

2. **åŸºç¡€ç»„ä»¶å¼€å‘**
   - `src/components/ChatInterface.tsx` - ä¸»èŠå¤©ç•Œé¢
   - `src/components/MessageList.tsx` - æ¶ˆæ¯åˆ—è¡¨å±•ç¤º
   - `src/components/InputBox.tsx` - å¤šè¡Œè¾“å…¥æ¡†
   - `src/components/SimpleMarkdownRenderer.tsx` - åŸºç¡€Markdownæ¸²æŸ“
   - `src/services/api.ts` - APIè°ƒç”¨å°è£…

3. **æ ¸å¿ƒåŠŸèƒ½å®ç°**
   - ä¸åç«¯APIé€šä¿¡ (http://localhost:8000)
   - æ¶ˆæ¯å‘é€å’Œæ¥æ”¶
   - åŸºç¡€Markdownæ¸²æŸ“ï¼ˆæ ‡é¢˜ã€åˆ—è¡¨ã€ä»£ç å—ã€è¡¨æ ¼ï¼‰
   - é”™è¯¯å¤„ç†å’ŒloadingçŠ¶æ€

4. **æ ·å¼è¦æ±‚**
   - æ¨¡ä»¿Claude.aiçš„åŸºç¡€å¸ƒå±€
   - å“åº”å¼è®¾è®¡
   - æ¸…æ™°çš„è§†è§‰å±‚çº§

### Day 4-7: ä½¿ç”¨æ–°Reactç•Œé¢è¿›è¡Œå®Œæ•´æµ‹è¯•

#### Day 4: SQLæŸ¥è¯¢åŠŸèƒ½æµ‹è¯•
- **æµ‹è¯•å†…å®¹**: 
  - è´µå·èŒ…å°æœ€æ–°è‚¡ä»·
  - Aè‚¡å¸‚å€¼æ’åå‰10
  - æ¶¨è·Œå¹…æ’è¡Œæ¦œ
  - å†å²æ•°æ®æŸ¥è¯¢
- **é‡ç‚¹å…³æ³¨**: æ•°æ®æ ¼å¼åŒ–æ˜¾ç¤ºã€è¡¨æ ¼æ¸²æŸ“ã€å“åº”æ—¶é—´

#### Day 5: RAGå’Œè´¢åŠ¡åˆ†ææµ‹è¯•
- **æµ‹è¯•å†…å®¹**:
  - å…¬å‘Šæ–‡æ¡£æ£€ç´¢
  - è´¢åŠ¡å¥åº·åº¦åˆ†æï¼ˆAAA-CCCè¯„çº§ï¼‰
  - æœé‚¦åˆ†æï¼ˆROEåˆ†è§£ï¼‰
  - ç°é‡‘æµè´¨é‡åˆ†æ
  - å¤šæœŸè´¢åŠ¡å¯¹æ¯”
- **é‡ç‚¹å…³æ³¨**: é•¿æ–‡æœ¬æ˜¾ç¤ºã€Markdownæ ¼å¼åŒ–ã€æ•°æ®å‡†ç¡®æ€§

#### Day 6: èµ„é‡‘æµå‘å’Œæ··åˆæŸ¥è¯¢æµ‹è¯•
- **æµ‹è¯•å†…å®¹**:
  - 30å¤©èµ„é‡‘æµå‘åˆ†æ
  - ä¸»åŠ›èµ„é‡‘ç›‘æ§
  - æ··åˆæŸ¥è¯¢è·¯ç”±
  - å¤æ‚æŸ¥è¯¢åœºæ™¯
- **é‡ç‚¹å…³æ³¨**: å›¾è¡¨æ•°æ®å±•ç¤ºéœ€æ±‚ã€æ€§èƒ½è¡¨ç°

#### Day 7: é—®é¢˜æ±‡æ€»å’Œä¿®å¤
- æ•´ç†æµ‹è¯•å‘ç°çš„æ‰€æœ‰é—®é¢˜
- åŒºåˆ†å‰ç«¯é—®é¢˜å’Œåç«¯é—®é¢˜
- ç´§æ€¥ä¿®å¤é˜»å¡æ€§bug
- æ›´æ–°æµ‹è¯•æŠ¥å‘Š

## Phase 2: é«˜ä¼˜å…ˆçº§åç«¯ä¼˜åŒ–ï¼ˆç¬¬2-3å‘¨ï¼‰

### Week 2: æ•°æ®åº“Schemaä¸­æ–‡æ˜ å°„ç³»ç»Ÿ âŒ
**é—®é¢˜ç°çŠ¶**:
- SQL Agentæ¯æ¬¡æŸ¥è¯¢éƒ½éœ€è¦é‡æ–°æŸ¥è¯¢æ•°æ®åº“è¡¨ç»“æ„
- Hybrid Agentæ— æ³•å‡†ç¡®åˆ¤æ–­æŸ¥è¯¢æ˜¯å¦éœ€è¦SQL
- æ¶ˆè€—é¢å¤–çš„tokenå’ŒæŸ¥è¯¢æ—¶é—´

**å…·ä½“å®ç°è®¡åˆ’**:
1. **åˆ›å»ºæ˜ å°„é…ç½®æ–‡ä»¶** `config/db_schema_mapping.py`
   ```python
   DB_SCHEMA = {
       "daily": {
           "description": "è‚¡ç¥¨æ—¥çº¿è¡Œæƒ…æ•°æ®",
           "fields": {
               "ts_code": {"cn": "è‚¡ç¥¨ä»£ç ", "type": "str"},
               "trade_date": {"cn": "äº¤æ˜“æ—¥æœŸ", "type": "date"},
               "open": {"cn": "å¼€ç›˜ä»·", "type": "float"},
               "close": {"cn": "æ”¶ç›˜ä»·", "type": "float"},
               # ... å®Œæ•´å­—æ®µæ˜ å°„
           }
       },
       # ... å…¶ä»–è¡¨æ˜ å°„
   }
   ```

2. **å®ç°ç¼“å­˜ç®¡ç†å™¨** `utils/schema_cache_manager.py`
   - å¯åŠ¨æ—¶åŠ è½½Schemaåˆ°å†…å­˜
   - æä¾›å¿«é€ŸæŸ¥è¯¢æ¥å£
   - å®šæœŸæ›´æ–°æœºåˆ¶ï¼ˆæ¯24å°æ—¶ï¼‰

3. **é›†æˆåˆ°Hybrid Agent**
   - ä¿®æ”¹è·¯ç”±åˆ¤æ–­é€»è¾‘
   - åŸºäºSchemaå¿«é€Ÿåˆ¤æ–­æŸ¥è¯¢ç±»å‹
   - å‡å°‘LLMè°ƒç”¨æ¬¡æ•°

**é¢„æœŸæ•ˆæœ**:
- å‡å°‘50%çš„æ•°æ®åº“ç»“æ„æŸ¥è¯¢
- æå‡è·¯ç”±å‡†ç¡®ç‡è‡³95%ä»¥ä¸Š
- å“åº”é€Ÿåº¦æå‡30%

### Week 3: RAGæŸ¥è¯¢æ™ºèƒ½é™çº§æœºåˆ¶ âŒ
**å…·ä½“å®ç°è®¡åˆ’**:
1. **åˆ›å»ºé™çº§å¤„ç†å™¨** `rag/fallback_handler.py`
   - æ£€æµ‹ç©ºç»“æœã€é”™è¯¯ã€è¶…æ—¶
   - å®ç°å¤šçº§é™çº§ç­–ç•¥
   - è®°å½•å¤±è´¥æ¨¡å¼

2. **é™çº§ç­–ç•¥**:
   - Level 1: æ‰©å¤§æœç´¢èŒƒå›´ï¼ˆé™ä½ç›¸ä¼¼åº¦é˜ˆå€¼ï¼‰
   - Level 2: å…³é”®è¯åˆ†è¯é‡ç»„
   - Level 3: è¿”å›ç›¸å…³æ¨è
   - Level 4: å¼•å¯¼ç”¨æˆ·é‡æ–°è¡¨è¿°

3. **å¤±è´¥æ—¥å¿—åˆ†æ**
   - åˆ›å»ºå¤±è´¥æŸ¥è¯¢æ•°æ®åº“
   - å®šæœŸåˆ†æå¤±è´¥åŸå› 
   - ä¼˜åŒ–RAGç´¢å¼•ç­–ç•¥

## Phase 3: å‰ç«¯å¢å¼º + æŠ€æœ¯åˆ†æï¼ˆç¬¬4-6å‘¨ï¼‰

### Week 4: Reactå‰ç«¯å®Œå–„
**ä»SimpleMarkdownRendererå‡çº§åˆ°å®Œæ•´ç‰ˆ**:

1. **å®‰è£…é¢å¤–ä¾èµ–**
   ```bash
   # ä»£ç é«˜äº®å’Œæ•°å­¦å…¬å¼
   npm install react-syntax-highlighter remark-math rehype-katex
   npm install -D @types/react-syntax-highlighter
   
   # æ•°æ®å¯è§†åŒ–
   npm install recharts
   ```

2. **å‡çº§ç»„ä»¶**
   - `FullMarkdownRenderer.tsx` - å®Œæ•´Markdownæ¸²æŸ“ï¼ˆä»£ç é«˜äº®ã€å¤åˆ¶æŒ‰é’®ã€KaTeXï¼‰
   - `DocumentViewer.tsx` - å³ä¾§æ–‡æ¡£æŸ¥çœ‹åŒº
   - `StockChart.tsx` - Kçº¿å›¾ç»„ä»¶
   - `MoneyFlowChart.tsx` - èµ„é‡‘æµå‘å›¾
   - `Sidebar.tsx` - å·¦ä¾§å¯¹è¯å†å²

3. **é«˜çº§åŠŸèƒ½**
   - é•¿ä»£ç è‡ªåŠ¨ç§»åˆ°å³ä¾§æ˜¾ç¤º
   - è¡¨æ ¼æ•°æ®å¢å¼ºï¼ˆæ’åºã€ç­›é€‰ï¼‰
   - è‚¡ç¥¨ä»£ç ç‰¹æ®Šæ ·å¼
   - æ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢

### Week 5-6: Phase 2æŠ€æœ¯åˆ†æç³»ç»Ÿ

#### Week 5: æŠ€æœ¯æŒ‡æ ‡è®¡ç®—æ¨¡å—
**åˆ›å»º** `utils/technical_indicators.py`:
```python
class TechnicalIndicators:
    def calculate_ma(self, prices, period): pass
    def calculate_ema(self, prices, period): pass
    def calculate_macd(self, prices): pass
    def calculate_rsi(self, prices, period=14): pass
    def calculate_bollinger_bands(self, prices, period=20): pass
```

#### Week 6: TechnicalAnalysisAgentå¼€å‘
**åˆ›å»º** `agents/technical_agent.py`:
- è¶‹åŠ¿åˆ†æï¼ˆä¸Šå‡/ä¸‹é™/æ¨ªç›˜ï¼‰
- Kçº¿å½¢æ€è¯†åˆ«
- æ”¯æ’‘é˜»åŠ›ä½è®¡ç®—
- ä¹°å–ä¿¡å·ç”Ÿæˆ

**APIé›†æˆ**:
```python
# æ–°å¢ç«¯ç‚¹
POST /technical-analysis
{
    "ts_code": "600519.SH",
    "period": 30,
    "indicators": ["MA", "MACD", "RSI"]
}

```

## Gitç‰ˆæœ¬ç®¡ç†ç­–ç•¥

### å½“å‰çŠ¶æ€
- **å½“å‰åˆ†æ”¯**: dev-phase2-technical-analysis
- **ç›®æ ‡**: åˆå¹¶åˆ°mainï¼Œåˆ›å»ºæ–°çš„Reactå¼€å‘åˆ†æ”¯

### æ‰§è¡Œæ­¥éª¤

#### Step 1: åˆ›å»ºç¨³å®šç‰ˆæœ¬æ ‡ç­¾
```bash
# ä¸ºå½“å‰ç‰ˆæœ¬åˆ›å»ºæ ‡ç­¾
git tag -a v1.4.3-stable -m "ç¨³å®šç‰ˆæœ¬ï¼šè´¢åŠ¡åˆ†æå¢å¼º+WebSocketæ¢å¤+è‚¡ç¥¨æ˜ å°„å™¨"
git push origin v1.4.3-stable
```

#### Step 2: åˆå¹¶åˆ°ä¸»åˆ†æ”¯
```bash
# ç¡®ä¿æ‰€æœ‰æ›´æ”¹å·²æäº¤
git add .
git commit -m "docs: æ›´æ–°å¼€å‘è®¡åˆ’v3.1ï¼Œæ•´åˆReactå‰ç«¯æ”¹ç‰ˆæ–¹æ¡ˆ"

# åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯å¹¶åˆå¹¶
git checkout main
git merge dev-phase2-technical-analysis -m "feat: åˆå¹¶v1.4.3ç¨³å®šç‰ˆæœ¬

- è´¢åŠ¡åˆ†æåŠŸèƒ½å¢å¼ºï¼ˆæ—¥å¿—ä¼˜åŒ–ã€åŒ—äº¤æ‰€é™åˆ¶ï¼‰  
- å¤šæœŸè´¢åŠ¡å¯¹æ¯”ä¿®å¤
- å¼€å‘è®¡åˆ’æ›´æ–°ï¼ˆReactå‰ç«¯æ”¹ç‰ˆï¼‰"

git push origin main
```

#### Step 3: åˆ›å»ºæ–°çš„å¼€å‘åˆ†æ”¯
```bash
# åˆ›å»ºReactå‰ç«¯å¼€å‘åˆ†æ”¯
git checkout -b dev-react-frontend-v2
git push -u origin dev-react-frontend-v2
```

### åˆ†æ”¯ç®¡ç†ç­–ç•¥
```
main (ä¸»åˆ†æ”¯)
  â”œâ”€â”€ v1.4.3-stable (æ ‡ç­¾)
  â””â”€â”€ dev-react-frontend-v2 (æ–°å¼€å‘åˆ†æ”¯)
      â”œâ”€â”€ å‰ç«¯é¡¹ç›®åˆå§‹åŒ–
      â”œâ”€â”€ åç«¯ä¼˜åŒ–
      â””â”€â”€ æŠ€æœ¯åˆ†æç³»ç»Ÿ
```

## Reactå‰ç«¯å¼€å‘è¯¦ç»†æŒ‡å—

### å¿«é€Ÿå¯åŠ¨æŒ‡å—ï¼ˆé‡å¯Claude Codeåï¼‰

#### 1. ç¯å¢ƒå‡†å¤‡
```bash
# åˆ‡æ¢åˆ°Reactå¼€å‘åˆ†æ”¯
git checkout dev-react-frontend-v2

# å¦‚æœå‰ç«¯é¡¹ç›®å·²åˆ›å»º
cd stock-analysis-frontend
npm install
npm run dev

# å¦‚æœéœ€è¦æ–°å»ºé¡¹ç›®
npm create vite@latest stock-analysis-frontend -- --template react-ts
```

#### 2. é¡¹ç›®ç»“æ„
```
stock-analysis-frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ChatInterface.tsx
â”‚   â”‚   â”œâ”€â”€ MessageList.tsx
â”‚   â”‚   â”œâ”€â”€ InputBox.tsx
â”‚   â”‚   â”œâ”€â”€ SimpleMarkdownRenderer.tsx
â”‚   â”‚   â””â”€â”€ (åç»­ç»„ä»¶...)
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ api.ts
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â””â”€â”€ global.css
â”‚   â””â”€â”€ App.tsx
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.ts
```

#### 3. APIæ¥å£å®šä¹‰
```typescript
// src/types/index.ts
interface QueryRequest {
  question: string;
  query_type?: 'sql' | 'rag' | 'hybrid' | 'financial';
  top_k?: number;
}

interface QueryResponse {
  success: boolean;
  answer?: string;
  error?: string;
  query_type?: string;
  sources?: {
    sql_data?: any[];
    documents?: any[];
    table_data?: any[];
    chart_data?: any;
  };
}
```

#### 4. å¼€å‘é¡ºåºæé†’
1. **Day 1**: å…ˆå®ç°åŸºç¡€æ¶ˆæ¯å‘é€å’Œæ˜¾ç¤º
2. **Day 2**: æ·»åŠ SimpleMarkdownRenderer
3. **Day 3**: å®Œå–„é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€
4. **Day 4-7**: ä½¿ç”¨æ–°ç•Œé¢è¿›è¡Œç³»ç»Ÿæµ‹è¯•

### æµ‹è¯•ç¯å¢ƒé…ç½®

#### åç«¯APIå¯åŠ¨ï¼ˆWindowsï¼‰
```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
venv\Scripts\activate

# å¯åŠ¨APIæœåŠ¡
python -m uvicorn api.main:app --reload --host 0.0.0.0 --port 8000
```

#### å‰ç«¯å¼€å‘æœåŠ¡å™¨
```bash
cd stock-analysis-frontend
npm run dev
# è®¿é—® http://localhost:5173
```

#### æµ‹è¯•æ•°æ®å‡†å¤‡
```javascript
// æµ‹è¯•æŸ¥è¯¢ç¤ºä¾‹
const testQueries = [
  "è´µå·èŒ…å°æœ€æ–°è‚¡ä»·",
  "åˆ†æèŒ…å°çš„è´¢åŠ¡å¥åº·åº¦", 
  "èŒ…å°æœ€è¿‘30å¤©èµ„é‡‘æµå‘",
  "è´µå·èŒ…å°æœ€æ–°å…¬å‘Š"
];
```

## æµ‹è¯•ç­–ç•¥è§„èŒƒ

### Reactå‰ç«¯æµ‹è¯•é‡ç‚¹
1. **åŠŸèƒ½å®Œæ•´æ€§**: ç¡®ä¿æ‰€æœ‰APIç«¯ç‚¹éƒ½èƒ½æ­£ç¡®è°ƒç”¨
2. **é”™è¯¯å¤„ç†**: ç½‘ç»œé”™è¯¯ã€APIé”™è¯¯çš„å‹å¥½æç¤º
3. **æ•°æ®å±•ç¤º**: è¡¨æ ¼ã€é•¿æ–‡æœ¬ã€Markdownæ ¼å¼
4. **æ€§èƒ½è¡¨ç°**: å¤§æ•°æ®é‡æ—¶çš„æ¸²æŸ“æ€§èƒ½
5. **ç”¨æˆ·ä½“éªŒ**: åŠ è½½çŠ¶æ€ã€äº¤äº’åé¦ˆ

### é—®é¢˜è®°å½•æ¨¡æ¿
```markdown
## é—®é¢˜ #1
- **ç±»å‹**: å‰ç«¯/åç«¯/é›†æˆ
- **æè¿°**: å…·ä½“é—®é¢˜æè¿°
- **å¤ç°æ­¥éª¤**: 1. 2. 3.
- **æœŸæœ›ç»“æœ**: 
- **å®é™…ç»“æœ**:
- **ä¼˜å…ˆçº§**: P0/P1/P2
- **è§£å†³æ–¹æ¡ˆ**:
```

## å·²å®ŒæˆåŠŸèƒ½æ€»ç»“ï¼ˆv1.4.3-stableï¼‰

### æ ¸å¿ƒæŸ¥è¯¢ç³»ç»Ÿ âœ…
- SQLæŸ¥è¯¢ï¼šè‚¡ä»·ã€å¸‚å€¼ã€è´¢åŠ¡æŒ‡æ ‡
- RAGæŸ¥è¯¢ï¼šæ–‡æ¡£è¯­ä¹‰æœç´¢ï¼ˆ95,662+å‘é‡ï¼‰
- æ··åˆæŸ¥è¯¢ï¼šæ™ºèƒ½è·¯ç”±å’Œç»„åˆåˆ†æ

### ä¸“ä¸šåˆ†æåŠŸèƒ½ âœ…
- è´¢åŠ¡å¥åº·åº¦è¯„åˆ†ï¼ˆAAA-CCCè¯„çº§ï¼‰
- æœé‚¦åˆ†æï¼ˆROEä¸‰å› ç´ åˆ†è§£ï¼‰
- ç°é‡‘æµè´¨é‡åˆ†æï¼ˆA-Dçº§è¯„ä¼°ï¼‰
- å¤šæœŸè´¢åŠ¡å¯¹æ¯”ï¼ˆ8æœŸè¶‹åŠ¿åˆ†æï¼‰
- èµ„é‡‘æµå‘ç›‘æ§ï¼ˆ30å¤©ä¸»åŠ›èµ„é‡‘ï¼‰

### ç³»ç»Ÿç‰¹æ€§ âœ…
- æ™ºèƒ½æ—¥æœŸè§£æv2.0
- è‚¡ç¥¨ä»£ç æ˜ å°„å™¨
- WebSocketå®æ—¶é€šä¿¡
- é”™è¯¯å¤„ç†æœºåˆ¶
- Windowså…¼å®¹æ€§100%

### æŠ€æœ¯æ ˆ
- **åç«¯**: FastAPI + LangChain + MySQL + Milvus
- **æ¨¡å‹**: DeepSeek Chat + BGE-M3 Embedding  
- **å‰ç«¯**: HTML/JS (å½“å‰) â†’ React/TypeScript (è®¡åˆ’)
- **éƒ¨ç½²**: Windows/Linuxå…¼å®¹

---

**é‡è¦æé†’**: 
1. å¼€å§‹Reactå¼€å‘å‰å…ˆå®ŒæˆGitç‰ˆæœ¬ç®¡ç†
2. ä¸¥æ ¼æŒ‰ç…§3å¤©å®ŒæˆMVPçš„æ—¶é—´è¦æ±‚
3. æµ‹è¯•è¿‡ç¨‹ä¸­åŒæ­¥ä¿®å¤å‘ç°çš„é—®é¢˜
4. ä¿æŒæ–‡æ¡£å®æ—¶æ›´æ–°
python check_available_dates.py
```

#### 2. éœ€è¦ç”¨æˆ·åœ¨Windowsæ‰§è¡Œçš„æµ‹è¯•
```bash
# Windows Anacondaç¯å¢ƒå¯åŠ¨API
(stock_analysis_env) python -m uvicorn api.main:app --reload --host 0.0.0.0 --port 8000

# ç»¼åˆåŠŸèƒ½æµ‹è¯•ï¼ˆéœ€è¦APIè¿è¡Œï¼‰
(stock_analysis_env) python baseline_test.py
(stock_analysis_env) python comprehensive_verification.py
(stock_analysis_env) python test_financial_agent.py
(stock_analysis_env) python test_money_flow_analysis.py
```

#### 3. ç½‘é¡µç‰ˆæµ‹è¯•ï¼ˆéœ€è¦ç”¨æˆ·æ‰‹åŠ¨æµ‹è¯•ï¼‰
- è®¿é—® http://localhost:8000
- æŒ‰ç…§ docs/testing/WEB_FUNCTIONAL_TEST_GUIDE.md æ‰§è¡Œæµ‹è¯•
- APIæ–‡æ¡£æµ‹è¯•ï¼šhttp://localhost:8000/docs

### Bashè¶…æ—¶é…ç½®ç­–ç•¥
```python
# çŸ­æ—¶é—´å‘½ä»¤ï¼ˆ< 30ç§’ï¼‰
bash_result = Bash(command="git status")

# ä¸­ç­‰æ—¶é—´å‘½ä»¤ï¼ˆ< 2åˆ†é’Ÿï¼‰
bash_result = Bash(command="python quick_test.py", timeout=120000)

# é•¿æ—¶é—´å‘½ä»¤ï¼ˆ< 10åˆ†é’Ÿï¼‰
bash_result = Bash(command="python comprehensive_test.py", timeout=600000)
```

## æµ‹è¯•ç­–ç•¥è§„èŒƒ

### ä¸‰å±‚æµ‹è¯•ä½“ç³»

#### 1. å•å…ƒæµ‹è¯•ï¼ˆClaude Codeæ‰§è¡Œï¼‰
- æ•°æ®åº“è¿æ¥éªŒè¯
- å·¥å…·å‡½æ•°æµ‹è¯•
- æ¨¡å—å¯¼å…¥æ£€æŸ¥
- **æ‰§è¡Œæ–¹å¼**: Claude Codeç›´æ¥è¿è¡Œ

#### 2. é›†æˆæµ‹è¯•ï¼ˆWindows APIç¯å¢ƒï¼‰
- APIç«¯ç‚¹æµ‹è¯•
- AgentåŠŸèƒ½éªŒè¯
- ç«¯åˆ°ç«¯æµç¨‹æµ‹è¯•
- **æ‰§è¡Œæ–¹å¼**: æç¤ºç”¨æˆ·åœ¨Windowsè¿è¡Œ

#### 3. ç”¨æˆ·éªŒæ”¶æµ‹è¯•ï¼ˆç½‘é¡µç•Œé¢ï¼‰
- åŠŸèƒ½å®Œæ•´æ€§éªŒè¯
- ç”¨æˆ·ä½“éªŒæµ‹è¯•
- æ€§èƒ½åŸºå‡†éªŒè¯
- **æ‰§è¡Œæ–¹å¼**: æç¤ºç”¨æˆ·æ‰‹åŠ¨æµ‹è¯•

### æµ‹è¯•æç¤ºæ¨¡æ¿
```python
# Claude Codeä½¿ç”¨ç¤ºä¾‹
if test_type == "integration":
    print("âš ï¸ æ­¤æµ‹è¯•éœ€è¦APIè¿è¡Œ")
    print("è¯·åœ¨Windowsç¯å¢ƒæ‰§è¡Œï¼š")
    print("1. å¯åŠ¨API: python -m uvicorn api.main:app --reload")
    print("2. è¿è¡Œæµ‹è¯•: python {test_file}")
elif test_type == "web":
    print("ğŸŒ æ­¤ä¸ºç½‘é¡µç‰ˆæµ‹è¯•")
    print("è¯·æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:8000")
    print("æŒ‰ç…§æµ‹è¯•æŒ‡å—æ‰§è¡Œæ‰‹åŠ¨æµ‹è¯•")
```

## Phase 2 æŠ€æœ¯é¢åˆ†æç³»ç»Ÿ

### å¼€å‘æ¦‚è¿°
- **ç›®æ ‡**: æ„å»ºä¸“ä¸šçš„æŠ€æœ¯é¢åˆ†æç³»ç»Ÿï¼Œä¸å·²å®Œæˆçš„åŸºæœ¬é¢åˆ†æå½¢æˆäº’è¡¥
- **é¢„è®¡æ—¶é—´**: 3å‘¨
- **ä¼˜å…ˆçº§**: æœ€é«˜

### Week 1: æŠ€æœ¯æŒ‡æ ‡è®¡ç®—æ¨¡å— (utils/technical_indicators.py)

#### æ ¸å¿ƒæŒ‡æ ‡å®ç°
1. **è¶‹åŠ¿æŒ‡æ ‡**
   - SMA/EMAï¼ˆç®€å•/æŒ‡æ•°ç§»åŠ¨å¹³å‡ï¼‰
   - MACDï¼ˆå¹³æ»‘å¼‚åŒç§»åŠ¨å¹³å‡çº¿ï¼‰
   - å¸ƒæ—å¸¦ï¼ˆBollinger Bandsï¼‰

2. **åŠ¨é‡æŒ‡æ ‡**
   - RSIï¼ˆç›¸å¯¹å¼ºå¼±æŒ‡æ ‡ï¼‰
   - KDJï¼ˆéšæœºæŒ‡æ ‡ï¼‰
   - ROCï¼ˆå˜åŠ¨ç‡ï¼‰

3. **æˆäº¤é‡æŒ‡æ ‡**
   - OBVï¼ˆèƒ½é‡æ½®ï¼‰
   - æˆäº¤é‡åŠ æƒå¹³å‡ä»·ï¼ˆVWAPï¼‰
   - é‡æ¯”æŒ‡æ ‡

4. **æ³¢åŠ¨ç‡æŒ‡æ ‡**
   - ATRï¼ˆçœŸå®æ³¢å¹…ï¼‰
   - æ ‡å‡†å·®
   - å†å²æ³¢åŠ¨ç‡

### Week 2: TechnicalAnalysisAgentå¼€å‘

#### æ ¸å¿ƒåŠŸèƒ½
1. **è¶‹åŠ¿åˆ†æ**
   - ä¸»è¶‹åŠ¿åˆ¤æ–­ï¼ˆä¸Šå‡/ä¸‹é™/æ¨ªç›˜ï¼‰
   - è¶‹åŠ¿å¼ºåº¦è¯„ä¼°
   - è¶‹åŠ¿è½¬æŠ˜ç‚¹è¯†åˆ«

2. **å½¢æ€è¯†åˆ«**
   - ç»å…¸Kçº¿å½¢æ€ï¼ˆé”¤å­çº¿ã€åå­—æ˜Ÿç­‰ï¼‰
   - å›¾è¡¨å½¢æ€ï¼ˆå¤´è‚©é¡¶ã€åŒåº•ç­‰ï¼‰
   - çªç ´å½¢æ€è¯†åˆ«

3. **æ”¯æ’‘é˜»åŠ›åˆ†æ**
   - åŠ¨æ€æ”¯æ’‘/é˜»åŠ›ä½è®¡ç®—
   - é‡è¦ä»·æ ¼åŒºé—´æ ‡è®°
   - çªç ´æ¦‚ç‡è¯„ä¼°

4. **äº¤æ˜“ä¿¡å·ç”Ÿæˆ**
   - ä¹°å…¥/å–å‡ºä¿¡å·
   - ä¿¡å·å¼ºåº¦è¯„çº§
   - é£é™©æç¤º

### Week 3: APIé›†æˆå’Œæµ‹è¯•

#### é›†æˆä»»åŠ¡
1. **APIç«¯ç‚¹å¼€å‘**
   ```python
   POST /technical-analysis
   {
       "ts_code": "600519.SH",
       "analysis_type": "comprehensive",
       "period": 30
   }
   ```

2. **Hybrid Agenté›†æˆ**
   - æ·»åŠ TECHNICALæŸ¥è¯¢ç±»å‹
   - æ™ºèƒ½è·¯ç”±åˆ°TechnicalAgent

3. **å‰ç«¯ç•Œé¢æ›´æ–°**
   - æ·»åŠ æŠ€æœ¯åˆ†æå¿«æ·æŒ‰é’®
   - å›¾è¡¨å±•ç¤ºæ”¯æŒï¼ˆå¯é€‰ï¼‰

## åç»­å¼€å‘è·¯çº¿å›¾

### Phase 3: æ–‡æ¡£æ™ºèƒ½åˆ†æ (2-3å‘¨)
**ç›®æ ‡**: æ·±åº¦è§£è¯»è´¢æŠ¥å’Œå…¬å‘Šå†…å®¹
- å¹´æŠ¥å­£æŠ¥å…³é”®ä¿¡æ¯æå–
- ä¸»é¢˜æŠ•èµ„æœºä¼šå‘ç°ï¼ˆAIã€æ–°èƒ½æºã€ç”Ÿç‰©åŒ»è¯ï¼‰
- æ”¿ç­–å½±å“åˆ†æ
- è¡Œä¸šè¶‹åŠ¿è¯†åˆ«
- äº‹ä»¶é©±åŠ¨åˆ†æ

**æ–°å¢ç»„ä»¶**:
- DocumentAnalysisAgent
- ThemeDiscoveryEngine
- PolicyImpactAnalyzer

### Phase 4: ç»¼åˆå†³ç­–æ”¯æŒ (2-3å‘¨)
**ç›®æ ‡**: å¤šç»´åº¦æŠ•èµ„å†³ç­–ç³»ç»Ÿ
- ç»¼åˆè¯„åˆ†ç³»ç»Ÿï¼ˆåŸºæœ¬é¢70% + æŠ€æœ¯é¢20% + æ¶ˆæ¯é¢10%ï¼‰
- æŠ•èµ„ç»„åˆä¼˜åŒ–å»ºè®®
- é£é™©åˆ†æ•£ç­–ç•¥
- åŠ¨æ€å†å¹³è¡¡æé†’
- å†å²å›æµ‹åˆ†æ

**æ–°å¢ç»„ä»¶**:
- PortfolioAgent
- RiskAnalysisEngine
- BacktestingSystem

### Phase 5: ä¼°å€¼åˆ†æç³»ç»Ÿ (1-2å‘¨)
**ç›®æ ‡**: ä¸“ä¸šä¼°å€¼å’Œé€‰è‚¡
- PE/PBå†å²åˆ†ä½æ•°
- PEGä¼°å€¼åˆç†æ€§
- DCFæ¨¡å‹ï¼ˆå¯é€‰ï¼‰
- ç›¸å¯¹ä¼°å€¼åˆ†æ
- è‚¡æ¯ç‡åˆ†æ

**æ–°å¢ç»„ä»¶**:
- ValuationAgent
- DividendAnalyzer

### å…¶ä»–æ”¹è¿›ä»»åŠ¡

#### çŸ­æœŸä»»åŠ¡ï¼ˆ1å‘¨å†…ï¼‰
- [ ] æ€§èƒ½ç›‘æ§ä»ªè¡¨æ¿
- [ ] APIæ–‡æ¡£å®Œå–„
- [ ] éƒ¨ç½²æŒ‡å—æ›´æ–°
- [ ] Claude Codeä½¿ç”¨æœ€ä½³å®è·µæ–‡æ¡£

#### ä¸­é•¿æœŸä»»åŠ¡
- [ ] Redisç¼“å­˜å±‚å®ç°
- [ ] æ›´å¤šæŸ¥è¯¢æ¨¡æ¿
- [ ] å®æ—¶æ•°æ®æ¨é€
- [ ] CI/CDæµç¨‹é›†æˆ
- [ ] å¤šè¯­è¨€æ”¯æŒï¼ˆè‹±æ–‡ç‰ˆï¼‰

## å·²å®ŒæˆåŠŸèƒ½æ€»ç»“

### v1.4.2-final åŠŸèƒ½æ¸…å• âœ…

#### æ ¸å¿ƒæŸ¥è¯¢ç³»ç»Ÿ
- **SQLæŸ¥è¯¢**: è‚¡ä»·ã€å¸‚å€¼ã€è´¢åŠ¡æŒ‡æ ‡æŸ¥è¯¢
- **RAGæŸ¥è¯¢**: æ–‡æ¡£è¯­ä¹‰æœç´¢ï¼ˆ95,662+å‘é‡ï¼‰
- **æ··åˆæŸ¥è¯¢**: æ™ºèƒ½è·¯ç”±å’Œç»„åˆåˆ†æ

#### Phase 1: æ·±åº¦è´¢åŠ¡åˆ†æ âœ…
- **è´¢åŠ¡å¥åº·åº¦è¯„åˆ†**: AAA-CCCä¸“ä¸šè¯„çº§ç³»ç»Ÿ
- **æœé‚¦åˆ†æ**: ROEä¸‰å› ç´ åˆ†è§£
- **ç°é‡‘æµè´¨é‡**: A-Dçº§è´¨é‡è¯„ä¼°
- **å¤šæœŸå¯¹æ¯”**: åŒæ¯”ç¯æ¯”è¶‹åŠ¿åˆ†æ

#### Phase 2: èµ„é‡‘æµå‘åˆ†æ âœ…
- **ä¸»åŠ›èµ„é‡‘ç›‘æ§**: å¤§å•+è¶…å¤§å•å‡€æµå‘
- **è¶…å¤§å•è¡Œä¸ºè¯†åˆ«**: å»ºä»“/å‡ä»“/æ´—ç›˜æ¨¡å¼
- **å››çº§èµ„é‡‘åˆ†å¸ƒ**: æœºæ„/å¤§æˆ·/ä¸­æˆ·/æ•£æˆ·
- **ä¸“ä¸šè¯„ä¼°æŠ¥å‘Š**: æµå‘å¼ºåº¦å’Œä¸€è‡´æ€§è¯„åˆ†

#### æ™ºèƒ½æ—¥æœŸè§£æ v2.0 âœ…
- **è‡ªç„¶è¯­è¨€è¯†åˆ«**: "æœ€æ–°"ã€"æœ€è¿‘"ã€"å»å¹´åŒæœŸ"
- **æ—¶é—´ç‚¹vsæ—¶é—´æ®µ**: ç²¾å‡†åŒºåˆ†æŸ¥è¯¢æ„å›¾
- **ä¸“ä¸šäº¤æ˜“æ—¥è®¡ç®—**: è€ƒè™‘èŠ‚å‡æ—¥å’Œåœç‰Œ
- **å¤šå±‚ç¼“å­˜ä¼˜åŒ–**: 1å°æ—¶TTLç¼“å­˜

